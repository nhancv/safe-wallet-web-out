"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1018],{11405:(e,t,n)=>{var s=Object.defineProperty,r=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,i=(e,t,n)=>(r(e,"symbol"!=typeof t?t+"":t,n),n);Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});let o=n(6029),a=n(55729);class c{constructor(e){this.key=e}postMessageToWindow(e,t,n){let s={key:this.key,method:t,..."object"==typeof n?n:{}};e.postMessage(s,"*")}listenToMessageFromWindow(e,t,n){let s=e=>{var s;"object"==typeof(s=e.data)&&null!==s&&"key"in s&&"method"in s&&"string"==typeof s.key&&"string"==typeof s.method&&e.data.key===this.key&&e.data.method===t&&n(e.data)};return e.addEventListener("message",s),s}stopListeningToMessageFromWindow(e,t,n){e.removeEventListener("message",n)}stopListeningWindowListener(e,t){e.removeEventListener("message",t)}}var p=(e=>(e.PROVIDER_RPC_REQUEST="PROVIDER_RPC_REQUEST",e.PROVIDER_RPC_RESPONSE="PROVIDER_RPC_RESPONSE",e.PROVIDER_ON_EVENT="PROVIDER_ON_EVENT",e))(p||{});let u=new c("cowSwapIframeRpcProviderTransport"),l=["connect","disconnect","close","chainChanged","accountsChanged"];class d{constructor(e){i(this,"ethereumProvider",null),i(this,"requestWaitingForConnection",{}),i(this,"processRpcCallFromWindow",({rpcRequest:e})=>{if(!this.ethereumProvider){e.id&&(this.requestWaitingForConnection[e.id]=e);return}this.processRpcRequest(e)}),this.iframeWidow=e}disconnect(){this.ethereumProvider=null,u.stopListeningToMessageFromWindow(window,p.PROVIDER_RPC_REQUEST,this.processRpcCallFromWindow)}onConnect(e){this.ethereumProvider?this.disconnect():u.listenToMessageFromWindow(window,p.PROVIDER_RPC_REQUEST,this.processRpcCallFromWindow),this.ethereumProvider=e,this.processPendingRequests(),l.forEach(t=>{e.on(t,e=>this.onProviderEvent(t,e))})}processPendingRequests(){Object.keys(this.requestWaitingForConnection).forEach(e=>{this.processRpcRequest(this.requestWaitingForConnection[e])}),this.requestWaitingForConnection={}}processRpcRequest(e){let{id:t,jsonrpc:n,method:s}=e;this.ethereumProvider&&t&&("enable"===s?this.ethereumProvider.enable():this.ethereumProvider.request({...e,id:t})).then(e=>this.forwardRpcResponseToIframe({rpcResponse:{jsonrpc:n,id:t,result:e}})).catch(e=>this.forwardRpcResponseToIframe({rpcResponse:{jsonrpc:n,id:t,error:e}}))}onProviderEvent(e,t){u.postMessageToWindow(this.iframeWidow,p.PROVIDER_ON_EVENT,{event:e,params:t})}forwardRpcResponseToIframe(e){u.postMessageToWindow(this.iframeWidow,p.PROVIDER_RPC_RESPONSE,e)}}!function(e){var t=Object.prototype.hasOwnProperty,n="~";function s(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,s,i,o){if("function"!=typeof s)throw TypeError("The listener must be a function");var a=new r(s,i||e,o),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new s:delete e._events[t]}function a(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1)),a.prototype.eventNames=function(){var e,s,r=[];if(0===this._eventsCount)return r;for(s in e=this._events)t.call(e,s)&&r.push(n?s.slice(1):s);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},a.prototype.listeners=function(e){var t=n?n+e:e,s=this._events[t];if(!s)return[];if(s.fn)return[s.fn];for(var r=0,i=s.length,o=Array(i);r<i;r++)o[r]=s[r].fn;return o},a.prototype.listenerCount=function(e){var t=n?n+e:e,s=this._events[t];return s?s.fn?1:s.length:0},a.prototype.emit=function(e,t,s,r,i,o){var a=n?n+e:e;if(!this._events[a])return!1;var c,p,u=this._events[a],l=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),l){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,s),!0;case 4:return u.fn.call(u.context,t,s,r),!0;case 5:return u.fn.call(u.context,t,s,r,i),!0;case 6:return u.fn.call(u.context,t,s,r,i,o),!0}for(p=1,c=Array(l-1);p<l;p++)c[p-1]=arguments[p];u.fn.apply(u.context,c)}else{var d,h=u.length;for(p=0;p<h;p++)switch(u[p].once&&this.removeListener(e,u[p].fn,void 0,!0),l){case 1:u[p].fn.call(u[p].context);break;case 2:u[p].fn.call(u[p].context,t);break;case 3:u[p].fn.call(u[p].context,t,s);break;case 4:u[p].fn.call(u[p].context,t,s,r);break;default:if(!c)for(d=1,c=Array(l-1);d<l;d++)c[d-1]=arguments[d];u[p].fn.apply(u[p].context,c)}}return!0},a.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,s,r){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||r&&!a.once||s&&a.context!==s||o(this,i);else{for(var c=0,p=[],u=a.length;c<u;c++)(a[c].fn!==t||r&&!a[c].once||s&&a[c].context!==s)&&p.push(a[c]);p.length?this._events[i]=1===p.length?p[0]:p:o(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a}({exports:{}});class h{constructor(){i(this,"subscriptions",{})}on(e){let{event:t,handler:n}=e;return this.subscriptions[t]||(this.subscriptions[t]=[]),this.subscriptions[t].push(n),e}off(e){let{event:t,handler:n}=e;return this.subscriptions[t]&&(this.subscriptions[t]=this.subscriptions[t].filter(e=>e!==n)),e}emit(e,t){this.subscriptions[e]&&this.subscriptions[e].forEach(e=>e(t))}}var f=(e=>(e.ACTIVATE="ACTIVATE",e.UPDATE_HEIGHT="UPDATE_HEIGHT",e.SET_FULL_HEIGHT="SET_FULL_HEIGHT",e.EMIT_COW_EVENT="EMIT_COW_EVENT",e.PROVIDER_RPC_REQUEST="PROVIDER_RPC_REQUEST",e.INTERCEPT_WINDOW_OPEN="INTERCEPT_WINDOW_OPEN",e))(f||{}),E=(e=>(e.UPDATE_PARAMS="UPDATE_PARAMS",e.UPDATE_APP_DATA="UPDATE_APP_DATA",e.PROVIDER_RPC_RESPONSE="PROVIDER_RPC_RESPONSE",e.PROVIDER_ON_EVENT="PROVIDER_ON_EVENT",e))(E||{}),_=(e=>(e.SWAP="swap",e.LIMIT="limit",e.ADVANCED="advanced",e.YIELD="yield",e))(_||{});let R=new c("cowSwapWidget");class m{constructor(e,t=[]){i(this,"eventEmitter",new h),i(this,"listeners",[]),i(this,"widgetListener"),this.contentWindow=e,this.updateListeners(t),this.widgetListener=R.listenToMessageFromWindow(this.contentWindow,f.EMIT_COW_EVENT,e=>this.eventEmitter.emit(e.event,e.payload))}stopListeningIframe(){R.stopListeningWindowListener(this.contentWindow,this.widgetListener)}updateListeners(e){for(let e of this.listeners)this.eventEmitter.off(e);for(let t of(this.listeners=e||[],this.listeners))this.eventEmitter.on(t)}}class w{constructor(e,t){i(this,"forwardSdkMessage"),this.appWindow=e,this.iframeWidow=t,this.forwardSdkMessage=e=>{(function(e){return"object"==typeof e&&null!==e&&"id"in e&&"string"==typeof e.id})(e.data)&&e.origin!==window.location.origin&&(function(e){return"method"in e&&"string"==typeof e.method&&"params"in e&&"env"in e&&"object"==typeof e.env&&null!==e.env&&"sdkVersion"in e.env}(e.data)?this.appWindow.parent.postMessage(e.data,"*"):function(e){return"success"in e&&"boolean"==typeof e.success&&"version"in e&&"string"==typeof e.version}(e.data)&&this.iframeWidow.postMessage(e.data,"*"))},this.startListening()}startListening(){this.appWindow.addEventListener("message",this.forwardSdkMessage)}stopListening(){this.appWindow.removeEventListener("message",this.forwardSdkMessage)}}function v(e){return!!(e&&"object"==typeof e)}function g(e){let{chainId:t=1,sell:n,buy:s,tradeType:r=_.SWAP}=e,i=[(null==n?void 0:n.asset)||"_",(null==s?void 0:s.asset)||"_"].map(encodeURIComponent).join("/");return`/${t}/widget/${r}/${i}`}function T(e){return function(e,t){let n=t.theme;return n?v(n)?(e.append("palette",encodeURIComponent(JSON.stringify(n))),e.append("theme",n.baseTheme)):(e.append("palette","null"),e.append("theme",n)):e.append("palette","null"),e}(function(e,t){let{sell:n,buy:s}=t;return null!=n&&n.amount&&e.append("sellAmount",n.amount),null!=s&&s.amount&&e.append("buyAmount",s.amount),e}(new URLSearchParams,e),e)}let P="640px";function O(e,t){var n,s;let{params:r,provider:i,listeners:o}=t,a=i,c=r,p=function(e){var t;let{width:n="450px",height:s=P}=e,r=document.createElement("iframe");return r.src=("string"==typeof(t=e).baseUrl?t.baseUrl:"https://swap.cow.fi")+"/#"+g(t)+"?"+T(t),r.width=n,r.height=s,r.style.border="0",r.allow="clipboard-read; clipboard-write",r}(r);e.innerHTML="",e.appendChild(p);let{contentWindow:u}=p;if(!u)throw console.error("Iframe does not contain a window",p),Error("Iframe does not contain a window!");let l=[];l.push((n=u,s=r.appCode,R.listenToMessageFromWindow(window,f.ACTIVATE,()=>{R.postMessageToWindow(n,E.UPDATE_APP_DATA,{metaData:s?{appCode:s}:void 0})}))),l.push(...function(e,t=P,n){return[R.listenToMessageFromWindow(window,f.UPDATE_HEIGHT,s=>{let r=s.height?s.height+20:void 0;e.style.height=r?`${n?Math.min(r,n):r}px`:t}),R.listenToMessageFromWindow(window,f.SET_FULL_HEIGHT,({isUpToSmall:s})=>{e.style.height=s?t:`${n||document.body.offsetHeight}px`})]}(p,r.height,r.maxHeight)),l.push(R.listenToMessageFromWindow(window,f.INTERCEPT_WINDOW_OPEN,({href:e,rel:t,target:n})=>{let s=e.toString();if(!s.startsWith("http")&&s.match(/^[a-zA-Z0-9]+:\/\//)){window.open(s,n,t);return}}));let d=new m(window,o),h=y(u,null,a);p.addEventListener("load",()=>C(u,c,a));let _=new w(window,u);return{updateParams:e=>{C(u,c=e,a)},updateListeners:e=>d.updateListeners(e),updateProvider:e=>{a=e,h=y(u,h,e)},destroy:()=>{h.disconnect(),d.stopListeningIframe(),l.forEach(e=>window.removeEventListener("message",e)),_.stopListening(),e.removeChild(p)}}}function y(e,t,n){t&&t.disconnect();let s=t||new d(e);return n&&s.onConnect(n),s}function C(e,t,n){let s=g(t),r=T(t).toString(),{theme:i,...o}=t;R.postMessageToWindow(e,E.UPDATE_PARAMS,{urlParams:{pathname:s,search:r},appParams:o,hasProvider:!!n})}let I=Object.values(_);function b(e){return"object"==typeof e&&Object.keys(e).every(e=>I.includes(e))}let A=/^\d+$/;function N(e){return"object"==typeof e&&Object.keys(e).every(e=>"number"==typeof e||A.test(e))}t.CowSwapWidget=function(e){let{params:t,provider:n,listeners:s}=e,[r,i]=a.useState(null),c=a.useRef(null),p=a.useRef(n),u=a.useRef(s),l=a.useRef(null),d=a.useRef(null),h=a.useCallback((e,t)=>{try{console.log(`[WIDGET] ${e}`),t()}catch(n){let t=`Error ${e.toLowerCase()}`;console.error(`[WIDGET] ${t}`,n),i({message:t,error:n})}},[]);return a.useEffect(()=>()=>{c.current=null,p.current=void 0,u.current=void 0;let e=d.current;e&&(h("\uD83D\uDCA5 Destroy widget",()=>e.destroy()),d.current=null)},[]),a.useEffect(()=>{if(!l.current||JSON.stringify(c.current)===JSON.stringify(t))return;let e=l.current,n=d.current;c.current=t,null===n?h("Creating a new widget",()=>{d.current=O(e,{params:t,provider:p.current,listeners:s}),u.current=s}):h("Updating the widget",()=>n.updateParams(t))},[t,h]),a.useEffect(()=>{if(!d.current||p.current===n)return;p.current=n;let e=l.current;e&&h("Updating the provider",()=>{var n;null==(n=d.current)||n.destroy(),d.current=O(e,{params:t,provider:p.current,listeners:s})})},[n,h]),a.useEffect(()=>{if(!d.current||u.current===s)return;let e=d.current;h("Updating the listeners",()=>e.updateListeners(s))},[s,h]),r?o.jsxs("div",{style:{color:"#ff3a3a"},children:[r.message,r.error.message&&o.jsx("pre",{style:{whiteSpace:"pre-wrap",fontSize:"0.75em"},children:r.error.message})]}):o.jsx("div",{ref:l,style:{width:"100%"}})},t.TradeType=_,t.WIDGET_PALETTE_COLORS=["primary","background","paper","text","danger","warning","alert","info","success"],t.WidgetMethodsEmit=f,t.WidgetMethodsListen=E,t.createCowSwapWidget=O,t.isCowSwapWidgetPalette=v,t.isPerNetworkConfig=N,t.isPerTradeTypeConfig=b,t.resolveFlexibleConfig=function(e,t,n){if(b(e)){let s=e[n];return N(s)?s[t]:s}if(N(e)){let s=e[t];return b(s)?s[n]:s}return e},t.widgetIframeTransport=R},36532:(e,t)=>{var n=Object.defineProperty,s=(e,t,s)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,r=(e,t,n)=>(s(e,"symbol"!=typeof t?t+"":t,n),n);Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});class i{constructor(e){this.key=e}postMessageToWindow(e,t,n){let s={key:this.key,method:t,..."object"==typeof n?n:{}};e.postMessage(s,"*")}listenToMessageFromWindow(e,t,n){let s=e=>{var s;"object"==typeof(s=e.data)&&null!==s&&"key"in s&&"method"in s&&"string"==typeof s.key&&"string"==typeof s.method&&e.data.key===this.key&&e.data.method===t&&n(e.data)};return e.addEventListener("message",s),s}stopListeningToMessageFromWindow(e,t,n){e.removeEventListener("message",n)}stopListeningWindowListener(e,t){e.removeEventListener("message",t)}}var o=(e=>(e.PROVIDER_RPC_REQUEST="PROVIDER_RPC_REQUEST",e.PROVIDER_RPC_RESPONSE="PROVIDER_RPC_RESPONSE",e.PROVIDER_ON_EVENT="PROVIDER_ON_EVENT",e))(o||{});let a=new i("cowSwapIframeRpcProviderTransport"),c=["connect","disconnect","close","chainChanged","accountsChanged"];class p{constructor(e){r(this,"ethereumProvider",null),r(this,"requestWaitingForConnection",{}),r(this,"processRpcCallFromWindow",({rpcRequest:e})=>{if(!this.ethereumProvider){e.id&&(this.requestWaitingForConnection[e.id]=e);return}this.processRpcRequest(e)}),this.iframeWidow=e}disconnect(){this.ethereumProvider=null,a.stopListeningToMessageFromWindow(window,o.PROVIDER_RPC_REQUEST,this.processRpcCallFromWindow)}onConnect(e){this.ethereumProvider?this.disconnect():a.listenToMessageFromWindow(window,o.PROVIDER_RPC_REQUEST,this.processRpcCallFromWindow),this.ethereumProvider=e,this.processPendingRequests(),c.forEach(t=>{e.on(t,e=>this.onProviderEvent(t,e))})}processPendingRequests(){Object.keys(this.requestWaitingForConnection).forEach(e=>{this.processRpcRequest(this.requestWaitingForConnection[e])}),this.requestWaitingForConnection={}}processRpcRequest(e){let{id:t,jsonrpc:n,method:s}=e;this.ethereumProvider&&t&&("enable"===s?this.ethereumProvider.enable():this.ethereumProvider.request({...e,id:t})).then(e=>this.forwardRpcResponseToIframe({rpcResponse:{jsonrpc:n,id:t,result:e}})).catch(e=>this.forwardRpcResponseToIframe({rpcResponse:{jsonrpc:n,id:t,error:e}}))}onProviderEvent(e,t){a.postMessageToWindow(this.iframeWidow,o.PROVIDER_ON_EVENT,{event:e,params:t})}forwardRpcResponseToIframe(e){a.postMessageToWindow(this.iframeWidow,o.PROVIDER_RPC_RESPONSE,e)}}!function(e){var t=Object.prototype.hasOwnProperty,n="~";function s(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,s,i,o){if("function"!=typeof s)throw TypeError("The listener must be a function");var a=new r(s,i||e,o),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new s:delete e._events[t]}function a(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1)),a.prototype.eventNames=function(){var e,s,r=[];if(0===this._eventsCount)return r;for(s in e=this._events)t.call(e,s)&&r.push(n?s.slice(1):s);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},a.prototype.listeners=function(e){var t=n?n+e:e,s=this._events[t];if(!s)return[];if(s.fn)return[s.fn];for(var r=0,i=s.length,o=Array(i);r<i;r++)o[r]=s[r].fn;return o},a.prototype.listenerCount=function(e){var t=n?n+e:e,s=this._events[t];return s?s.fn?1:s.length:0},a.prototype.emit=function(e,t,s,r,i,o){var a=n?n+e:e;if(!this._events[a])return!1;var c,p,u=this._events[a],l=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),l){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,s),!0;case 4:return u.fn.call(u.context,t,s,r),!0;case 5:return u.fn.call(u.context,t,s,r,i),!0;case 6:return u.fn.call(u.context,t,s,r,i,o),!0}for(p=1,c=Array(l-1);p<l;p++)c[p-1]=arguments[p];u.fn.apply(u.context,c)}else{var d,h=u.length;for(p=0;p<h;p++)switch(u[p].once&&this.removeListener(e,u[p].fn,void 0,!0),l){case 1:u[p].fn.call(u[p].context);break;case 2:u[p].fn.call(u[p].context,t);break;case 3:u[p].fn.call(u[p].context,t,s);break;case 4:u[p].fn.call(u[p].context,t,s,r);break;default:if(!c)for(d=1,c=Array(l-1);d<l;d++)c[d-1]=arguments[d];u[p].fn.apply(u[p].context,c)}}return!0},a.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,s,r){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||r&&!a.once||s&&a.context!==s||o(this,i);else{for(var c=0,p=[],u=a.length;c<u;c++)(a[c].fn!==t||r&&!a[c].once||s&&a[c].context!==s)&&p.push(a[c]);p.length?this._events[i]=1===p.length?p[0]:p:o(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a}({exports:{}});class u{constructor(){r(this,"subscriptions",{})}on(e){let{event:t,handler:n}=e;return this.subscriptions[t]||(this.subscriptions[t]=[]),this.subscriptions[t].push(n),e}off(e){let{event:t,handler:n}=e;return this.subscriptions[t]&&(this.subscriptions[t]=this.subscriptions[t].filter(e=>e!==n)),e}emit(e,t){this.subscriptions[e]&&this.subscriptions[e].forEach(e=>e(t))}}var l=(e=>(e.ACTIVATE="ACTIVATE",e.UPDATE_HEIGHT="UPDATE_HEIGHT",e.SET_FULL_HEIGHT="SET_FULL_HEIGHT",e.EMIT_COW_EVENT="EMIT_COW_EVENT",e.PROVIDER_RPC_REQUEST="PROVIDER_RPC_REQUEST",e.INTERCEPT_WINDOW_OPEN="INTERCEPT_WINDOW_OPEN",e))(l||{}),d=(e=>(e.UPDATE_PARAMS="UPDATE_PARAMS",e.UPDATE_APP_DATA="UPDATE_APP_DATA",e.PROVIDER_RPC_RESPONSE="PROVIDER_RPC_RESPONSE",e.PROVIDER_ON_EVENT="PROVIDER_ON_EVENT",e))(d||{}),h=(e=>(e.SWAP="swap",e.LIMIT="limit",e.ADVANCED="advanced",e.YIELD="yield",e))(h||{});let f=new i("cowSwapWidget");class E{constructor(e,t=[]){r(this,"eventEmitter",new u),r(this,"listeners",[]),r(this,"widgetListener"),this.contentWindow=e,this.updateListeners(t),this.widgetListener=f.listenToMessageFromWindow(this.contentWindow,l.EMIT_COW_EVENT,e=>this.eventEmitter.emit(e.event,e.payload))}stopListeningIframe(){f.stopListeningWindowListener(this.contentWindow,this.widgetListener)}updateListeners(e){for(let e of this.listeners)this.eventEmitter.off(e);for(let t of(this.listeners=e||[],this.listeners))this.eventEmitter.on(t)}}class _{constructor(e,t){r(this,"forwardSdkMessage"),this.appWindow=e,this.iframeWidow=t,this.forwardSdkMessage=e=>{(function(e){return"object"==typeof e&&null!==e&&"id"in e&&"string"==typeof e.id})(e.data)&&e.origin!==window.location.origin&&(function(e){return"method"in e&&"string"==typeof e.method&&"params"in e&&"env"in e&&"object"==typeof e.env&&null!==e.env&&"sdkVersion"in e.env}(e.data)?this.appWindow.parent.postMessage(e.data,"*"):function(e){return"success"in e&&"boolean"==typeof e.success&&"version"in e&&"string"==typeof e.version}(e.data)&&this.iframeWidow.postMessage(e.data,"*"))},this.startListening()}startListening(){this.appWindow.addEventListener("message",this.forwardSdkMessage)}stopListening(){this.appWindow.removeEventListener("message",this.forwardSdkMessage)}}function R(e){return!!(e&&"object"==typeof e)}function m(e){let{chainId:t=1,sell:n,buy:s,tradeType:r=h.SWAP}=e,i=[(null==n?void 0:n.asset)||"_",(null==s?void 0:s.asset)||"_"].map(encodeURIComponent).join("/");return`/${t}/widget/${r}/${i}`}function w(e){return function(e,t){let n=t.theme;return n?R(n)?(e.append("palette",encodeURIComponent(JSON.stringify(n))),e.append("theme",n.baseTheme)):(e.append("palette","null"),e.append("theme",n)):e.append("palette","null"),e}(function(e,t){let{sell:n,buy:s}=t;return null!=n&&n.amount&&e.append("sellAmount",n.amount),null!=s&&s.amount&&e.append("buyAmount",s.amount),e}(new URLSearchParams,e),e)}let v="640px";function g(e,t,n){t&&t.disconnect();let s=t||new p(e);return n&&s.onConnect(n),s}function T(e,t,n){let s=m(t),r=w(t).toString(),{theme:i,...o}=t;f.postMessageToWindow(e,d.UPDATE_PARAMS,{urlParams:{pathname:s,search:r},appParams:o,hasProvider:!!n})}let P=Object.values(h);function O(e){return"object"==typeof e&&Object.keys(e).every(e=>P.includes(e))}let y=/^\d+$/;function C(e){return"object"==typeof e&&Object.keys(e).every(e=>"number"==typeof e||y.test(e))}t.TradeType=h,t.WIDGET_PALETTE_COLORS=["primary","background","paper","text","danger","warning","alert","info","success"],t.WidgetMethodsEmit=l,t.WidgetMethodsListen=d,t.createCowSwapWidget=function(e,t){var n,s;let{params:r,provider:i,listeners:o}=t,a=i,c=r,p=function(e){var t;let{width:n="450px",height:s=v}=e,r=document.createElement("iframe");return r.src=("string"==typeof(t=e).baseUrl?t.baseUrl:"https://swap.cow.fi")+"/#"+m(t)+"?"+w(t),r.width=n,r.height=s,r.style.border="0",r.allow="clipboard-read; clipboard-write",r}(r);e.innerHTML="",e.appendChild(p);let{contentWindow:u}=p;if(!u)throw console.error("Iframe does not contain a window",p),Error("Iframe does not contain a window!");let h=[];h.push((n=u,s=r.appCode,f.listenToMessageFromWindow(window,l.ACTIVATE,()=>{f.postMessageToWindow(n,d.UPDATE_APP_DATA,{metaData:s?{appCode:s}:void 0})}))),h.push(...function(e,t=v,n){return[f.listenToMessageFromWindow(window,l.UPDATE_HEIGHT,s=>{let r=s.height?s.height+20:void 0;e.style.height=r?`${n?Math.min(r,n):r}px`:t}),f.listenToMessageFromWindow(window,l.SET_FULL_HEIGHT,({isUpToSmall:s})=>{e.style.height=s?t:`${n||document.body.offsetHeight}px`})]}(p,r.height,r.maxHeight)),h.push(f.listenToMessageFromWindow(window,l.INTERCEPT_WINDOW_OPEN,({href:e,rel:t,target:n})=>{let s=e.toString();if(!s.startsWith("http")&&s.match(/^[a-zA-Z0-9]+:\/\//)){window.open(s,n,t);return}}));let R=new E(window,o),P=g(u,null,a);p.addEventListener("load",()=>T(u,c,a));let O=new _(window,u);return{updateParams:e=>{T(u,c=e,a)},updateListeners:e=>R.updateListeners(e),updateProvider:e=>{a=e,P=g(u,P,e)},destroy:()=>{P.disconnect(),R.stopListeningIframe(),h.forEach(e=>window.removeEventListener("message",e)),O.stopListening(),e.removeChild(p)}}},t.isCowSwapWidgetPalette=R,t.isPerNetworkConfig=C,t.isPerTradeTypeConfig=O,t.resolveFlexibleConfig=function(e,t,n){if(O(e)){let s=e[n];return C(s)?s[t]:s}if(C(e)){let s=e[t];return O(s)?s[n]:s}return e},t.widgetIframeTransport=f},96207:(e,t)=>{var n=Object.defineProperty,s=(e,t,s)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,r=(e,t,n)=>(s(e,"symbol"!=typeof t?t+"":t,n),n);Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});var i=(e=>(e.SWAP_ETH_FLOW_SENT_TX="SWAP_ETH_FLOW_SENT_TX",e.ORDER_CREATED="ORDER_CREATED",e.SWAP_SIGNING_ERROR="SWAP_SIGNING_ERROR",e.ORDER_FULFILLED="ORDER_FULFILLED",e.ORDER_CANCELLED="ORDER_CANCELLED",e.ORDER_EXPIRED="ORDER_EXPIRED",e.ORDER_PRESIGNED="ORDER_PRESIGNED",e.ONCHAIN_TRANSACTION_MINED="ONCHAIN_TRANSACTION_MINED",e.ONCHAIN_TRANSACTION_FAILED="ONCHAIN_TRANSACTION_FAILED",e))(i||{}),o=(e=>(e.ON_TOAST_MESSAGE="ON_TOAST_MESSAGE",e.ON_POSTED_ORDER="ON_POSTED_ORDER",e.ON_FULFILLED_ORDER="ON_FULFILLED_ORDER",e.ON_CANCELLED_ORDER="ON_CANCELLED_ORDER",e.ON_EXPIRED_ORDER="ON_EXPIRED_ORDER",e.ON_PRESIGNED_ORDER="ON_PRESIGNED_ORDER",e.ON_ONCHAIN_TRANSACTION="ON_ONCHAIN_TRANSACTION",e.ON_CHANGE_TRADE_PARAMS="ON_CHANGE_TRADE_PARAMS",e))(o||{});class a{constructor(){r(this,"subscriptions",{})}on(e){let{event:t,handler:n}=e;this.subscriptions[t]||(this.subscriptions[t]=[]),this.subscriptions[t].push(n)}off(e){let{event:t,handler:n}=e;this.subscriptions[t]&&(this.subscriptions[t]=this.subscriptions[t].filter(e=>e!==n))}emit(e,t){this.subscriptions[e]&&this.subscriptions[e].forEach(e=>e(t))}}t.CowEvents=o,t.SimpleCowEventEmitter=a,t.ToastMessageType=i}}]);
//# sourceMappingURL=1018.71f47321f0e96fb5.js.map