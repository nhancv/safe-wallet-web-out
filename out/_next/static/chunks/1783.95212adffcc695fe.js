(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1783],{21783:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>L});var n=t(6029),a=t(73155),r=t(55729),i=t(52162),l=t(91672),o=t(89037),d=t(72197),c=t(81262),x=t(94728),h=t(22084),u=t(85235);let p=(0,t(93944).A)((0,n.jsx)("path",{d:"m19 15-1.41-1.41L13 18.17V2h-2v16.17l-4.59-4.59L5 15l7 7z"}),"South");var g=t(93060),j=t.n(g),m=t(57910),A=t(4876);let f=e=>{let{title:s}=e,t=(0,m.A)();return(0,n.jsxs)(u.azJ,{className:j().container,pb:2,mb:2,children:[(0,n.jsx)(u.o5u,{color:"text.secondary",pb:1,children:s||"Sending from"}),(0,n.jsx)(u.o5u,{variant:"body2",component:"div",children:(0,n.jsx)(A.A,{address:t,shortAddress:!1,hasExplorer:!0,showCopyButton:!0})}),(0,n.jsx)(p,{className:j().arrow})]})};var v=t(97625),y=t(19174),b=t(2934),_=t(16694),w=t(13616),S=t(96524),C=t(28729),I=t(2856),M=t(66072),E=t(57212),N=t(598),k=t(77194),z=t(8694),D=t(27078),J=t(99322);let T=e=>{let{message:s,method:t,children:a,...u}=e,{safe:p}=(0,C.A)(),{safeTx:g,setSafeTx:j,setSafeTxError:m}=(0,r.useContext)(M.H);(0,I.A)();let T=t===x.PJ.signMessage&&"string"==typeof s,U=t===x.PJ.signTypedMessage&&(0,E.nW)(s),[B]=(0,z.A)(async()=>(0,y.op)(p.version),[p.version]),[H,L]=(0,r.useState)("");(0,r.useEffect)(()=>{B&&B.getAddress().then(L)},[B]);let[O,q]=(0,r.useMemo)(()=>{if(T){let e=(0,w.MU)(s);return[e,e]}return U?[s,JSON.stringify(s,null,2)]:[]},[T,U,s]);return(0,r.useEffect)(()=>{let e;if(!B)return;if(T)e=B.encode("signMessage",[(0,i.A)((0,w.MU)(s))]);else if(U){let t={...s.types};delete t.EIP712Domain,e=B.encode("signMessage",[l.z.hash(s.domain,t,s.message)])}let t={to:H,value:"0",data:null!=e?e:"0x",operation:h.OperationType.DelegateCall};(0,S.NU)(t).then(j).catch(m)},[T,U,s,B,j,m,H]),(0,n.jsxs)(J.A,{...u,children:[(0,n.jsx)(f,{}),(0,n.jsx)(v.d,{title:"Interact with SignMessageLib",children:(0,n.jsx)(A.A,{address:H,shortAddress:!1,showCopyButton:!0,hasExplorer:!0})}),(0,E.nW)(O)&&(0,n.jsx)(k.tH,{fallback:(0,n.jsx)("div",{children:"Error parsing data"}),children:(0,n.jsx)(N.A,{safeMessage:O})}),g&&(0,n.jsx)(o.A,{pb:1,children:(0,n.jsx)(D.Y,{title:"Data:",hexData:g.data.data})}),(0,n.jsxs)(d.o5u,{my:1,children:[(0,n.jsx)("b",{children:"Signing method:"})," ",(0,n.jsx)("code",{children:t})]}),(0,n.jsxs)(d.o5u,{my:2,children:[(0,n.jsx)("b",{children:"Signing message:"})," ",q&&(0,n.jsx)(_.A,{text:q})]}),(0,n.jsx)(b.O,{message:O,isInModal:!0}),(0,n.jsxs)(o.A,{display:"flex",alignItems:"center",my:2,children:[(0,n.jsx)(d.Ahz,{component:c.A,inheritViewBox:!0,color:"warning"}),(0,n.jsx)(d.o5u,{ml:1,children:"Signing a message with your Safe Account requires a transaction on the blockchain"})]}),a]})};var U=t(85205),B=t(60082),H=t(11774);let L=e=>{var s,t;let{props:i}=e,{requestId:l}=i,o=(0,r.useCallback)(e=>(0,n.jsx)(T,{...i,...e}),[i]),d=(0,r.useCallback)(async e=>{if(!(null==e?void 0:e.txId))return;let s=(0,H.BN)(e.txId);s&&await (0,S.cq)({safeAppRequestId:l,safeTxHash:s,txId:e.txId})},[l]);return(0,n.jsx)(B.J,{subtitle:(0,n.jsx)(a.AppTitle,{name:null===(s=i.app)||void 0===s?void 0:s.name,logoUri:null===(t=i.app)||void 0===t?void 0:t.iconUrl}),eventCategory:U.TL.SIGN_MESSAGE_ON_CHAIN,ReviewTransactionComponent:o,onSubmit:d})}},93060:e=>{e.exports={container:"styles_container__upDro",arrow:"styles_arrow__i_HzR"}}}]);
//# sourceMappingURL=1783.95212adffcc695fe.js.map