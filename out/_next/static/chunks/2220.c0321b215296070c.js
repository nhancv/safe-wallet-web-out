(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2220],{266:(e,t,r)=>{let n=r(59405),i=r(95937),{ANY:s}=i,o=r(57334),a=r(34731),c=r(55746),l=r(7066),u=r(43841),h=r(708);e.exports=(e,t,r,d)=>{let p,f,g,v,m;switch(e=new n(e,d),t=new o(t,d),r){case">":p=c,f=u,g=l,v=">",m=">=";break;case"<":p=l,f=h,g=c,v="<",m="<=";break;default:throw TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,d))return!1;for(let r=0;r<t.set.length;++r){let n=t.set[r],o=null,a=null;if(n.forEach(e=>{e.semver===s&&(e=new i(">=0.0.0")),o=o||e,a=a||e,p(e.semver,o.semver,d)?o=e:g(e.semver,a.semver,d)&&(a=e)}),o.operator===v||o.operator===m||(!a.operator||a.operator===v)&&f(e,a.semver)||a.operator===m&&g(e,a.semver))return!1}return!0}},708:(e,t,r)=>{let n=r(74465);e.exports=(e,t,r)=>n(e,t,r)>=0},1156:(e,t,r)=>{let n=r(82529);e.exports=(e,t)=>{let r=n(e,t);return r?r.version:null}},1319:(e,t,r)=>{let n=r(74465);e.exports=(e,t,r)=>n(t,e,r)},2958:(e,t,r)=>{let n=r(59405);e.exports=(e,t,r,i,s)=>{"string"==typeof r&&(s=i,i=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,i,s).version}catch(e){return null}}},3305:(e,t,r)=>{!function(){var t={452:function(e){"use strict";e.exports=r(48041)}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={exports:{}},o=!0;try{t[e](s,s.exports,i),o=!1}finally{o&&delete n[e]}return s.exports}i.ab="//";var s={};!function(){var e,t=(e=i(452))&&"object"==typeof e&&"default"in e?e.default:e,r=/https?|ftp|gopher|file/;function n(e){"string"==typeof e&&(e=m(e));var n,i,s,o,a,c,l,u,h,d=(i=(n=e).auth,s=n.hostname,o=n.protocol||"",a=n.pathname||"",c=n.hash||"",l=n.query||"",u=!1,i=i?encodeURIComponent(i).replace(/%3A/i,":")+"@":"",n.host?u=i+n.host:s&&(u=i+(~s.indexOf(":")?"["+s+"]":s),n.port&&(u+=":"+n.port)),l&&"object"==typeof l&&(l=t.encode(l)),h=n.search||l&&"?"+l||"",o&&":"!==o.substr(-1)&&(o+=":"),n.slashes||(!o||r.test(o))&&!1!==u?(u="//"+(u||""),a&&"/"!==a[0]&&(a="/"+a)):u||(u=""),c&&"#"!==c[0]&&(c="#"+c),h&&"?"!==h[0]&&(h="?"+h),{protocol:o,host:u,pathname:a=a.replace(/[?#]/g,encodeURIComponent),search:h=h.replace("#","%23"),hash:c});return""+d.protocol+d.host+d.pathname+d.search+d.hash}var o="http://",a=o+"w.w",c=/^([a-z0-9.+-]*:\/\/\/)([a-z0-9.+-]:\/*)?/i,l=/https?|ftp|gopher|file/;function u(e,t){var r="string"==typeof e?m(e):e;e="object"==typeof e?n(e):e;var i=m(t),s="";r.protocol&&!r.slashes&&(s=r.protocol,e=e.replace(r.protocol,""),s+="/"===t[0]||"/"===e[0]?"/":""),s&&i.protocol&&(s="",i.slashes||(s=i.protocol,t=t.replace(i.protocol,"")));var u=e.match(c);u&&!i.protocol&&(e=e.substr((s=u[1]+(u[2]||"")).length),/^\/\/[^/]/.test(t)&&(s=s.slice(0,-1)));var h=new URL(e,a+"/"),d=new URL(t,h).toString().replace(a,""),p=i.protocol||r.protocol;return p+=r.slashes||i.slashes?"//":"",!s&&p?d=d.replace(o,p):s&&(d=d.replace(o,"")),l.test(d)||~t.indexOf(".")||"/"===e.slice(-1)||"/"===t.slice(-1)||"/"!==d.slice(-1)||(d=d.slice(0,-1)),s&&(d=s+("/"===d[0]?d.substr(1):d)),d}function h(){}h.prototype.parse=m,h.prototype.format=n,h.prototype.resolve=u,h.prototype.resolveObject=u;var d=/^https?|ftp|gopher|file/,p=/^(.*?)([#?].*)/,f=/^([a-z0-9.+-]*:)(\/{0,3})(.*)/i,g=/^([a-z0-9.+-]*:)?\/\/\/*/i,v=/^([a-z0-9.+-]*:)(\/{0,2})\[(.*)\]$/i;function m(e,r,i){if(void 0===r&&(r=!1),void 0===i&&(i=!1),e&&"object"==typeof e&&e instanceof h)return e;var s=(e=e.trim()).match(p);e=s?s[1].replace(/\\/g,"/")+s[2]:e.replace(/\\/g,"/"),v.test(e)&&"/"!==e.slice(-1)&&(e+="/");var o=!/(^javascript)/.test(e)&&e.match(f),c=g.test(e),l="";o&&(d.test(o[1])||(l=o[1].toLowerCase(),e=""+o[2]+o[3]),o[2]||(c=!1,d.test(o[1])?(l=o[1],e=""+o[3]):e="//"+o[3]),3!==o[2].length&&1!==o[2].length||(l=o[1],e="/"+o[3]));var u,m=(s?s[1]:e).match(/^https?:\/\/[^/]+(:[0-9]+)(?=\/|$)/),y=m&&m[1],_=new h,b="",S="";try{u=new URL(e)}catch(t){b=t,l||i||!/^\/\//.test(e)||/^\/\/.+[@.]/.test(e)||(S="/",e=e.substr(1));try{u=new URL(e,a)}catch(e){return _.protocol=l,_.href=l,_}}_.slashes=c&&!S,_.host="w.w"===u.host?"":u.host,_.hostname="w.w"===u.hostname?"":u.hostname.replace(/(\[|\])/g,""),_.protocol=b?l||null:u.protocol,_.search=u.search.replace(/\\/g,"%5C"),_.hash=u.hash.replace(/\\/g,"%5C");var E=e.split("#");!_.search&&~E[0].indexOf("?")&&(_.search="?"),_.hash||""!==E[1]||(_.hash="#"),_.query=r?t.decode(u.search.substr(1)):_.search.substr(1),_.pathname=S+(o?u.pathname.replace(/['^|`]/g,function(e){return"%"+e.charCodeAt().toString(16).toUpperCase()}).replace(/((?:%[0-9A-F]{2})+)/g,function(e,t){try{return decodeURIComponent(t).split("").map(function(e){var t=e.charCodeAt();return t>256||/^[a-z0-9]$/i.test(e)?e:"%"+t.toString(16).toUpperCase()}).join("")}catch(e){return t}}):u.pathname),"about:"===_.protocol&&"blank"===_.pathname&&(_.protocol="",_.pathname=""),b&&"/"!==e[0]&&(_.pathname=_.pathname.substr(1)),l&&!d.test(l)&&"/"!==e.slice(-1)&&"/"===_.pathname&&(_.pathname=""),_.path=_.pathname+_.search,_.auth=[u.username,u.password].map(decodeURIComponent).filter(Boolean).join(":"),_.port=u.port,y&&!_.host.endsWith(y)&&(_.host+=y,_.port=y.slice(1)),_.href=S?""+_.pathname+_.search+_.hash:n(_);var w=/^(file)/.test(_.href)?["host","hostname"]:[];return Object.keys(_).forEach(function(e){~w.indexOf(e)||(_[e]=_[e]||null)}),_}s.parse=m,s.format=n,s.resolve=u,s.resolveObject=function(e,t){return m(u(e,t))},s.Url=h}(),e.exports=s}()},3429:(e,t,r)=>{"use strict";function n(e){return e instanceof Date&&!isNaN(e)}r.d(t,{v:()=>n})},7066:(e,t,r)=>{let n=r(74465);e.exports=(e,t,r)=>0>n(e,t,r)},7871:(e,t,r)=>{let n=r(59405);e.exports=(e,t)=>new n(e,t).major},9180:(e,t,r)=>{var n;!function(e){!function(t){var n="object"==typeof globalThis?globalThis:"object"==typeof r.g?r.g:"object"==typeof self?self:"object"==typeof this?this:function(){try{return Function("return this;")()}catch(e){}}()||function(){try{return(0,eval)("(function() { return this; })()")}catch(e){}}(),i=s(e);function s(e,t){return function(r,n){Object.defineProperty(e,r,{configurable:!0,writable:!0,value:n}),t&&t(r,n)}}void 0!==n.Reflect&&(i=s(n.Reflect,i)),t(i,n),void 0===n.Reflect&&(n.Reflect=e)}(function(e,t){var r,n=Object.prototype.hasOwnProperty,i="function"==typeof Symbol,s=i&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=i&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",a="function"==typeof Object.create,c=({__proto__:[]})instanceof Array,l=!a&&!c,u={create:a?function(){return M(Object.create(null))}:c?function(){return M({__proto__:null})}:function(){return M({})},has:l?function(e,t){return n.call(e,t)}:function(e,t){return t in e},get:l?function(e,t){return n.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}},h=Object.getPrototypeOf(Function),d="function"==typeof Map&&"function"==typeof Map.prototype.entries?Map:function(){var e={},t=[],r=function(){function e(e,t,r){this._index=0,this._keys=e,this._values=t,this._selector=r}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var r=this._find(e,!0);return this._values[r]=t,this},t.prototype.delete=function(t){var r=this._find(t,!1);if(r>=0){for(var n=this._keys.length,i=r+1;i<n;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,I(t,this._cacheKey)&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new r(this._keys,this._values,n)},t.prototype.values=function(){return new r(this._keys,this._values,i)},t.prototype.entries=function(){return new r(this._keys,this._values,s)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){if(!I(this._cacheKey,e)){this._cacheIndex=-1;for(var r=0;r<this._keys.length;r++)if(I(this._keys[r],e)){this._cacheIndex=r;break}}return this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function n(e,t){return e}function i(e,t){return t}function s(e,t){return[e,t]}}(),p="function"==typeof Set&&"function"==typeof Set.prototype.entries?Set:function(){function e(){this._map=new d}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.keys()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}(),f="function"==typeof WeakMap?WeakMap:function(){var e=u.create(),t=r();return function(){function e(){this._key=r()}return e.prototype.has=function(e){var t=i(e,!1);return void 0!==t&&u.has(t,this._key)},e.prototype.get=function(e){var t=i(e,!1);return void 0!==t?u.get(t,this._key):void 0},e.prototype.set=function(e,t){return i(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=i(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=r()},e}();function r(){var t;do t="@@WeakMap@@"+function(){var e=function(e){if("function"==typeof Uint8Array){var t=new Uint8Array(16);return"undefined"!=typeof crypto?crypto.getRandomValues(t):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(t):s(t,16),t}return s(Array(e),e)}(16);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var t="",r=0;r<16;++r){var n=e[r];(4===r||6===r||8===r)&&(t+="-"),n<16&&(t+="0"),t+=n.toString(16).toLowerCase()}return t}();while(u.has(e,t));return e[t]=!0,t}function i(e,r){if(!n.call(e,t)){if(!r)return;Object.defineProperty(e,t,{value:u.create()})}return e[t]}function s(e,t){for(var r=0;r<t;++r)e[r]=255*Math.random()|0;return e}}(),g=i?Symbol.for("@reflect-metadata:registry"):void 0,v=(!w(g)&&D(t.Reflect)&&Object.isExtensible(t.Reflect)&&(r=t.Reflect[g]),w(r)&&(r=function(){w(g)||void 0===t.Reflect||g in t.Reflect||"function"!=typeof t.Reflect.defineMetadata||(r=(e=t.Reflect).defineMetadata,n=e.hasOwnMetadata,i=e.getOwnMetadata,s=e.getOwnMetadataKeys,o=e.deleteMetadata,a=new f,c={isProviderFor:function(e,t){var r=a.get(e);return!!(!w(r)&&r.has(t))||!!s(e,t).length&&(w(r)&&(r=new p,a.set(e,r)),r.add(t),!0)},OrdinaryDefineOwnMetadata:r,OrdinaryHasOwnMetadata:n,OrdinaryGetOwnMetadata:i,OrdinaryOwnMetadataKeys:s,OrdinaryDeleteMetadata:o});var e,r,n,i,s,o,a,c,l,u,h,v=new f,m={registerProvider:function(e){if(!Object.isExtensible(m))throw Error("Cannot add provider to a frozen registry.");switch(!0){case c===e:break;case w(l):l=e;break;case l===e:break;case w(u):u=e;break;case u===e:break;default:void 0===h&&(h=new p),h.add(e)}},getProvider:y,setProvider:function(e,t,r){if(!function(e){if(w(e))throw TypeError();return l===e||u===e||!w(h)&&h.has(e)}(r))throw Error("Metadata provider not registered.");var n=y(e,t);if(n!==r){if(!w(n))return!1;var i=v.get(e);w(i)&&(i=new d,v.set(e,i)),i.set(t,r)}return!0}};return m;function y(e,t){var r,n=v.get(e);return w(n)||(r=n.get(t)),w(r)&&(r=function(e,t){if(!w(l)){if(l.isProviderFor(e,t))return l;if(!w(u)){if(u.isProviderFor(e,t))return l;if(!w(h))for(var r=N(h);;){var n=k(r);if(!n)return;var i=n.value;if(i.isProviderFor(e,t))return U(r),i}}}if(!w(c)&&c.isProviderFor(e,t))return c}(e,t),w(r)||(w(n)&&(n=new d,v.set(e,n)),n.set(t,r))),r}}()),!w(g)&&D(t.Reflect)&&Object.isExtensible(t.Reflect)&&Object.defineProperty(t.Reflect,g,{enumerable:!1,configurable:!1,writable:!1,value:r}),r),m=function(e){var t=new f,r={isProviderFor:function(e,r){var n=t.get(e);return!w(n)&&n.has(r)},OrdinaryDefineOwnMetadata:function(e,t,r,i){n(r,i,!0).set(e,t)},OrdinaryHasOwnMetadata:function(e,t,r){var i=n(t,r,!1);return!w(i)&&!!i.has(e)},OrdinaryGetOwnMetadata:function(e,t,r){var i=n(t,r,!1);if(!w(i))return i.get(e)},OrdinaryOwnMetadataKeys:function(e,t){var r=[],i=n(e,t,!1);if(w(i))return r;for(var s=N(i.keys()),o=0;;){var a=k(s);if(!a)return r.length=o,r;var c=a.value;try{r[o]=c}catch(e){try{U(s)}finally{throw e}}o++}},OrdinaryDeleteMetadata:function(e,r,i){var s=n(r,i,!1);if(w(s)||!s.delete(e))return!1;if(0===s.size){var o=t.get(r);w(o)||(o.delete(i),0===o.size&&t.delete(o))}return!0}};return v.registerProvider(r),r;function n(n,i,s){var o=t.get(n),a=!1;if(w(o)){if(!s)return;o=new d,t.set(n,o),a=!0}var c=o.get(i);if(w(c)){if(!s)return;if(c=new d,o.set(i,c),!e.setProvider(n,i,r))throw o.delete(i),a&&t.delete(n),Error("Wrong provider for target.")}return c}}(v);function y(e,t,r){var n=P(t,r,!1);return!w(n)&&!!n.OrdinaryHasOwnMetadata(e,t,r)}function _(e,t,r){var n=P(t,r,!1);if(!w(n))return n.OrdinaryGetOwnMetadata(e,t,r)}function b(e,t,r,n){P(r,n,!0).OrdinaryDefineOwnMetadata(e,t,r,n)}function S(e,t){var r=P(e,t,!1);return r?r.OrdinaryOwnMetadataKeys(e,t):[]}function E(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function w(e){return void 0===e}function A(e){return null===e}function D(e){return"object"==typeof e?null!==e:"function"==typeof e}e("decorate",function(e,t,r,n){if(w(r)){if(!T(e)||!O(t))throw TypeError();return function(e,t){for(var r=e.length-1;r>=0;--r){var n=(0,e[r])(t);if(!w(n)&&!A(n)){if(!O(n))throw TypeError();t=n}}return t}(e,t)}if(!T(e)||!D(t)||!D(n)&&!w(n)&&!A(n))throw TypeError();return A(n)&&(n=void 0),function(e,t,r,n){for(var i=e.length-1;i>=0;--i){var s=(0,e[i])(t,r,n);if(!w(s)&&!A(s)){if(!D(s))throw TypeError();n=s}}return n}(e,t,r=x(r),n)}),e("metadata",function(e,t){return function(r,n){if(!D(r)||!w(n)&&!function(e){switch(E(e)){case 3:case 4:return!0;default:return!1}}(n))throw TypeError();b(e,t,r,n)}}),e("defineMetadata",function(e,t,r,n){if(!D(r))throw TypeError();return w(n)||(n=x(n)),b(e,t,r,n)}),e("hasMetadata",function(e,t,r){if(!D(t))throw TypeError();return w(r)||(r=x(r)),function e(t,r,n){if(y(t,r,n))return!0;var i=L(r);return!A(i)&&e(t,i,n)}(e,t,r)}),e("hasOwnMetadata",function(e,t,r){if(!D(t))throw TypeError();return w(r)||(r=x(r)),y(e,t,r)}),e("getMetadata",function(e,t,r){if(!D(t))throw TypeError();return w(r)||(r=x(r)),function e(t,r,n){if(y(t,r,n))return _(t,r,n);var i=L(r);if(!A(i))return e(t,i,n)}(e,t,r)}),e("getOwnMetadata",function(e,t,r){if(!D(t))throw TypeError();return w(r)||(r=x(r)),_(e,t,r)}),e("getMetadataKeys",function(e,t){if(!D(e))throw TypeError();return w(t)||(t=x(t)),function e(t,r){var n=S(t,r),i=L(t);if(null===i)return n;var s=e(i,r);if(s.length<=0)return n;if(n.length<=0)return s;for(var o=new p,a=[],c=0;c<n.length;c++){var l=n[c],u=o.has(l);u||(o.add(l),a.push(l))}for(var h=0;h<s.length;h++){var l=s[h],u=o.has(l);u||(o.add(l),a.push(l))}return a}(e,t)}),e("getOwnMetadataKeys",function(e,t){if(!D(e))throw TypeError();return w(t)||(t=x(t)),S(e,t)}),e("deleteMetadata",function(e,t,r){if(!D(t)||(w(r)||(r=x(r)),!D(t)))throw TypeError();w(r)||(r=x(r));var n=P(t,r,!1);return!w(n)&&n.OrdinaryDeleteMetadata(e,t,r)});function x(e){var t=function(e,t){switch(E(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var r="string",n=R(e,s);if(void 0!==n){var i=n.call(e,r);if(D(i))throw TypeError();return i}return function(e,t){if("string"===t){var r=e.toString;if(C(r)){var n=r.call(e);if(!D(n))return n}var i=e.valueOf;if(C(i)){var n=i.call(e);if(!D(n))return n}}else{var i=e.valueOf;if(C(i)){var n=i.call(e);if(!D(n))return n}var s=e.toString;if(C(s)){var n=s.call(e);if(!D(n))return n}}throw TypeError()}(e,r)}(e,0);return"symbol"==typeof t?t:""+t}function T(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function C(e){return"function"==typeof e}function O(e){return"function"==typeof e}function I(e,t){return e===t||e!=e&&t!=t}function R(e,t){var r=e[t];if(null!=r){if(!C(r))throw TypeError();return r}}function N(e){var t=R(e,o);if(!C(t))throw TypeError();var r=t.call(e);if(!D(r))throw TypeError();return r}function k(e){var t=e.next();return!t.done&&t}function U(e){var t=e.return;t&&t.call(e)}function L(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===h||t!==h)return t;var r=e.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return t;var i=n.constructor;return"function"!=typeof i||i===e?t:i}function P(e,t,r){var n=v.getProvider(e,t);if(!w(n))return n;if(r){if(v.setProvider(e,t,m))return m;throw Error("Illegal state.")}}function M(e){return e.__=void 0,delete e.__,e}})}(n||(n={}))},9320:(e,t,r)=>{let n=r(34731),i=r(74465);e.exports=(e,t,r)=>{let s=[],o=null,a=null,c=e.sort((e,t)=>i(e,t,r));for(let e of c)n(e,t,r)?(a=e,o||(o=e)):(a&&s.push([o,a]),a=null,o=null);o&&s.push([o,null]);let l=[];for(let[e,t]of s)e===t?l.push(e):t||e!==c[0]?t?e===c[0]?l.push(`<=${t}`):l.push(`${e} - ${t}`):l.push(`>=${e}`):l.push("*");let u=l.join(" || "),h="string"==typeof t.raw?t.raw:String(t);return u.length<h.length?u:t}},9640:(e,t,r)=>{let n=r(59405),i=r(57334);e.exports=(e,t,r)=>{let s=null,o=null,a=null;try{a=new i(t,r)}catch(e){return null}return e.forEach(e=>{a.test(e)&&(!s||1===o.compare(e))&&(o=new n(s=e,r))}),s}},13377:(e,t,r)=>{"use strict";r.d(t,{u:()=>c});var n=r(13829),i=r(43414),s=r(90061),o=r(71065),a=r(32224);function c(e){void 0===e&&(e={});var t=e.connector,r=void 0===t?function(){return new s.B}:t,n=e.resetOnError,c=void 0===n||n,u=e.resetOnComplete,h=void 0===u||u,d=e.resetOnRefCountZero,p=void 0===d||d;return function(e){var t,n,s,u=0,d=!1,f=!1,g=function(){null==n||n.unsubscribe(),n=void 0},v=function(){g(),t=s=void 0,d=f=!1},m=function(){var e=t;v(),null==e||e.unsubscribe()};return(0,a.N)(function(e,a){u++,f||d||g();var y=s=null!=s?s:r();a.add(function(){0!=--u||f||d||(n=l(m,p))}),y.subscribe(a),!t&&u>0&&(t=new o.Ms({next:function(e){return y.next(e)},error:function(e){f=!0,g(),n=l(v,c,e),y.error(e)},complete:function(){d=!0,g(),n=l(v,h),y.complete()}}),(0,i.Tg)(e).subscribe(t))})(e)}}function l(e,t){for(var r=[],s=2;s<arguments.length;s++)r[s-2]=arguments[s];if(!0===t){e();return}if(!1!==t){var a=new o.Ms({next:function(){a.unsubscribe(),e()}});return(0,i.Tg)(t.apply(void 0,(0,n.fX)([],(0,n.zs)(r)))).subscribe(a)}}},13563:(e,t,r)=>{let n=r(266);e.exports=(e,t,r)=>n(e,t,"<",r)},14566:(e,t,r)=>{let n=r(57334);e.exports=(e,t)=>new n(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "))},15723:(e,t,r)=>{"use strict";var n,i,s,o;r.d(t,{mc:()=>eK,i0:()=>eQ,WQ:()=>e1,_G:()=>eZ,tt:()=>e2}),r(9180);let a=Symbol.for("@inversifyjs/common/islazyServiceIdentifier");class c{[a];#e;constructor(e){this.#e=e,this[a]=!0}static is(e){return"object"==typeof e&&null!==e&&!0===e[a]}unwrap(){return this.#e()}}function l(e,t){return Reflect.getMetadata(t,e)}function u(e,t,r,n){let i=n(l(e,t)??r);Reflect.defineMetadata(t,i,e)}let h="named",d="name",p="unmanaged",f="optional",g="inject",v="multi_inject",m="post_construct",y="pre_destroy",_=[g,v,d,p,h,f],b=Symbol.for("@inversifyjs/core/InversifyCoreError");class S extends Error{[b];kind;constructor(e,t,r){super(t,r),this[b]=!0,this.kind=e}static is(e){return"object"==typeof e&&null!==e&&!0===e[b]}static isErrorOfKind(e,t){return S.is(e)&&e.kind===t}}function E(e,t){let r=[];for(let e=0;e<t.length;++e)void 0===t[e]&&r.push(e);if(r.length>0)throw new S(n.missingInjectionDecorator,`Found unexpected missing metadata on type "${e.name}" at constructor indexes "${r.join('", "')}".

Are you using @inject, @multiInject or @unmanaged decorators at those indexes?

If you're using typescript and want to rely on auto injection, set "emitDecoratorMetadata" compiler option to true`)}function w(e){return{kind:i.singleInjection,name:void 0,optional:!1,tags:new Map,targetName:void 0,value:e}}function A(e){let t=e.find(e=>e.key===g),r=e.find(e=>e.key===v);if(void 0!==e.find(e=>e.key===p))return function(e,t){if(void 0!==t||void 0!==e)throw new S(n.missingInjectionDecorator,"Expected a single @inject, @multiInject or @unmanaged metadata");return{kind:i.unmanaged}}(t,r);if(void 0===r&&void 0===t)throw new S(n.missingInjectionDecorator,"Expected @inject, @multiInject or @unmanaged metadata");let s=e.find(e=>e.key===h),o=e.find(e=>e.key===f),a=e.find(e=>e.key===d);return{kind:void 0===t?i.multipleInjection:i.singleInjection,name:s?.value,optional:void 0!==o,tags:new Map(e.filter(e=>_.every(t=>e.key!==t)).map(e=>[e.key,e.value])),targetName:a?.value,value:void 0===t?r?.value:t.value}}function D(e,t,r){try{return A(r)}catch(r){throw S.isErrorOfKind(r,n.missingInjectionDecorator)?new S(n.missingInjectionDecorator,`Expected a single @inject, @multiInject or @unmanaged decorator at type "${e.name}" at constructor arguments at index "${t.toString()}"`,{cause:r}):r}}function x(e,t,r){try{return A(r)}catch(r){throw S.isErrorOfKind(r,n.missingInjectionDecorator)?new S(n.missingInjectionDecorator,`Expected a single @inject, @multiInject or @unmanaged decorator at type "${e.name}" at property "${t.toString()}"`,{cause:r}):r}}function T(e){let t=l(e,"inversify:tagged_props"),r=new Map;if(void 0!==t)for(let n of Reflect.ownKeys(t)){let i=t[n];r.set(n,x(e,n,i))}return r}function C(e){let t=l(e,m),r=l(e,y);return{constructorArguments:function(e){let t=l(e,"design:paramtypes"),r=l(e,"inversify:tagged"),n=[];if(void 0!==r)for(let[t,i]of Object.entries(r)){let r=parseInt(t);n[r]=D(e,r,i)}if(void 0!==t){for(let e=0;e<t.length;++e)if(void 0===n[e]){let r=t[e];n[e]=w(r)}}return E(e,n),n}(e),lifecycle:{postConstructMethodName:t?.value,preDestroyMethodName:r?.value},properties:T(e)}}function O(e,t){let r=t.getPropertiesMetadata(e),n=new Map;for(let t of Reflect.ownKeys(r)){let i=r[t];n.set(t,x(e,t,i))}return n}function I(e){let t=Object.getPrototypeOf(e.prototype);return t?.constructor}!function(e){e[e.injectionDecoratorConflict=0]="injectionDecoratorConflict",e[e.missingInjectionDecorator=1]="missingInjectionDecorator",e[e.planning=2]="planning",e[e.unknown=3]="unknown"}(n||(n={})),function(e){e[e.multipleInjection=0]="multipleInjection",e[e.singleInjection=1]="singleInjection",e[e.unmanaged=2]="unmanaged"}(i||(i={}));class R{#t;constructor(e){this.#t=e}startsWith(e){return this.#t.startsWith(e)}endsWith(e){return this.#t.endsWith(e)}contains(e){return this.#t.includes(e)}equals(e){return this.#t===e}value(){return this.#t}}let N="@inversifyjs/core/targetId";class k{#e;#r;#n;#i;#s;#o;constructor(e,t,r){this.#r=function(){let e=l(Object,N)??0;return e===Number.MAX_SAFE_INTEGER?u(Object,N,e,()=>Number.MIN_SAFE_INTEGER):u(Object,N,e,e=>e+1),e}(),this.#n=e,this.#i=void 0,this.#e=t,this.#s=new R("string"==typeof e?e:e.toString().slice(7,-1)),this.#o=r}get id(){return this.#r}get identifier(){return this.#n}get metadata(){var e;return void 0===this.#i&&(this.#i=(e=this.#e).kind===i.unmanaged?[{key:p,value:!0}]:function(e){let t=[function(e){let t;switch(e.kind){case i.multipleInjection:t={key:v,value:e.value};break;case i.singleInjection:t={key:g,value:e.value}}return t}(e)];for(let[r,n]of(void 0!==e.name&&t.push({key:h,value:e.name}),e.optional&&t.push({key:f,value:!0}),e.tags))t.push({key:r,value:n});return void 0!==e.targetName&&t.push({key:d,value:e.targetName}),t}(e)),this.#i}get name(){return this.#s}get type(){return this.#o}get serviceIdentifier(){return c.is(this.#e.value)?this.#e.value.unwrap():this.#e.value}getCustomTags(){return[...this.#e.tags.entries()].map(([e,t])=>({key:e,value:t}))}getNamedTag(){return void 0===this.#e.name?null:{key:h,value:this.#e.name}}hasTag(e){return this.metadata.some(t=>t.key===e)}isArray(){return this.#e.kind===i.multipleInjection}isNamed(){return void 0!==this.#e.name}isOptional(){return this.#e.optional}isTagged(){return this.#e.tags.size>0}matchesArray(e){return this.isArray()&&this.#e.value===e}matchesNamedTag(e){return this.#e.name===e}matchesTag(e){return t=>this.metadata.some(r=>r.key===e&&r.value===t)}}let U=e=>{var t,r;return t=void 0===e?C:t=>(function(e,t){let r=l(e,m),n=l(e,y);return{constructorArguments:function(e,t){let r=t.getConstructorMetadata(e),n=[];for(let[t,i]of Object.entries(r.userGeneratedMetadata)){let r=parseInt(t);n[r]=D(e,r,i)}if(void 0!==r.compilerGeneratedMetadata){for(let e=0;e<r.compilerGeneratedMetadata.length;++e)if(void 0===n[e]){let t=r.compilerGeneratedMetadata[e];n[e]=w(t)}}return E(e,n),n}(e,t),lifecycle:{postConstructMethodName:r?.value,preDestroyMethodName:n?.value},properties:O(e,t)}})(t,e),r=void 0===e?T:t=>O(t,e),function(e){let n=t(e),s=I(e);for(;void 0!==s&&s!==Object;){for(let[e,t]of r(s))n.properties.has(e)||n.properties.set(e,t);s=I(s)}let o=[];for(let e of n.constructorArguments)if(e.kind!==i.unmanaged){let t=e.targetName??"";o.push(new k(t,e,"ConstructorArgument"))}for(let[e,t]of n.properties)if(t.kind!==i.unmanaged){let r=t.targetName??e;o.push(new k(r,t,"ClassProperty"))}return o}},L="named",P="name",M="unmanaged",j="optional",$="inject",F="multi_inject",B="inversify:tagged",V="inversify:tagged_props",G="inversify:paramtypes",W="design:paramtypes",q="post_construct",z="pre_destroy",H=[$,F,P,M,L,j];Object.freeze({__proto__:null,DESIGN_PARAM_TYPES:W,INJECT_TAG:$,MULTI_INJECT_TAG:F,NAMED_TAG:L,NAME_TAG:P,NON_CUSTOM_TAG_KEYS:H,OPTIONAL_TAG:j,PARAM_TYPES:G,POST_CONSTRUCT:q,PRE_DESTROY:z,TAGGED:B,TAGGED_PROP:V,UNMANAGED_TAG:M});let X={Request:"Request",Singleton:"Singleton",Transient:"Transient"},J={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},K={ConstructorArgument:"ConstructorArgument",Variable:"Variable"},Q=0;class Y{id;moduleId;activated;serviceIdentifier;implementationType;cache;dynamicValue;scope;type;factory;provider;constraint;onActivation;onDeactivation;constructor(e,t){this.id=Q++,this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=J.Invalid,this.constraint=e=>!0,this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}clone(){let e=new Y(this.serviceIdentifier,this.scope);return e.activated=e.scope===X.Singleton&&this.activated,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.onDeactivation=this.onDeactivation,e.cache=this.cache,e}}let Z="Metadata key was used more than once in a parameter:",ee="NULL argument",et="Key Not Found",er="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",en=(e,t)=>`onDeactivation() error in class ${e}: ${t}`;class ei{getConstructorMetadata(e){return{compilerGeneratedMetadata:Reflect.getMetadata(W,e)??[],userGeneratedMetadata:Reflect.getMetadata(B,e)??{}}}getPropertiesMetadata(e){return Reflect.getMetadata(V,e)??{}}}function es(e){return e instanceof RangeError||"Maximum call stack size exceeded"===e.message}function eo(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function ea(e,t,r){let n="",i=r(e,t);return 0!==i.length&&(n="\nRegistered bindings:",i.forEach(e=>{let t="Object";null!==e.implementationType&&(t=ec(e.implementationType)),n=`${n}
 ${t}`,e.constraint.metaData&&(n=`${n} - ${e.constraint.metaData}`)})),n}function ec(e){if(null!=e.name&&""!==e.name)return e.name;{let t=e.toString(),r=t.match(/^function\s*([^\s(]+)/);return null===r?`Anonymous function: ${t}`:r[1]}}function el(e){return`{"key":"${e.key.toString()}","value":"${e.value.toString()}"}`}!function(e){e[e.MultipleBindingsAvailable=2]="MultipleBindingsAvailable",e[e.NoBindingsAvailable=0]="NoBindingsAvailable",e[e.OnlyOneBindingAvailable=1]="OnlyOneBindingAvailable"}(s||(s={}));class eu{id;container;plan;currentRequest;constructor(e){this.id=Q++,this.container=e}addPlan(e){this.plan=e}setCurrentRequest(e){this.currentRequest=e}}class eh{key;value;constructor(e,t){this.key=e,this.value=t}toString(){return this.key===L?`named: ${String(this.value).toString()} `:`tagged: { key:${this.key.toString()}, value: ${String(this.value)} }`}}class ed{parentContext;rootRequest;constructor(e,t){this.parentContext=e,this.rootRequest=t}}class ep{id;serviceIdentifier;parentContext;parentRequest;bindings;childRequests;target;requestScope;constructor(e,t,r,n,i){this.id=Q++,this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=r,this.target=i,this.childRequests=[],this.bindings=Array.isArray(n)?n:[n],this.requestScope=null===r?new Map:null}addChildRequest(e,t,r){let n=new ep(e,this.parentContext,this,t,r);return this.childRequests.push(n),n}}function ef(e){return e._bindingDictionary}function eg(e,t,r,n,i){let o=em(r.container,i.serviceIdentifier),a=[];return o.length===s.NoBindingsAvailable&&!0===r.container.options.autoBindInjectable&&"function"==typeof i.serviceIdentifier&&e.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(r.container.bind(i.serviceIdentifier).toSelf(),o=em(r.container,i.serviceIdentifier)),a=t?o:o.filter(e=>{let t=new ep(e.serviceIdentifier,r,n,e,i);return e.constraint(t)}),function(e,t,r,n,i){switch(t.length){case s.NoBindingsAvailable:if(n.isOptional())return;{let t=eo(e),s="No matching bindings found for serviceIdentifier:";throw s+=function(e,t){if(t.isTagged()||t.isNamed()){let r="",n=t.getNamedTag(),i=t.getCustomTags();return null!==n&&(r+=el(n)+"\n"),null!==i&&i.forEach(e=>{r+=el(e)+"\n"}),` ${e}
 ${e} - ${r}`}return` ${e}`}(t,n),s+=ea(i,t,em),null!==r&&(s+=`
Trying to resolve bindings for "${eo(r.serviceIdentifier)}"`),Error(s)}case s.OnlyOneBindingAvailable:return;case s.MultipleBindingsAvailable:default:if(n.isArray())return;{let t=eo(e),r=`Ambiguous match found for serviceIdentifier: ${t}`;throw Error(r+=ea(i,t,em))}}}(i.serviceIdentifier,a,n,i,r.container),a}function ev(e,t){let r=[new eh(t.isMultiInject?F:$,e)];return void 0!==t.customTag&&r.push(new eh(t.customTag.key,t.customTag.value)),!0===t.isOptional&&r.push(new eh(j,!0)),r}function em(e,t){let r=[],n=ef(e);return n.hasKey(t)?r=n.get(t):null!==e.parent&&(r=em(e.parent,t)),r}function ey(e){return("object"==typeof e&&null!==e||"function"==typeof e)&&"function"==typeof e.then}function e_(e){return!!ey(e)||Array.isArray(e)&&e.some(ey)}let eb=(e,t,r)=>{e.has(t.id)||e.set(t.id,r)},eS=(e,t)=>{e.cache=t,e.activated=!0,ey(t)&&eE(e,t)},eE=async(e,t)=>{try{e.cache=await t}catch(t){throw e.cache=null,e.activated=!1,t}};function ew(e){let t=new e.constr(...e.constructorInjections);return e.propertyRequests.forEach((r,n)=>{let i=r.target.identifier,s=e.propertyInjections[n];r.target.isOptional()&&void 0===s||(t[i]=s)}),t}async function eA(e){let t=[];for(let r of e)Array.isArray(r)?t.push(Promise.all(r)):t.push(r);return Promise.all(t)}function eD(e,t){let r=function(e,t){var r,n;if(Reflect.hasMetadata(q,e)){let i=Reflect.getMetadata(q,e);try{return t[i.value]?.()}catch(t){if(t instanceof Error)throw Error((r=e.name,n=t.message,`@postConstruct error in class ${r}: ${n}`))}}}(e,t);return ey(r)?r.then(()=>t):t}!function(e){e.DynamicValue="toDynamicValue",e.Factory="toFactory",e.Provider="toProvider"}(o||(o={}));let ex=e=>t=>{t.parentContext.setCurrentRequest(t);let r=t.bindings,n=t.childRequests,i=t.target&&t.target.isArray(),s=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));return i&&s?n.map(t=>ex(e)(t)):t.target.isOptional()&&0===r.length?void 0:eI(e,t,r[0])},eT=(e,t)=>{let r=(e=>{switch(e.type){case J.Factory:return{factory:e.factory,factoryType:o.Factory};case J.Provider:return{factory:e.provider,factoryType:o.Provider};case J.DynamicValue:return{factory:e.dynamicValue,factoryType:o.DynamicValue};default:throw Error(`Unexpected factory type ${e.type}`)}})(e);return((e,t)=>{try{return e()}catch(e){if(es(e))throw t();throw e}})(()=>r.factory.bind(e)(t),()=>{var e,n;return Error((e=r.factoryType,n=t.currentRequest.serviceIdentifier.toString(),`It looks like there is a circular dependency in one of the '${e}' bindings. Please investigate bindings with service identifier '${n}'.`))})},eC=(e,t,r)=>{let n;let i=t.childRequests;switch((e=>{let t=null;switch(e.type){case J.ConstantValue:case J.Function:t=e.cache;break;case J.Constructor:case J.Instance:t=e.implementationType;break;case J.DynamicValue:t=e.dynamicValue;break;case J.Provider:t=e.provider;break;case J.Factory:t=e.factory}if(null===t){let t=eo(e.serviceIdentifier);throw Error(`Invalid binding type: ${t}`)}})(r),r.type){case J.ConstantValue:case J.Function:n=r.cache;break;case J.Constructor:n=r.implementationType;break;case J.Instance:n=function(e,t,r,n){e.scope!==X.Singleton&&function(e,t){let r=`Class cannot be instantiated in ${e.scope===X.Request?"request":"transient"} scope.`;if("function"==typeof e.onDeactivation)throw Error(en(t.name,r));if(Reflect.hasMetadata(z,t))throw Error(`@preDestroy error in class ${t.name}: ${r}`)}(e,t);let i=function(e,t,r){let n;if(t.length>0){let i=t.reduce((e,t)=>{let n=r(t);return t.target.type===K.ConstructorArgument?e.constructorInjections.push(n):(e.propertyRequests.push(t),e.propertyInjections.push(n)),e.isAsync||(e.isAsync=e_(n)),e},{constructorInjections:[],isAsync:!1,propertyInjections:[],propertyRequests:[]}),s={...i,constr:e};n=i.isAsync?async function(e){let t=await eA(e.constructorInjections),r=await eA(e.propertyInjections);return ew({...e,constructorInjections:t,propertyInjections:r})}(s):ew(s)}else n=new e;return n}(t,r,n);return ey(i)?i.then(e=>eD(t,e)):eD(t,i)}(r,r.implementationType,i,ex(e));break;default:n=eT(r,t.parentContext)}return n},eO=(e,t,r)=>{let n=((e,t)=>t.scope===X.Singleton&&t.activated?t.cache:t.scope===X.Request&&e.has(t.id)?e.get(t.id):null)(e,t);return null!==n||((e,t,r)=>{t.scope===X.Singleton&&eS(t,r),t.scope===X.Request&&eb(e,t,r)})(e,t,n=r()),n},eI=(e,t,r)=>eO(e,r,()=>{let n=eC(e,t,r);return ey(n)?n.then(e=>eR(t,r,e)):eR(t,r,n)});function eR(e,t,r){let n=eN(e.parentContext,t,r),i=eP(e.parentContext.container),s,o=i.next();do{s=o.value;let t=e.parentContext,r=eL(s,e.serviceIdentifier);n=ey(n)?eU(r,t,n):ek(r,t,n),o=i.next()}while(!0!==o.done&&!ef(s).hasKey(e.serviceIdentifier));return n}let eN=(e,t,r)=>"function"==typeof t.onActivation?t.onActivation(e,r):r,ek=(e,t,r)=>{let n=e.next();for(;!0!==n.done;){if(ey(r=n.value(t,r)))return eU(e,t,r);n=e.next()}return r},eU=async(e,t,r)=>{let n=await r,i=e.next();for(;!0!==i.done;)n=await i.value(t,n),i=e.next();return n},eL=(e,t)=>{let r=e._activations;return r.hasKey(t)?r.get(t).values():[].values()},eP=e=>{let t=[e],r=e.parent;for(;null!==r;)t.push(r),r=r.parent;return{next:()=>{let e=t.pop();return void 0!==e?{done:!1,value:e}:{done:!0,value:void 0}}}},eM=(e,t)=>{let r=e.parentRequest;return null!==r&&(!!t(r)||eM(r,t))},ej=e=>t=>{let r=r=>null!==r&&null!==r.target&&r.target.matchesTag(e)(t);return r.metaData=new eh(e,t),r},e$=ej(L),eF=e=>t=>{let r=null;return null!==t&&((r=t.bindings[0],"string"==typeof e)?r.serviceIdentifier===e:e===t.bindings[0].implementationType)};class eB{_binding;constructor(e){this._binding=e}when(e){return this._binding.constraint=e,new eV(this._binding)}whenTargetNamed(e){return this._binding.constraint=e$(e),new eV(this._binding)}whenTargetIsDefault(){return this._binding.constraint=e=>null!==e&&null!==e.target&&!e.target.isNamed()&&!e.target.isTagged(),new eV(this._binding)}whenTargetTagged(e,t){return this._binding.constraint=ej(e)(t),new eV(this._binding)}whenInjectedInto(e){return this._binding.constraint=t=>null!==t&&eF(e)(t.parentRequest),new eV(this._binding)}whenParentNamed(e){return this._binding.constraint=t=>null!==t&&e$(e)(t.parentRequest),new eV(this._binding)}whenParentTagged(e,t){return this._binding.constraint=r=>null!==r&&ej(e)(t)(r.parentRequest),new eV(this._binding)}whenAnyAncestorIs(e){return this._binding.constraint=t=>null!==t&&eM(t,eF(e)),new eV(this._binding)}whenNoAncestorIs(e){return this._binding.constraint=t=>null!==t&&!eM(t,eF(e)),new eV(this._binding)}whenAnyAncestorNamed(e){return this._binding.constraint=t=>null!==t&&eM(t,e$(e)),new eV(this._binding)}whenNoAncestorNamed(e){return this._binding.constraint=t=>null!==t&&!eM(t,e$(e)),new eV(this._binding)}whenAnyAncestorTagged(e,t){return this._binding.constraint=r=>null!==r&&eM(r,ej(e)(t)),new eV(this._binding)}whenNoAncestorTagged(e,t){return this._binding.constraint=r=>null!==r&&!eM(r,ej(e)(t)),new eV(this._binding)}whenAnyAncestorMatches(e){return this._binding.constraint=t=>null!==t&&eM(t,e),new eV(this._binding)}whenNoAncestorMatches(e){return this._binding.constraint=t=>null!==t&&!eM(t,e),new eV(this._binding)}}class eV{_binding;constructor(e){this._binding=e}onActivation(e){return this._binding.onActivation=e,new eB(this._binding)}onDeactivation(e){return this._binding.onDeactivation=e,new eB(this._binding)}}class eG{_bindingWhenSyntax;_bindingOnSyntax;_binding;constructor(e){this._binding=e,this._bindingWhenSyntax=new eB(this._binding),this._bindingOnSyntax=new eV(this._binding)}when(e){return this._bindingWhenSyntax.when(e)}whenTargetNamed(e){return this._bindingWhenSyntax.whenTargetNamed(e)}whenTargetIsDefault(){return this._bindingWhenSyntax.whenTargetIsDefault()}whenTargetTagged(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)}whenInjectedInto(e){return this._bindingWhenSyntax.whenInjectedInto(e)}whenParentNamed(e){return this._bindingWhenSyntax.whenParentNamed(e)}whenParentTagged(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)}whenAnyAncestorIs(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)}whenNoAncestorIs(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)}whenAnyAncestorNamed(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)}whenAnyAncestorTagged(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)}whenNoAncestorNamed(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)}whenNoAncestorTagged(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)}whenAnyAncestorMatches(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)}whenNoAncestorMatches(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)}onActivation(e){return this._bindingOnSyntax.onActivation(e)}onDeactivation(e){return this._bindingOnSyntax.onDeactivation(e)}}class eW{_binding;constructor(e){this._binding=e}inRequestScope(){return this._binding.scope=X.Request,new eG(this._binding)}inSingletonScope(){return this._binding.scope=X.Singleton,new eG(this._binding)}inTransientScope(){return this._binding.scope=X.Transient,new eG(this._binding)}}class eq{_bindingInSyntax;_bindingWhenSyntax;_bindingOnSyntax;_binding;constructor(e){this._binding=e,this._bindingWhenSyntax=new eB(this._binding),this._bindingOnSyntax=new eV(this._binding),this._bindingInSyntax=new eW(e)}inRequestScope(){return this._bindingInSyntax.inRequestScope()}inSingletonScope(){return this._bindingInSyntax.inSingletonScope()}inTransientScope(){return this._bindingInSyntax.inTransientScope()}when(e){return this._bindingWhenSyntax.when(e)}whenTargetNamed(e){return this._bindingWhenSyntax.whenTargetNamed(e)}whenTargetIsDefault(){return this._bindingWhenSyntax.whenTargetIsDefault()}whenTargetTagged(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)}whenInjectedInto(e){return this._bindingWhenSyntax.whenInjectedInto(e)}whenParentNamed(e){return this._bindingWhenSyntax.whenParentNamed(e)}whenParentTagged(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)}whenAnyAncestorIs(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)}whenNoAncestorIs(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)}whenAnyAncestorNamed(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)}whenAnyAncestorTagged(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)}whenNoAncestorNamed(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)}whenNoAncestorTagged(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)}whenAnyAncestorMatches(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)}whenNoAncestorMatches(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)}onActivation(e){return this._bindingOnSyntax.onActivation(e)}onDeactivation(e){return this._bindingOnSyntax.onDeactivation(e)}}class ez{_binding;constructor(e){this._binding=e}to(e){return this._binding.type=J.Instance,this._binding.implementationType=e,new eq(this._binding)}toSelf(){if("function"!=typeof this._binding.serviceIdentifier)throw Error("The toSelf function can only be applied when a constructor is used as service identifier");let e=this._binding.serviceIdentifier;return this.to(e)}toConstantValue(e){return this._binding.type=J.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=X.Singleton,new eG(this._binding)}toDynamicValue(e){return this._binding.type=J.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new eq(this._binding)}toConstructor(e){return this._binding.type=J.Constructor,this._binding.implementationType=e,this._binding.scope=X.Singleton,new eG(this._binding)}toFactory(e){return this._binding.type=J.Factory,this._binding.factory=e,this._binding.scope=X.Singleton,new eG(this._binding)}toFunction(e){if("function"!=typeof e)throw Error("Value provided to function binding must be a function!");let t=this.toConstantValue(e);return this._binding.type=J.Function,this._binding.scope=X.Singleton,t}toAutoFactory(e){return this._binding.type=J.Factory,this._binding.factory=t=>()=>t.container.get(e),this._binding.scope=X.Singleton,new eG(this._binding)}toAutoNamedFactory(e){return this._binding.type=J.Factory,this._binding.factory=t=>r=>t.container.getNamed(e,r),new eG(this._binding)}toProvider(e){return this._binding.type=J.Provider,this._binding.provider=e,this._binding.scope=X.Singleton,new eG(this._binding)}toService(e){this._binding.type=J.DynamicValue,Object.defineProperty(this._binding,"cache",{configurable:!0,enumerable:!0,get:()=>null,set(e){}}),this._binding.dynamicValue=t=>{try{return t.container.get(e)}catch(r){return t.container.getAsync(e)}},this._binding.implementationType=null}}class eH{bindings;activations;deactivations;middleware;moduleActivationStore;static of(e,t,r,n,i){let s=new eH;return s.bindings=e,s.middleware=t,s.deactivations=n,s.activations=r,s.moduleActivationStore=i,s}}class eX{_map;constructor(){this._map=new Map}getMap(){return this._map}add(e,t){if(this._checkNonNulish(e),null==t)throw Error(ee);let r=this._map.get(e);void 0!==r?r.push(t):this._map.set(e,[t])}get(e){this._checkNonNulish(e);let t=this._map.get(e);if(void 0!==t)return t;throw Error(et)}remove(e){if(this._checkNonNulish(e),!this._map.delete(e))throw Error(et)}removeIntersection(e){this.traverse((t,r)=>{let n=e.hasKey(t)?e.get(t):void 0;if(void 0!==n){let e=r.filter(e=>!n.some(t=>e===t));this._setValue(t,e)}})}removeByCondition(e){let t=[];return this._map.forEach((r,n)=>{let i=[];for(let n of r)e(n)?t.push(n):i.push(n);this._setValue(n,i)}),t}hasKey(e){return this._checkNonNulish(e),this._map.has(e)}clone(){let e=new eX;return this._map.forEach((t,r)=>{t.forEach(t=>{e.add(r,"object"==typeof t&&null!==t&&"clone"in t&&"function"==typeof t.clone?t.clone():t)})}),e}traverse(e){this._map.forEach((t,r)=>{e(r,t)})}_checkNonNulish(e){if(null==e)throw Error(ee)}_setValue(e,t){t.length>0?this._map.set(e,t):this._map.delete(e)}}class eJ{_map=new Map;remove(e){let t=this._map.get(e);return void 0===t?this._getEmptyHandlersStore():(this._map.delete(e),t)}addDeactivation(e,t,r){this._getModuleActivationHandlers(e).onDeactivations.add(t,r)}addActivation(e,t,r){this._getModuleActivationHandlers(e).onActivations.add(t,r)}clone(){let e=new eJ;return this._map.forEach((t,r)=>{e._map.set(r,{onActivations:t.onActivations.clone(),onDeactivations:t.onDeactivations.clone()})}),e}_getModuleActivationHandlers(e){let t=this._map.get(e);return void 0===t&&(t=this._getEmptyHandlersStore(),this._map.set(e,t)),t}_getEmptyHandlersStore(){return{onActivations:new eX,onDeactivations:new eX}}}class eK{id;parent;options;_middleware;_bindingDictionary;_activations;_deactivations;_snapshots;_metadataReader;_moduleActivationStore;constructor(e){let t=e||{};if("object"!=typeof t)throw Error("Invalid Container constructor argument. Container options must be an object.");if(void 0===t.defaultScope)t.defaultScope=X.Transient;else if(t.defaultScope!==X.Singleton&&t.defaultScope!==X.Transient&&t.defaultScope!==X.Request)throw Error('Invalid Container option. Default scope must be a string ("singleton" or "transient").');if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw Error("Invalid Container option. Auto bind injectable must be a boolean");if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw Error("Invalid Container option. Skip base check must be a boolean");this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=Q++,this._bindingDictionary=new eX,this._snapshots=[],this._middleware=null,this._activations=new eX,this._deactivations=new eX,this.parent=null,this._metadataReader=new ei,this._moduleActivationStore=new eJ}static merge(e,t,...r){let n=new eK,i=[e,t,...r].map(e=>ef(e)),s=ef(n);return i.forEach(e=>{e.traverse((e,t)=>{t.forEach(e=>{s.add(e.serviceIdentifier,e.clone())})})}),n}load(...e){let t=this._getContainerModuleHelpersFactory();for(let r of e){let e=t(r.id);r.registry(e.bindFunction,e.unbindFunction,e.isboundFunction,e.rebindFunction,e.unbindAsyncFunction,e.onActivationFunction,e.onDeactivationFunction)}}async loadAsync(...e){let t=this._getContainerModuleHelpersFactory();for(let r of e){let e=t(r.id);await r.registry(e.bindFunction,e.unbindFunction,e.isboundFunction,e.rebindFunction,e.unbindAsyncFunction,e.onActivationFunction,e.onDeactivationFunction)}}unload(...e){e.forEach(e=>{let t=this._removeModuleBindings(e.id);this._deactivateSingletons(t),this._removeModuleHandlers(e.id)})}async unloadAsync(...e){for(let t of e){let e=this._removeModuleBindings(t.id);await this._deactivateSingletonsAsync(e),this._removeModuleHandlers(t.id)}}bind(e){return this._bind(this._buildBinding(e))}rebind(e){return this.unbind(e),this.bind(e)}async rebindAsync(e){return await this.unbindAsync(e),this.bind(e)}unbind(e){if(this._bindingDictionary.hasKey(e)){let t=this._bindingDictionary.get(e);this._deactivateSingletons(t)}this._removeServiceFromDictionary(e)}async unbindAsync(e){if(this._bindingDictionary.hasKey(e)){let t=this._bindingDictionary.get(e);await this._deactivateSingletonsAsync(t)}this._removeServiceFromDictionary(e)}unbindAll(){this._bindingDictionary.traverse((e,t)=>{this._deactivateSingletons(t)}),this._bindingDictionary=new eX}async unbindAllAsync(){let e=[];this._bindingDictionary.traverse((t,r)=>{e.push(this._deactivateSingletonsAsync(r))}),await Promise.all(e),this._bindingDictionary=new eX}onActivation(e,t){this._activations.add(e,t)}onDeactivation(e,t){this._deactivations.add(e,t)}isBound(e){let t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t}isCurrentBound(e){return this._bindingDictionary.hasKey(e)}isBoundNamed(e,t){return this.isBoundTagged(e,L,t)}isBoundTagged(e,t,r){let n=!1;if(this._bindingDictionary.hasKey(e)){let s=this._bindingDictionary.get(e),o=function(e,t,r){let n=A(ev(t,r));if(n.kind===i.unmanaged)throw Error("Unexpected metadata when creating target");let s=new k("",n,"Variable");return new ep(t,new eu(e),null,[],s)}(this,e,{customTag:{key:t,value:r},isMultiInject:!1});n=s.some(e=>e.constraint(o))}return!n&&this.parent&&(n=this.parent.isBoundTagged(e,t,r)),n}snapshot(){this._snapshots.push(eH.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))}restore(){let e=this._snapshots.pop();if(void 0===e)throw Error("No snapshot available to restore.");this._bindingDictionary=e.bindings,this._activations=e.activations,this._deactivations=e.deactivations,this._middleware=e.middleware,this._moduleActivationStore=e.moduleActivationStore}createChild(e){let t=new eK(e||this.options);return t.parent=this,t}applyMiddleware(...e){let t=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((e,t)=>t(e),t)}applyCustomMetadataReader(e){this._metadataReader=e}get(e){let t=this._getNotAllArgs(e,!1,!1);return this._getButThrowIfAsync(t)}async getAsync(e){let t=this._getNotAllArgs(e,!1,!1);return this._get(t)}getTagged(e,t,r){let n=this._getNotAllArgs(e,!1,!1,t,r);return this._getButThrowIfAsync(n)}async getTaggedAsync(e,t,r){let n=this._getNotAllArgs(e,!1,!1,t,r);return this._get(n)}getNamed(e,t){return this.getTagged(e,L,t)}async getNamedAsync(e,t){return this.getTaggedAsync(e,L,t)}getAll(e,t){let r=this._getAllArgs(e,t,!1);return this._getButThrowIfAsync(r)}async getAllAsync(e,t){let r=this._getAllArgs(e,t,!1);return this._getAll(r)}getAllTagged(e,t,r){let n=this._getNotAllArgs(e,!0,!1,t,r);return this._getButThrowIfAsync(n)}async getAllTaggedAsync(e,t,r){let n=this._getNotAllArgs(e,!0,!1,t,r);return this._getAll(n)}getAllNamed(e,t){return this.getAllTagged(e,L,t)}async getAllNamedAsync(e,t){return this.getAllTaggedAsync(e,L,t)}resolve(e){let t=this.isBound(e);t||this.bind(e).toSelf();let r=this.get(e);return t||this.unbind(e),r}tryGet(e){let t=this._getNotAllArgs(e,!1,!0);return this._getButThrowIfAsync(t)}async tryGetAsync(e){let t=this._getNotAllArgs(e,!1,!0);return this._get(t)}tryGetTagged(e,t,r){let n=this._getNotAllArgs(e,!1,!0,t,r);return this._getButThrowIfAsync(n)}async tryGetTaggedAsync(e,t,r){let n=this._getNotAllArgs(e,!1,!0,t,r);return this._get(n)}tryGetNamed(e,t){return this.tryGetTagged(e,L,t)}async tryGetNamedAsync(e,t){return this.tryGetTaggedAsync(e,L,t)}tryGetAll(e,t){let r=this._getAllArgs(e,t,!0);return this._getButThrowIfAsync(r)}async tryGetAllAsync(e,t){let r=this._getAllArgs(e,t,!0);return this._getAll(r)}tryGetAllTagged(e,t,r){let n=this._getNotAllArgs(e,!0,!0,t,r);return this._getButThrowIfAsync(n)}async tryGetAllTaggedAsync(e,t,r){let n=this._getNotAllArgs(e,!0,!0,t,r);return this._getAll(n)}tryGetAllNamed(e,t){return this.tryGetAllTagged(e,L,t)}async tryGetAllNamedAsync(e,t){return this.tryGetAllTaggedAsync(e,L,t)}_preDestroy(e,t){if(void 0!==e&&Reflect.hasMetadata(z,e)){let r=Reflect.getMetadata(z,e);return t[r.value]?.()}}_removeModuleHandlers(e){let t=this._moduleActivationStore.remove(e);this._activations.removeIntersection(t.onActivations),this._deactivations.removeIntersection(t.onDeactivations)}_removeModuleBindings(e){return this._bindingDictionary.removeByCondition(t=>t.moduleId===e)}_deactivate(e,t){let r=null==t?void 0:Object.getPrototypeOf(t).constructor;try{if(this._deactivations.hasKey(e.serviceIdentifier)){let n=this._deactivateContainer(t,this._deactivations.get(e.serviceIdentifier).values());if(ey(n))return this._handleDeactivationError(n.then(async()=>this._propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,t,r)),e.serviceIdentifier)}let n=this._propagateContainerDeactivationThenBindingAndPreDestroy(e,t,r);if(ey(n))return this._handleDeactivationError(n,e.serviceIdentifier)}catch(t){if(t instanceof Error)throw Error(en(eo(e.serviceIdentifier),t.message))}}async _handleDeactivationError(e,t){try{await e}catch(e){if(e instanceof Error)throw Error(en(eo(t),e.message))}}_deactivateContainer(e,t){let r=t.next();for(;"function"==typeof r.value;){let n=r.value(e);if(ey(n))return n.then(async()=>this._deactivateContainerAsync(e,t));r=t.next()}}async _deactivateContainerAsync(e,t){let r=t.next();for(;"function"==typeof r.value;)await r.value(e),r=t.next()}_getContainerModuleHelpersFactory(){let e=e=>t=>{let r=this._buildBinding(t);return r.moduleId=e,this._bind(r)},t=()=>e=>{this.unbind(e)},r=()=>async e=>this.unbindAsync(e),n=()=>e=>this.isBound(e),i=t=>{let r=e(t);return e=>(this.unbind(e),r(e))},s=e=>(t,r)=>{this._moduleActivationStore.addActivation(e,t,r),this.onActivation(t,r)},o=e=>(t,r)=>{this._moduleActivationStore.addDeactivation(e,t,r),this.onDeactivation(t,r)};return a=>({bindFunction:e(a),isboundFunction:n(),onActivationFunction:s(a),onDeactivationFunction:o(a),rebindFunction:i(a),unbindAsyncFunction:r(),unbindFunction:t()})}_bind(e){return this._bindingDictionary.add(e.serviceIdentifier,e),new ez(e)}_buildBinding(e){return new Y(e,this.options.defaultScope||X.Transient)}async _getAll(e){return Promise.all(this._get(e))}_get(e){let t={...e,contextInterceptor:e=>e,targetType:K.Variable};if(this._middleware){let e=this._middleware(t);if(null==e)throw Error("Invalid return type in middleware. Middleware must return!");return e}return this._planAndResolve()(t)}_getButThrowIfAsync(e){let t=this._get(e);if(e_(t)){var r;throw Error(`You are attempting to construct ${"function"==typeof(r=e.serviceIdentifier)?`[function/class ${r.name||"<anonymous>"}]`:"symbol"==typeof r?r.toString():`'${r}'`} in a synchronous way but it has asynchronous dependencies.`)}return t}_getAllArgs(e,t,r){return{avoidConstraints:!t?.enforceBindingConstraints,isMultiInject:!0,isOptional:r,serviceIdentifier:e}}_getNotAllArgs(e,t,r,n,i){return{avoidConstraints:!1,isMultiInject:t,isOptional:r,key:n,serviceIdentifier:e,value:i}}_getPlanMetadataFromNextArgs(e){let t={isMultiInject:e.isMultiInject};return void 0!==e.key&&(t.customTag={key:e.key,value:e.value}),!0===e.isOptional&&(t.isOptional=!0),t}_planAndResolve(){return e=>{var t;let r=function(e,t,r,n,s,o=!1){let a=new eu(t),c=function(e,t,r){let n=A(ev(t,r));if(n.kind===i.unmanaged)throw Error("Unexpected metadata when creating target");return new k("",n,e)}(r,n,s);try{return function e(t,r,n,i,s,o){let a,c;if(null===s){a=eg(t,r,i,null,o),c=new ep(n,i,null,a,o);let e=new ed(i,c);i.addPlan(e)}else a=eg(t,r,i,s,o),c=s.addChildRequest(o.serviceIdentifier,a,o);a.forEach(r=>{let n=null;if(o.isArray())n=c.addChildRequest(r.serviceIdentifier,r,o);else{if(null!==r.cache)return;n=c}if(r.type===J.Instance&&null!==r.implementationType){var s;let o=(s=r.implementationType,U(t)(s));if(!0!==i.container.options.skipBaseClassChecks){let e=function e(t,r){let n=function(e){let t=Object.getPrototypeOf(e.prototype);return t?.constructor}(r);if(void 0===n||n===Object)return 0;let i=U(t)(n),s=i.map(e=>e.metadata.filter(e=>e.key===M)),o=[].concat.apply([],s).length,a=i.length-o;return a>0?a:e(t,n)}(t,r.implementationType);if(o.length<e)throw Error(`The number of constructor arguments in the derived class ${ec(r.implementationType)} must be >= than the number of constructor arguments of its base class.`)}o.forEach(r=>{e(t,!1,r.serviceIdentifier,i,n,r)})}})}(e,o,n,a,null,c),a}catch(e){throw es(e)&&function e(t){t.childRequests.forEach(r=>{if(function e(t,r){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===r||e(t.parentRequest,r))}(t,r.serviceIdentifier)){let e=(function e(t,r=[]){let n=eo(t.serviceIdentifier);return r.push(n),null!==t.parentRequest?e(t.parentRequest,r):r})(r).reverse().join(" --\x3e ");throw Error(`Circular dependency found: ${e}`)}e(r)})}(a.plan.rootRequest),e}}(this._metadataReader,this,e.targetType,e.serviceIdentifier,this._getPlanMetadataFromNextArgs(e),e.avoidConstraints);return ex((t=r=e.contextInterceptor(r)).plan.rootRequest.requestScope)(t.plan.rootRequest)}}_deactivateIfSingleton(e){if(e.activated)return ey(e.cache)?e.cache.then(t=>this._deactivate(e,t)):this._deactivate(e,e.cache)}_deactivateSingletons(e){for(let t of e)if(ey(this._deactivateIfSingleton(t)))throw Error("Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)")}async _deactivateSingletonsAsync(e){await Promise.all(e.map(async e=>this._deactivateIfSingleton(e)))}_propagateContainerDeactivationThenBindingAndPreDestroy(e,t,r){return this.parent?this._deactivate.bind(this.parent)(e,t):this._bindingDeactivationAndPreDestroy(e,t,r)}async _propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,t,r){this.parent?await this._deactivate.bind(this.parent)(e,t):await this._bindingDeactivationAndPreDestroyAsync(e,t,r)}_removeServiceFromDictionary(e){try{this._bindingDictionary.remove(e)}catch(t){throw Error(`Could not unbind serviceIdentifier: ${eo(e)}`)}}_bindingDeactivationAndPreDestroy(e,t,r){if("function"==typeof e.onDeactivation){let n=e.onDeactivation(t);if(ey(n))return n.then(()=>this._preDestroy(r,t))}return this._preDestroy(r,t)}async _bindingDeactivationAndPreDestroyAsync(e,t,r){"function"==typeof e.onDeactivation&&await e.onDeactivation(t),await this._preDestroy(r,t)}}class eQ{id;registry;constructor(e){this.id=Q++,this.registry=e}}function eY(e,t,r,n){let i=function(e){let t=[];if(Array.isArray(e)){let r=function(e){let t=new Set;for(let r of e){if(t.has(r))return r;t.add(r)}}((t=e).map(e=>e.key));if(void 0!==r)throw Error(`${Z} ${r.toString()}`)}else t=[e];return t}(n),s={};Reflect.hasOwnMetadata(e,t)&&(s=Reflect.getMetadata(e,t));let o=s[r];if(void 0===o)o=[];else for(let e of o)if(i.some(t=>t.key===e.key))throw Error(`${Z} ${e.key.toString()}`);o.push(...i),s[r]=o,Reflect.defineMetadata(e,s,t)}function eZ(){return function(e){if(Reflect.hasOwnMetadata(G,e))throw Error("Cannot apply @injectable decorator multiple times.");return Reflect.defineMetadata(G,Reflect.getMetadata(W,e)||[],e),e}}function e0(e){return t=>(r,n,i)=>{var s;if(void 0===t){let e="function"==typeof r?r.name:r.constructor.name;throw Error(`@inject called with undefined this could mean that the class ${e} has a circular dependency problem. You can use a LazyServiceIdentifer to overcome this limitation.`)}(s=new eh(e,t),(e,t,r)=>{var n,i,o,a;"number"==typeof r?(n=e,i=t,o=r,a=s,!function(e){if(void 0!==e)throw Error(er)}(i),eY(B,n,o.toString(),a)):function(e,t,r){if(void 0!==e.prototype)throw Error(er);eY(V,e.constructor,t,r)}(e,t,s)})(r,n,i)}}let e1=e0($),e2=e0(F);function e4(e,t){return()=>(r,n)=>{let i=new eh(e,n);if(Reflect.hasOwnMetadata(e,r.constructor))throw Error(t);Reflect.defineMetadata(e,i,r.constructor)}}e4(q,"Cannot apply @postConstruct decorator multiple times in the same class"),e4(z,"Cannot apply @preDestroy decorator multiple times in the same class")},16024:(e,t,r)=>{"use strict";r.d(t,{R0:()=>c,lI:()=>a,ms:()=>o});var n=r(2913),i=r(26174);function s(e){return e[e.length-1]}function o(e){return(0,n.T)(s(e))?e.pop():void 0}function a(e){return(0,i.m)(s(e))?e.pop():void 0}function c(e,t){return"number"==typeof s(e)?e.pop():t}},18465:(e,t,r)=>{let n=r(82529);e.exports=(e,t)=>{let r=n(e,null,!0),i=n(t,null,!0),s=r.compare(i);if(0===s)return null;let o=s>0,a=o?r:i,c=o?i:r,l=!!a.prerelease.length;if(c.prerelease.length&&!l)return c.patch||c.minor?a.patch?"patch":a.minor?"minor":"major":"major";let u=l?"pre":"";return r.major!==i.major?u+"major":r.minor!==i.minor?u+"minor":r.patch!==i.patch?u+"patch":"prerelease"}},18576:(e,t,r)=>{let n=r(59405),i=r(57334),s=r(55746);e.exports=(e,t)=>{e=new i(e,t);let r=new n("0.0.0");if(e.test(r)||(r=new n("0.0.0-0"),e.test(r)))return r;r=null;for(let t=0;t<e.set.length;++t){let i=e.set[t],o=null;i.forEach(e=>{let t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!o||s(t,o))&&(o=t);break;case"<":case"<=":break;default:throw Error(`Unexpected operation: ${e.operator}`)}}),o&&(!r||s(r,o))&&(r=o)}return r&&e.test(r)?r:null}},22079:(e,t,r)=>{"use strict";r.d(t,{O:()=>a});var n=r(33300),i=r(55199),s=r(26174),o=r(3429);function a(e,t,r){void 0===e&&(e=0),void 0===r&&(r=i.b);var a=-1;return null!=t&&((0,s.m)(t)?r=t:a=t),new n.c(function(t){var n=(0,o.v)(e)?+e-r.now():e;n<0&&(n=0);var i=0;return r.schedule(function(){t.closed||(t.next(i++),0<=a?this.schedule(void 0,a):t.complete())},n)})}},22498:e=>{let t=/^[0-9]+$/,r=(e,r)=>{let n=t.test(e),i=t.test(r);return n&&i&&(e*=1,r*=1),e===r?0:n&&!i?-1:i&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},26165:(e,t,r)=>{let n=r(59405),i=r(57334);e.exports=(e,t,r)=>{let s=null,o=null,a=null;try{a=new i(t,r)}catch(e){return null}return e.forEach(e=>{a.test(e)&&(!s||-1===o.compare(e))&&(o=new n(s=e,r))}),s}},26174:(e,t,r)=>{"use strict";r.d(t,{m:()=>i});var n=r(2913);function i(e){return e&&(0,n.T)(e.schedule)}},26684:(e,t,r)=>{"use strict";var n,i;r.d(t,{uu:()=>u,o3:()=>R,V1:()=>c,MN:()=>p,bW:()=>s,Cl:()=>l,xe:()=>f});let s={of:e=>c(e),empty:()=>l,zero:()=>l,fromNullable:e=>null==e?l:c(e),fromFalsy:e=>e?c(e):l,fromPredicate(e,t){return 1==arguments.length?t=>s.fromPredicate(e,t):e(t)?c(t):l},mapMaybe(e,t){return 1==arguments.length?t=>s.mapMaybe(e,t):s.catMaybes(t.map(e))},catMaybes(e){let t=[];for(let r of e)r.isJust()&&t.push(r.extract());return t},encase(e){try{return c(e())}catch{return l}},isMaybe:e=>e instanceof o||e instanceof a,sequence(e){let t=[];for(let r of e){if(!r.isJust())return l;t.push(r.extract())}return c(t)},"fantasy-land/of"(e){return this.of(e)},"fantasy-land/empty"(){return this.empty()},"fantasy-land/zero"(){return this.zero()}};class o{constructor(e){this.__value=e,this["fantasy-land/equals"]=this.equals,this["fantasy-land/map"]=this.map,this["fantasy-land/ap"]=this.ap,this["fantasy-land/alt"]=this.alt,this["fantasy-land/chain"]=this.chain,this["fantasy-land/reduce"]=this.reduce,this["fantasy-land/extend"]=this.extend,this["fantasy-land/filter"]=this.filter}isJust(){return!0}isNothing(){return!1}inspect(){return`Just(${this.__value})`}toString(){return this.inspect()}toJSON(){let e=this.__value;return e instanceof Date?e.toJSON():e}equals(e){return this.extract()===e.extract()}map(e){return c(e(this.__value))}ap(e){return e.isJust()?this.map(e.extract()):l}alt(e){return this}altLazy(e){return this}chain(e){return e(this.__value)}chainNullable(e){return s.fromNullable(e(this.__value))}join(){return this.__value}reduce(e,t){return e(t,this.__value)}extend(e){return c(e(this))}unsafeCoerce(){return this.__value}caseOf(e){return"_"in e?e._():e.Just(this.__value)}orDefault(e){return this.__value}orDefaultLazy(e){return this.__value}toList(){return[this.__value]}mapOrDefault(e,t){return e(this.__value)}extract(){return this.__value}extractNullable(){return this.__value}toEither(e){return f(this.__value)}ifJust(e){return e(this.__value),this}ifNothing(e){return this}filter(e){return e(this.__value)?c(this.__value):l}}o.prototype.constructor=s;class a{constructor(){this["fantasy-land/equals"]=this.equals,this["fantasy-land/map"]=this.map,this["fantasy-land/ap"]=this.ap,this["fantasy-land/alt"]=this.alt,this["fantasy-land/chain"]=this.chain,this["fantasy-land/reduce"]=this.reduce,this["fantasy-land/extend"]=this.extend,this["fantasy-land/filter"]=this.filter}isJust(){return!1}isNothing(){return!0}inspect(){return"Nothing"}toString(){return this.inspect()}toJSON(){return this.__value}equals(e){return this.extract()===e.extract()}map(e){return l}ap(e){return l}alt(e){return e}altLazy(e){return e()}chain(e){return l}chainNullable(e){return l}join(){return l}reduce(e,t){return t}extend(e){return l}unsafeCoerce(){throw Error("Maybe#unsafeCoerce was ran on a Nothing")}caseOf(e){return"_"in e?e._():e.Nothing()}orDefault(e){return e}orDefaultLazy(e){return e()}toList(){return[]}mapOrDefault(e,t){return t}extract(){}extractNullable(){return null}toEither(e){return p(e)}ifJust(e){return this}ifNothing(e){return e(),this}filter(e){return l}}a.prototype.constructor=s;let c=e=>new o(e),l=new a,u={of:e=>f(e),lefts(e){let t=[];for(let r of e)r.isLeft()&&t.push(r.extract());return t},rights(e){let t=[];for(let r of e)r.isRight()&&t.push(r.extract());return t},encase(e){try{return f(e())}catch(e){return p(e)}},sequence(e){let t=[];for(let r of e){if(r.isLeft())return r;t.push(r.extract())}return f(t)},isEither:e=>e instanceof d||e instanceof h,"fantasy-land/of":e=>u.of(e)};class h{constructor(e){this.__value=e,this._="R",this["fantasy-land/bimap"]=this.bimap,this["fantasy-land/map"]=this.map,this["fantasy-land/ap"]=this.ap,this["fantasy-land/equals"]=this.equals,this["fantasy-land/chain"]=this.chain,this["fantasy-land/alt"]=this.alt,this["fantasy-land/reduce"]=this.reduce,this["fantasy-land/extend"]=this.extend}isLeft(){return!1}isRight(){return!0}toJSON(){return this.__value}inspect(){return`Right(${this.__value})`}toString(){return this.inspect()}bimap(e,t){return f(t(this.__value))}map(e){return f(e(this.__value))}mapLeft(e){return this}ap(e){return e.isRight()?this.map(e.extract()):e}equals(e){return!!e.isRight()&&this.__value===e.extract()}chain(e){return e(this.__value)}chainLeft(e){return this}join(){return this.__value}alt(e){return this}altLazy(e){return this}reduce(e,t){return e(t,this.__value)}extend(e){return f(e(this))}unsafeCoerce(){return this.__value}caseOf(e){return"_"in e?e._():e.Right(this.__value)}leftOrDefault(e){return e}orDefault(e){return this.__value}orDefaultLazy(e){return this.__value}leftOrDefaultLazy(e){return e()}ifLeft(e){return this}ifRight(e){return e(this.__value),this}toMaybe(){return c(this.__value)}leftToMaybe(){return l}extract(){return this.__value}swap(){return p(this.__value)}}h.prototype.constructor=u;class d{constructor(e){this.__value=e,this._="L",this["fantasy-land/bimap"]=this.bimap,this["fantasy-land/map"]=this.map,this["fantasy-land/ap"]=this.ap,this["fantasy-land/equals"]=this.equals,this["fantasy-land/chain"]=this.chain,this["fantasy-land/alt"]=this.alt,this["fantasy-land/reduce"]=this.reduce,this["fantasy-land/extend"]=this.extend}isLeft(){return!0}isRight(){return!1}toJSON(){return this.__value}inspect(){return`Left(${JSON.stringify(this.__value)})`}toString(){return this.inspect()}bimap(e,t){return p(e(this.__value))}map(e){return this}mapLeft(e){return p(e(this.__value))}ap(e){return e.isLeft()?e:this}equals(e){return!!e.isLeft()&&e.extract()===this.__value}chain(e){return this}chainLeft(e){return e(this.__value)}join(){return this}alt(e){return e}altLazy(e){return e()}reduce(e,t){return t}extend(e){return this}unsafeCoerce(){if(this.__value instanceof Error)throw this.__value;throw Error("Either#unsafeCoerce was ran on a Left")}caseOf(e){return"_"in e?e._():e.Left(this.__value)}leftOrDefault(e){return this.__value}orDefault(e){return e}orDefaultLazy(e){return e()}leftOrDefaultLazy(e){return this.__value}ifLeft(e){return e(this.__value),this}ifRight(e){return this}toMaybe(){return l}leftToMaybe(){return c(this.__value)}extract(){return this.__value}swap(){return f(this.__value)}}d.prototype.constructor=u;let p=e=>new d(e),f=e=>new h(e),g=e=>e,v={LT:"LT",EQ:"EQ",GT:"GT"},m=Object.assign(e=>e,{fromArray:e=>m.isNonEmpty(e)?c(e):l,unsafeCoerce:e=>{if(m.isNonEmpty(e))return e;throw Error("NonEmptyList#unsafeCoerce was ran on an empty array")},fromTuple:e=>m(e.toArray()),head:e=>e[0],last:e=>e[e.length-1],isNonEmpty:e=>e.length>0,tail:e=>e.slice(1)}),y=(e,t)=>"bigint"==typeof t?t.toString():t,_=e=>"object"==typeof e&&null!==e&&!Array.isArray(e),b=(e,t)=>{let r="";switch(typeof t){case"undefined":r="undefined";break;case"object":r=null===t?"null":Array.isArray(t)?"an array with value "+JSON.stringify(t,y):"an object with value "+JSON.stringify(t,y);break;case"boolean":r="a boolean";break;case"symbol":r="a symbol";break;case"function":r="a function";break;case"bigint":r=`a bigint with value ${t.toString()}`}return r=r||`a ${typeof t} with value ${JSON.stringify(t,y)}`,`Expected ${e}, but received ${r}`},S=e=>(1===Object.keys(e).length&&e.oneOf?.length===1&&"object"==typeof e.oneOf[0]&&(Object.assign(e,e.oneOf[0]),delete e.oneOf),e),E=e=>{if(Array.isArray(e.oneOf))for(let t=0;t<e.oneOf.length;t++){let r=e.oneOf[t];if("object"==typeof r&&r.oneOf)return e.oneOf.splice(t,1),e.oneOf.push(...r.oneOf),w(e)}return e},w=e=>(E(e),S(e),e),A={interface(e){let t=Object.keys(e),r=r=>{if(!_(r))return p(b("an object",r));let n={};for(let i of t){if(!r.hasOwnProperty(i)&&!e[i]._isOptional)return p(`Problem with property "${i}": it does not exist in received object ${JSON.stringify(r,y)}`);let t=e[i].decode(r[i]);if(t.isLeft())return p(`Problem with the value of property "${i}": ${t.extract()}`);let s=t.extract();void 0!==s&&(n[i]=s)}return f(n)};return{decode:r,encode:r=>{let n={};for(let i of t)n[i]=e[i].encode(r[i]);return n},unsafeDecode:e=>r(e).mapLeft(Error).unsafeCoerce(),schema:()=>t.reduce((t,r)=>(e[r]._isOptional||t.required.push(r),t.properties[r]=w(e[r].schema()),t),{type:"object",properties:{},required:[]})}},custom:({decode:e,encode:t,schema:r})=>({decode:e,encode:t,unsafeDecode:t=>e(t).mapLeft(Error).unsafeCoerce(),schema:r??(()=>({}))})},D=A.custom({decode:e=>"string"==typeof e?f(e):p(b("a string",e)),encode:g,schema:()=>({type:"string"})}),x=A.custom({decode:e=>"number"==typeof e?f(e):p(b("a number",e)),encode:g,schema:()=>({type:"number"})});A.custom({decode:e=>null===e?f(e):p(b("a null",e)),encode:g,schema:()=>({type:"null"})}),A.custom({decode:e=>void 0===e?f(e):p(b("an undefined",e)),encode:g}),A.custom({decode:e=>"boolean"==typeof e?f(e):p(b("a boolean",e)),encode:g,schema:()=>({type:"boolean"})}),A.custom({decode:f,encode:g,schema:()=>({})}),A.custom({decode:e=>D.decode(e).chain(t=>isFinite(+t)?f(t):p(b("a number",e))),encode:g,schema:x.schema}),A.custom({decode:e=>D.decode(e).mapLeft(e=>`Problem with date string: ${e}`).chain(e=>Number.isNaN(Date.parse(e))?p("Expected a valid date string, but received a string that cannot be parsed"):f(new Date(e))),encode:e=>e.toISOString(),schema:()=>({type:"string",format:"date-time"})});class T{constructor(e,t){this.first=e,this.second=t,this.length=2,this["fantasy-land/equals"]=this.equals,this["fantasy-land/bimap"]=this.bimap,this["fantasy-land/map"]=this.map,this["fantasy-land/reduce"]=this.reduce,this["fantasy-land/ap"]=this.ap,this[0]=e,this[1]=t}*[Symbol.iterator](){yield this.first,yield this.second}toJSON(){return this.toArray()}inspect(){return`Tuple(${JSON.stringify(this.first)}, ${JSON.stringify(this.second)})`}toString(){return this.inspect()}fst(){return this.first}snd(){return this.second}equals(e){return this.first===e.fst()&&this.second===e.snd()}bimap(e,t){return C(e(this.first),t(this.second))}mapFirst(e){return C(e(this.first),this.second)}map(e){return C(this.first,e(this.second))}reduce(e,t){return e(t,this.second)}toArray(){return[this.first,this.second]}swap(){return C(this.second,this.first)}ap(e){return C(this.first,e.snd()(this.second))}every(e){return e(this.first)&&e(this.second)}some(e){return e(this.first)||e(this.second)}}let C=Object.assign((e,t)=>new T(e,t),{fromArray:([e,t])=>C(e,t),fanout:(...e)=>{let[t,r,n]=e;switch(e.length){case 3:return C(t(n),r(n));case 2:return e=>C.fanout(t,r,e);default:return e=>r=>C.fanout(t,e,r)}}});T.prototype.constructor=C;let O={liftEither(e){if(e.isRight())return Promise.resolve(e.extract());throw e.extract()},fromPromise:e=>e.then(O.liftEither),throwE(e){throw e}};class I{constructor(e){this.runPromise=e,this[n]="EitherAsync",this["fantasy-land/chain"]=this.chain,this["fantasy-land/alt"]=this.alt,this.then=(e,t)=>this.run().then(e,t)}leftOrDefault(e){return this.run().then(t=>t.leftOrDefault(e))}orDefault(e){return this.run().then(t=>t.orDefault(e))}join(){return R(async e=>{let t=await this;if(t.isRight()){let r=await t.extract();return e.liftEither(r)}return e.liftEither(t)})}ap(e){return R(async t=>{let r=await e;if(r.isRight()){let e=await this.run();return e.isRight()?r.extract()(e.extract()):t.liftEither(e)}return t.liftEither(r)})}alt(e){return R(async t=>{let r=await this.run();if(r.isRight())return r.extract();{let r=await e;return t.liftEither(r)}})}extend(e){return R(async t=>{let r=await this.run();if(r.isRight()){let n=R.liftEither(r);return t.liftEither(f(e(n)))}return t.liftEither(r)})}async run(){try{return f(await this.runPromise(O))}catch(e){return p(e)}}bimap(e,t){return R(async r=>{let n=await this.run();try{return await r.liftEither(n.bimap(e,t))}catch(e){throw await e}})}map(e){return R(t=>this.runPromise(t).then(e))}mapLeft(e){return R(async t=>{try{return await this.runPromise(t)}catch(t){throw await e(t)}})}chain(e){return R(async t=>{let r=await this.runPromise(t);return t.fromPromise(e(r))})}chainLeft(e){return R(async t=>{try{return await this.runPromise(t)}catch(r){return t.fromPromise(e(r))}})}toMaybeAsync(){return U(async({liftMaybe:e})=>e((await this.run()).toMaybe()))}swap(){return R(async e=>{let t=await this.run();return t.isRight()&&e.throwE(t.extract()),e.liftEither(f(t.extract()))})}ifLeft(e){return R(async t=>{let r=await this.run();return r.ifLeft(e),t.liftEither(r)})}ifRight(e){return R(async t=>{let r=await this.run();return r.ifRight(e),t.liftEither(r)})}void(){return this.map(e=>{})}caseOf(e){return this.run().then(t=>t.caseOf(e))}finally(e){return R(({fromPromise:t})=>t(this.run().finally(e)))}}n=Symbol.toStringTag;let R=Object.assign(e=>new I(e),{fromPromise:e=>R(({fromPromise:t})=>t(e())),liftEither:e=>R(({liftEither:t})=>t(e)),lefts:e=>Promise.all(e.map(e=>e.run())).then(u.lefts),rights:e=>Promise.all(e.map(e=>e.run())).then(u.rights),sequence:e=>R(async t=>{let r=[];for await(let n of e){if(n.isLeft())return t.liftEither(n);r.push(n.extract())}return t.liftEither(f(r))}),all:e=>R.fromPromise(async()=>Promise.all(e).then(u.sequence))});I.prototype.constructor=R;let N={liftMaybe(e){if(e.isJust())return Promise.resolve(e.extract());throw l},fromPromise:e=>e.then(N.liftMaybe)};class k{constructor(e){this.runPromise=e,this[i]="MaybeAsync",this["fantasy-land/chain"]=this.chain,this["fantasy-land/filter"]=this.filter,this["fantasy-land/alt"]=this.alt}orDefault(e){return this.run().then(t=>t.orDefault(e))}join(){return U(async e=>{let t=await this.run();if(t.isJust()){let r=await t.extract();return e.liftMaybe(r)}return e.liftMaybe(l)})}ap(e){return U(async t=>{let r=await e;if(r.isJust()){let e=await this.run();if(e.isJust())return r.extract()(e.extract())}return t.liftMaybe(l)})}alt(e){return U(async t=>{let r=await this.run();if(r.isJust())return r.extract();{let r=await e;return t.liftMaybe(r)}})}extend(e){return U(async t=>{let r=await this.run();if(r.isJust()){let n=U.liftMaybe(r);return t.liftMaybe(c(e(n)))}return t.liftMaybe(l)})}filter(e){return U(async t=>{let r=await this.run();return t.liftMaybe(r.filter(e))})}async run(){try{return c(await this.runPromise(N))}catch{return l}}map(e){return U(t=>this.runPromise(t).then(e))}chain(e){return U(async t=>{let r=await this.runPromise(t);return t.fromPromise(e(r))})}toEitherAsync(e){return R(async({liftEither:t})=>t((await this.run()).toEither(e)))}ifJust(e){return U(async t=>{let r=await this.run();return r.ifJust(e),t.liftMaybe(r)})}ifNothing(e){return U(async t=>{let r=await this.run();return r.ifNothing(e),t.liftMaybe(r)})}void(){return this.map(e=>{})}caseOf(e){return this.run().then(t=>t.caseOf(e))}finally(e){return U(({fromPromise:t})=>t(this.run().finally(e)))}then(e,t){return this.run().then(e,t)}}i=Symbol.toStringTag;let U=Object.assign(e=>new k(e),{catMaybes:e=>Promise.all(e).then(s.catMaybes),fromPromise:e=>U(({fromPromise:t})=>t(e())),liftMaybe:e=>U(({liftMaybe:t})=>t(e))});k.prototype.constructor=U},31458:(e,t,r)=>{let n=r(266);e.exports=(e,t,r)=>n(e,t,">",r)},31821:(e,t,r)=>{let n=r(57334);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},33998:(e,t,r)=>{let n=r(47748),i=r(45641),s=r(55746),o=r(708),a=r(7066),c=r(43841);e.exports=(e,t,r,l)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,l);case"!=":return i(e,r,l);case">":return s(e,r,l);case">=":return o(e,r,l);case"<":return a(e,r,l);case"<=":return c(e,r,l);default:throw TypeError(`Invalid operator: ${t}`)}}},34673:(e,t,r)=>{"use strict";let n,i,s,o,a,c,l,u,h,d,p;r.d(t,{APDU_MAX_PAYLOAD:()=>E,ApduBuilder:()=>w,ApduParser:()=>D,ByteArrayBuilder:()=>S,ByteArrayParser:()=>A,CallTaskInAppDeviceAction:()=>eC,CommandResultFactory:()=>O,CommandUtils:()=>R,DeviceActionStatus:()=>ee,DeviceExchangeError:()=>N,DeviceManagementKitBuilder:()=>nL,DeviceModelId:()=>V,DeviceNotRecognizedError:()=>t7,DeviceSessionStateType:()=>eD,DeviceStatus:()=>Z,FramerUtils:()=>eH,GeneralDmkError:()=>t5,GetAppAndVersionCommand:()=>$,GetOsVersionCommand:()=>z,GlobalCommandErrorHandler:()=>M,InvalidStatusWordError:()=>x,LEDGER_VENDOR_ID:()=>W,LoadCertificateCommand:()=>J,NoAccessibleDeviceError:()=>t9,OpenAppDeviceAction:()=>eT,OpeningConnectionError:()=>t8,ReconnectionFailedError:()=>rr,SendCommandInAppDeviceAction:()=>eO,TransportConnectedDevice:()=>nP,UnknownDAError:()=>ec,UnknownDeviceError:()=>re,UserInteractionRequired:()=>et,XStateDeviceAction:()=>eA,bufferToHexaString:()=>m,hexaStringToBuffer:()=>v,isCommandErrorCode:()=>U,isHexaString:()=>g,isSuccessCommandResult:()=>I});class f{cla;ins;p1;p2;data;constructor(e,t,r,n,i){this.cla=e,this.ins=t,this.p1=r,this.p2=n,this.data=i??new Uint8Array}getRawApdu(){let e=Uint8Array.from([this.cla,this.ins,this.p1,this.p2,this.data.length]),t=new Uint8Array(e.length+this.data.length);return t.set(e,0),this.data.length>0&&t.set(this.data,e.length),t}}let g=e=>"string"==typeof e&&/^0x[0-9a-fA-F]*$/.test(e),v=e=>{if(e.startsWith("0x")&&(e=e.slice(2)),0===e.length)return new Uint8Array;if(e.length%2!=0&&(e="0"+e),!1===/^[0-9a-fA-F]*$/.test(e))return null;let t=e.match(/.{1,2}/g)?.map(e=>parseInt(e,16));return!t||t.some(isNaN)?null:new Uint8Array(t)},m=e=>`0x${Array.from(e,e=>e.toString(16).padStart(2,"0")).join("")}`;class y{_tag="ValueOverflow";originalError;message;constructor(e,t=E){this.message=`Value overflow for ${e}, max is ${t}`}}class _{_tag="DataOverflow";message;originalError;constructor(e,t=0){this.message=0===t?`this.data is already full (value: ${e})`:`this.data will overflow with "${e}", remaining bytes: ${t}`}}class b{_tag="HexaString";message;originalError;constructor(e){this.message=`Invalid encoded hexa string or length is null: ${e}`}}class S{constructor(e=0xffffffff){this.maxPayloadSize=e}data=new Uint8Array;errors=[];build=()=>this.data;tryBuild=()=>this.hasErrors()?void 0:this.data;add8BitUIntToData=e=>this.addNumberToData(e,8n,!1,!1);add16BitUIntToData=(e,t=!0)=>this.addNumberToData(e,16n,!1,t);add32BitUIntToData=(e,t=!0)=>this.addNumberToData(e,32n,!1,t);add64BitUIntToData=(e,t=!0)=>this.addNumberToData(e,64n,!1,t);add128BitUIntToData=(e,t=!0)=>this.addNumberToData(e,128n,!1,t);add256BitUIntToData=(e,t=!0)=>this.addNumberToData(e,256n,!1,t);add16BitIntToData=(e,t=!0)=>this.addNumberToData(e,16n,!0,t);add32BitIntToData=(e,t=!0)=>this.addNumberToData(e,32n,!0,t);add64BitIntToData=(e,t=!0)=>this.addNumberToData(e,64n,!0,t);add128BitIntToData=(e,t=!0)=>this.addNumberToData(e,128n,!0,t);add256BitIntToData=(e,t=!0)=>this.addNumberToData(e,256n,!0,t);addBufferToData=e=>(this.hasEnoughLengthRemaining(e)?this.data=Uint8Array.from([...this.data,...e]):this.errors.push(new _(e.toString())),this);addHexaStringToData=e=>{let t=v(e);return null===t||0===t.length?this.errors.push(new b(e)):this.addBufferToData(t),this};addAsciiStringToData=e=>{let t=new TextEncoder().encode(e);return this.addBufferToData(t),this};encodeInLVFromHexa=e=>{let t=v(e);return null===t||0===t.length?this.errors.push(new b(e)):this.hasEnoughLengthRemaining(t,!0)?(this.add8BitUIntToData(t.length),this.addBufferToData(t)):this.errors.push(new _(e)),this};encodeInLVFromBuffer=e=>(this.hasEnoughLengthRemaining(e,!0)?(this.add8BitUIntToData(e.length),this.addBufferToData(e)):this.errors.push(new _(e.toString())),this);encodeInLVFromAscii=e=>(this.hasEnoughLengthRemaining(e,!0)?(this.add8BitUIntToData(e.length),this.addAsciiStringToData(e)):this.errors.push(new _(e)),this);getAvailablePayloadLength=()=>this.maxPayloadSize-this.data.length;getErrors=()=>this.errors;hasErrors=()=>0!==this.errors.length;hasEnoughLengthRemaining=(e,t=!1)=>this.data.length+e.length+ +!!t<=this.maxPayloadSize;addNumberToData(e,t,r,n){let i=this.checkBoundsAndConvert(e,t,r);if(void 0===i)return this;let s=Number(t)/8,o=new Uint8Array(s);if(n)for(let e=s-1;e>=0;e--)o[e]=Number(255n&i),i>>=8n;else for(let e=0;e<s;e++)o[e]=Number(255n&i),i>>=8n;return this.addBufferToData(o)}checkBoundsAndConvert(e,t,r){if("number"==typeof e){if(!Number.isInteger(e)||e>Number.MAX_SAFE_INTEGER){this.errors.push(new y(e.toString()));return}e=BigInt(e)}if(r){let r=1n<<t-1n;if(e>=r||e<-r){this.errors.push(new y(e.toString(),r-1n));return}e<0n&&(e=(~(e=-e)&(1n<<t)-1n)+1n)}else{let r=1n<<t;if(e<0||e>=r){this.errors.push(new y(e.toString(),r-1n));return}}return e}}let E=255;class w{_ins;_cla;_p1;p2;data=new S(E);constructor({ins:e,cla:t,p1:r,p2:n}){this._cla=255&t,this._ins=255&e,this._p1=255&r,this.p2=255&n}build=()=>new f(this._cla,this._ins,this._p1,this.p2,this.data.build());add8BitUIntToData=e=>(this.data.add8BitUIntToData(e),this);add16BitUIntToData=e=>(this.data.add16BitUIntToData(e),this);add32BitUIntToData=e=>(this.data.add32BitUIntToData(e),this);addBufferToData=e=>(this.data.addBufferToData(e),this);addHexaStringToData=e=>(this.data.addHexaStringToData(e),this);addAsciiStringToData=e=>(this.data.addAsciiStringToData(e),this);encodeInLVFromHexa=e=>(this.data.encodeInLVFromHexa(e),this);encodeInLVFromBuffer=e=>(this.data.encodeInLVFromBuffer(e),this);encodeInLVFromAscii=e=>(this.data.encodeInLVFromAscii(e),this);getAvailablePayloadLength=()=>this.data.getAvailablePayloadLength();getErrors=()=>this.data.getErrors()}class A{constructor(e){this.buffer=e}index=0;testMinimalLength(e){return e<=this.buffer.length-this.index}extract8BitUInt(){if(!this.outOfRange(1))return this.buffer[this.index++]}extract16BitUInt(e=!0){let t=this.extractNumber(16n,!1,e);return void 0===t?void 0:Number(t)}extract16BitInt(e=!0){let t=this.extractNumber(16n,!0,e);return void 0===t?void 0:Number(t)}extract32BitUInt(e=!0){let t=this.extractNumber(32n,!1,e);return void 0===t?void 0:Number(t)}extract32BitInt(e=!0){let t=this.extractNumber(32n,!0,e);return void 0===t?void 0:Number(t)}extract64BitUInt(e=!0){return this.extractNumber(64n,!1,e)}extract64BitInt(e=!0){return this.extractNumber(64n,!0,e)}extract128BitUInt(e=!0){return this.extractNumber(128n,!1,e)}extract128BitInt(e=!0){return this.extractNumber(128n,!0,e)}extract256BitUInt(e=!0){return this.extractNumber(256n,!1,e)}extract256BitInt(e=!0){return this.extractNumber(256n,!0,e)}extractFieldByLength(e){if(this.outOfRange(e))return;if(0===e)return new Uint8Array;let t=this.buffer.slice(this.index,this.index+e);return this.index+=e,t}extractFieldLVEncoded(){let e=this.extract8BitUInt();if(void 0===e)return;if(0===e)return new Uint8Array;let t=this.extractFieldByLength(e);return void 0===t&&this.index--,t}extractFieldTLVEncoded(){if(this.outOfRange(2))return;let e=this.extract8BitUInt(),t=this.extractFieldLVEncoded();if(void 0===e||void 0===t){this.index--;return}return{tag:e,value:t}}encodeToHexaString(e,t=!1){if(void 0===e||0===e.length)return"";let r=m(e);return t?r:r.slice(2)}encodeToString(e){let t="",r=0;if(!e)return t;for(;r<=e.length;){let n=e[r];n&&(t+=String.fromCharCode(n)),r++}return t}getCurrentIndex(){return this.index}resetIndex(){this.index=0}getUnparsedRemainingLength(){return this.buffer.length-this.index}outOfRange(e){return this.index+e>this.buffer.length}extractNumber(e,t,r){let n=Number(e)/8;if(this.outOfRange(n))return;let i=0n;if(r)for(let e=0;e<n;e++)i=i<<8n|BigInt(this.buffer[e+this.index]);else for(let e=n-1;e>=0;e--)i=i<<8n|BigInt(this.buffer[e+this.index]);if(t){let t=1n<<e-1n;i&t&&(i-=t<<1n)}return this.index+=n,i}}class D{parser;constructor(e){this.parser=new A(e.data)}testMinimalLength=e=>this.parser.testMinimalLength(e);extract8BitUInt=()=>this.parser.extract8BitUInt();extract16BitUInt=()=>this.parser.extract16BitUInt();extract32BitUInt=()=>this.parser.extract32BitUInt();extractFieldByLength=e=>this.parser.extractFieldByLength(e);extractFieldLVEncoded=()=>this.parser.extractFieldLVEncoded();extractFieldTLVEncoded=()=>this.parser.extractFieldTLVEncoded();encodeToHexaString(e,t=!1){return t?this.parser.encodeToHexaString(e,!0):this.parser.encodeToHexaString(e,!1)}encodeToString=e=>this.parser.encodeToString(e);getUnparsedRemainingLength=()=>this.parser.getUnparsedRemainingLength()}class x{_tag="InvalidStatusWordError";originalError;constructor(e){this.originalError=Error(e??"Invalid status word.")}}class T{_tag="InvalidResponseFormatError";originalError;constructor(e){this.originalError=Error(e??"Invalid response format.")}}var C=(e=>(e.Error="ERROR",e.Success="SUCCESS",e))(C||{});function O({data:e,error:t}){return t?{status:"ERROR",error:t}:{status:"SUCCESS",data:e}}function I(e){return"SUCCESS"===e.status}class R{static isValidStatusCode(e){return 2===e.length}static isSuccessResponse({statusCode:e}){return!!R.isValidStatusCode(e)&&144===e[0]&&0===e[1]}static isLockedDeviceResponse({statusCode:e}){return!!R.isValidStatusCode(e)&&85===e[0]&&21===e[1]}}class N{_tag;originalError;errorCode;message;constructor({tag:e,errorCode:t,originalError:r,message:n}){this._tag=e,this.originalError=r,this.errorCode=t,this.message=n??"An error occured during device exchange."}}class k{_tag="UnknownDeviceExchangeError";originalError;message;constructor(e){this.originalError=e,this.message="Unexpected device exchange error happened."}}let U=(e,t)=>Object.keys(t).includes(e);class L extends N{constructor(e){super({tag:"GlobalCommandError",...e})}}let P={5515:{message:"Device is locked.",tag:"DeviceLockedError"},5501:{message:"Action refused on device.",tag:"ActionRefusedError"},5502:{message:"Pin is not set",tag:"PinNotSetError"},5223:{message:"Device internal error",tag:"DeviceInternalError"}};class M{static handle(e){let t=new D(e).encodeToHexaString(e.statusCode);return U(t,P)?new L({...P[t],errorCode:t}):new k({message:"UnknownError",errorCode:t})}}class j{args=void 0;triggersDisconnection=!0;getApdu(){return new w({cla:176,ins:167,p1:0,p2:0}).build()}parseResponse(e){return R.isSuccessResponse(e)?O({data:void 0}):O({error:M.handle(e)})}}class ${args=void 0;getApdu(){return new w({cla:176,ins:1,p1:0,p2:0}).build()}parseResponse(e){if(!R.isSuccessResponse(e))return O({error:M.handle(e)});let t=new D(e);if(1!==t.extract8BitUInt())return O({error:new T("getAppAndVersion: format not supported")});let r=t.encodeToString(t.extractFieldLVEncoded()),n=t.encodeToString(t.extractFieldLVEncoded());return 0===t.getUnparsedRemainingLength()?O({data:{name:r,version:n}}):O({data:{name:r,version:n,flags:t.extractFieldLVEncoded()}})}}var F=(e=>(e[e.BATTERY_PERCENTAGE=0]="BATTERY_PERCENTAGE",e[e.BATTERY_VOLTAGE=1]="BATTERY_VOLTAGE",e[e.BATTERY_TEMPERATURE=2]="BATTERY_TEMPERATURE",e[e.BATTERY_CURRENT=3]="BATTERY_CURRENT",e[e.BATTERY_FLAGS=4]="BATTERY_FLAGS",e))(F||{}),B=(e=>(e[e.NONE=0]="NONE",e[e.USB=1]="USB",e[e.QI=2]="QI",e))(B||{}),V=(e=>(e.NANO_S="nanoS",e.NANO_SP="nanoSP",e.NANO_X="nanoX",e.STAX="stax",e.FLEX="flex",e))(V||{});class G{id;model;name;constructor({id:e,model:t,name:r}){this.id=e,this.model=t,this.name=r}}let W=11415;class q{constructor(e){if(this.seFlags=e,4!==this.seFlags.length)throw Error("Invalid secure element flags length")}generalDeviceState(){let e=this.seFlags[0]??0;return{isPinValidated:this._checkNthBitInByte(e,1),hasMcuSerialNumber:this._checkNthBitInByte(e,2),hasValidCertificate:this._checkNthBitInByte(e,3),isCustomAuthorityConnectionAllowed:this._checkNthBitInByte(e,4),isSecureConnectionAllowed:this._checkNthBitInByte(e,5),isOnboarded:this._checkNthBitInByte(e,6),isMcuCodeSigned:this._checkNthBitInByte(e,7),isInRecoveryMode:this._checkNthBitInByte(e,8)}}endorsementInformation(){throw Error("Not implemented")}wordsInformation(){throw Error("Not implemented")}onboardingStatus(){throw Error("Not implemented")}_checkNthBitInByte(e,t){return(e>>8-t&1)==1}}class z{args=void 0;getApdu(){return new w({cla:224,ins:1,p1:0,p2:0}).build()}parseResponse(e,t){if(!R.isSuccessResponse(e))return O({error:M.handle(e)});let r=new D(e),n=parseInt(r.encodeToHexaString(r.extractFieldByLength(4)),16),i=r.encodeToString(r.extractFieldLVEncoded()),s=r.extractFieldLVEncoded()??new Uint8Array(0),o={...new q(s).generalDeviceState()},a=r.encodeToString(r.extractFieldLVEncoded()),c=r.encodeToString(r.extractFieldLVEncoded()),l="00";return t===V.NANO_X&&(l=r.encodeToHexaString(r.extractFieldLVEncoded())),O({data:{targetId:n,seVersion:i,seFlags:s,mcuSephVersion:a,mcuBootloaderVersion:c,hwVersion:l,langId:r.encodeToHexaString(r.extractFieldLVEncoded()),recoverState:r.encodeToHexaString(r.extractFieldLVEncoded())||"0",secureElementFlags:o}})}}let H={"422f":{message:"Incorrect structure type"},4230:{message:"Incorrect certificate version"},4231:{message:"Incorrect certificate validity"},4232:{message:"Incorrect certificate validity index"},4233:{message:"Unknown signer key ID"},4234:{message:"Unknown signature algorithm"},4235:{message:"Unknown public key ID"},4236:{message:"Unknown public key usage"},4237:{message:"Incorrect elliptic curve ID"},4238:{message:"Incorrect signature algorithm associated to the public key"},4239:{message:"Unknown target device"},"422d":{message:"Unknown certificate tag"},3301:{message:"Failed to hash data"},"422e":{message:"expected_key_usage doesn't match certificate key usage"},5720:{message:"Failed to verify signature"},4118:{message:"trusted_name buffer is too small to contain the trusted name"},ffff:{message:"Cryptography-related error"}};class X extends N{constructor({message:e,errorCode:t}){super({tag:"ProvidePkiCertificateCommandError",message:e,errorCode:t})}}class J{args;triggersDisconnection=!1;constructor(e){this.args=e}getApdu(){return new w({cla:176,ins:6,p1:this.args.keyUsage,p2:0}).addBufferToData(this.args.certificate).build()}parseResponse(e){if(R.isSuccessResponse(e))return O({data:void 0});let t=new D(e).encodeToHexaString(e.statusCode);return U(t,H)?O({error:new X({...H[t],errorCode:t})}):O({error:M.handle(e)})}}let K={"670a":{message:"No app name provided"},6807:{message:"Unknown application name"}};class Q extends N{constructor({message:e,errorCode:t}){super({tag:"OpenAppCommandError",message:e,errorCode:t})}}class Y{args;triggersDisconnection=!0;constructor(e){this.args=e}getApdu(){return new w({cla:224,ins:216,p1:0,p2:0}).addAsciiStringToData(this.args.appName).build()}parseResponse(e){if(R.isSuccessResponse(e))return O({data:void 0});let t=new D(e).encodeToHexaString(e.statusCode);return U(t,K)?O({error:new Q({...K[t],errorCode:t})}):O({error:M.handle(e)})}}var Z=(e=>(e.LOCKED="LOCKED",e.BUSY="BUSY",e.CONNECTED="CONNECTED",e.NOT_CONNECTED="NOT CONNECTED",e))(Z||{}),ee=(e=>(e.NotStarted="not-started",e.Pending="pending",e.Stopped="stopped",e.Completed="completed",e.Error="error",e))(ee||{}),et=(e=>(e.None="none",e.UnlockDevice="unlock-device",e.AllowSecureConnection="allow-secure-connection",e.ConfirmOpenApp="confirm-open-app",e.SignTransaction="sign-transaction",e.SignTypedData="sign-typed-data",e.AllowListApps="allow-list-apps",e.VerifyAddress="verify-address",e.SignPersonalMessage="sign-personal-message",e.Web3ChecksOptIn="web3-checks-opt-in",e))(et||{}),er=r(26684),en=r(94696),ei=r(63286),es=r(57497);class eo{_tag="DeviceNotOnboardedError";originalError;constructor(e){this.originalError=Error(e??"Device not onboarded.")}}class ea{_tag="DeviceLockedError";originalError;constructor(e){this.originalError=Error(e??"Device locked.")}}class ec{_tag="UnknownDAError";originalError;constructor(e){this.originalError=Error(e??"Unknown error.")}}var el=r(33300),eu=r(2913),eh=r(32224),ed=r(42948),ep=r(78159),ef=r(55199),eg=r(3429),ev=r(43414),em=r(30951),ey=r(7541),e_=(0,em.L)(function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function eb(e){throw new e_(e)}var eS=r(37457),eE=r(13377),ew=r(52812);class eA{input;inspect=!1;constructor(e){this.input=e.input,this.inspect=!!e.inspect}_execute(e){let t=this.makeStateMachine(e),r=(0,ew.A)(t,{input:this.input}),n=new eS.m,i=e=>{let{context:t,status:r,output:i,error:s}=e;switch(r){case"active":n.next({status:ee.Pending,intermediateValue:t.intermediateValue});break;case"done":i.caseOf({Left:e=>{n.next({status:ee.Error,error:e})},Right:e=>{n.next({status:ee.Completed,output:e})}}),n.complete();break;case"error":n.error(s),n.complete();break;case"stopped":n.next({status:ee.Stopped}),n.complete();break;default:this._exhaustiveMatchingGuard(r)}},s=new el.c(e=>{let t=n.subscribe(e);return()=>{o.unsubscribe(),t.unsubscribe(),r.stop()}}),o=r.subscribe(i);return r.start(),{observable:s.pipe((0,eE.u)()),cancel:()=>{r.stop(),o.unsubscribe(),i(r.getSnapshot())}}}_exhaustiveMatchingGuard(e){throw console.log("_exhaustiveMatchingGuard status",e),Error(`Unhandled status: ${e}`)}}var eD=(e=>(e[e.Connected=0]="Connected",e[e.ReadyWithoutSecureChannel=1]="ReadyWithoutSecureChannel",e[e.ReadyWithSecureChannel=2]="ReadyWithSecureChannel",e))(eD||{});class ex extends eA{makeStateMachine(e){let{getAppAndVersion:t,getDeviceSessionState:r,setDeviceSessionState:n,waitForDeviceUnlock:i,isDeviceOnboarded:s}=this.extractDependencies(e),o=this.input.unlockTimeout??6e4;return(0,en.mj)({types:{input:{unlockTimeout:o},context:{},output:{}},actors:{getAppAndVersion:(0,ei.Sx)(t),waitForDeviceUnlock:(0,ei.K_)(i)},guards:{isDeviceOnboarded:()=>s(),isDeviceUnlocked:()=>r().deviceStatus!==Z.LOCKED,hasError:({context:e})=>null!==e._internalState.error},actions:{assignErrorDeviceNotOnboarded:(0,es.a)({_internalState:e=>({...e.context._internalState,error:new eo})}),assignErrorDeviceLocked:(0,es.a)({_internalState:e=>({...e.context._internalState,error:new ea}),intermediateValue:{requiredUserInteraction:et.UnlockDevice}}),assignErrorFromEvent:(0,es.a)({_internalState:e=>({...e.context._internalState,error:e.event.error})}),assignNoUserActionNeeded:(0,es.a)({intermediateValue:e=>({...e.context.intermediateValue,requiredUserInteraction:et.None})}),assignUserActionUnlockNeeded:(0,es.a)({intermediateValue:e=>({...e.context.intermediateValue,requiredUserInteraction:et.UnlockDevice})})}}).createMachine({id:"GetDeviceStatusDeviceAction",initial:"DeviceReady",context:e=>{let t=r(),{sessionStateType:n}=t;return{input:{unlockTimeout:e.input.unlockTimeout},intermediateValue:{requiredUserInteraction:et.None},_internalState:{onboarded:!1,locked:t.deviceStatus===Z.LOCKED,currentApp:n===eD.ReadyWithoutSecureChannel?t.currentApp.name:null,currentAppVersion:null,error:null}}},states:{DeviceReady:{always:{target:"OnboardingCheck"}},OnboardingCheck:{always:[{guard:{type:"isDeviceOnboarded"},target:"LockingCheck",actions:(0,es.a)({_internalState:e=>({...e.context._internalState,onboarded:!0})})},{target:"Error",actions:"assignErrorDeviceNotOnboarded"}]},LockingCheck:{always:[{target:"AppAndVersionCheck",guard:{type:"isDeviceUnlocked"},actions:(0,es.a)({_internalState:e=>({...e.context._internalState,locked:!1})})},{target:"UserActionUnlockDevice"}]},UserActionUnlockDevice:{entry:"assignUserActionUnlockNeeded",exit:"assignNoUserActionNeeded",invoke:{id:"UserActionUnlockDevice",src:"waitForDeviceUnlock",input:e=>({unlockTimeout:o}),onDone:{target:"AppAndVersionCheck",actions:(0,es.a)({_internalState:e=>({...e.context._internalState,locked:!1})})},onError:{target:"Error",actions:"assignErrorDeviceLocked"}}},AppAndVersionCheck:{invoke:{src:"getAppAndVersion",onDone:{target:"ApplicationAvailableResultCheck",actions:(0,es.a)({_internalState:e=>{if(I(e.event.output)){let t=r();return t.sessionStateType!==eD.Connected&&n({...t,currentApp:e.event.output.data}),{...e.context._internalState,currentApp:e.event.output.data.name,currentAppVersion:e.event.output.data.version}}return{...e.context._internalState,error:e.event.output.error}}})},onError:{target:"Error",actions:"assignErrorFromEvent"}}},ApplicationAvailableResultCheck:{always:[{guard:"hasError",target:"Error"},{target:"Success"}]},Success:{type:"final"},Error:{type:"final"}},output:e=>{let{context:t}=e,{error:r,currentApp:n,currentAppVersion:i}=t._internalState;return r?(0,er.MN)(r):(0,er.xe)({currentApp:n,currentAppVersion:i})}})}extractDependencies(e){return{getAppAndVersion:()=>e.sendCommand(new $),waitForDeviceUnlock:({input:t})=>new el.c(t=>{var r,n,i,s;let o=e.getDeviceSessionStateObservable().pipe((r=e=>{e.deviceStatus===Z.CONNECTED&&(t.complete(),o.unsubscribe())},(s=(0,eu.T)(r)?{next:r,error:n,complete:i}:r)?(0,eh.N)(function(e,t){null===(r=s.subscribe)||void 0===r||r.call(s);var r,n=!0;e.subscribe((0,ed._)(t,function(e){var r;null===(r=s.next)||void 0===r||r.call(s,e),t.next(e)},function(){var e;n=!1,null===(e=s.complete)||void 0===e||e.call(s),t.complete()},function(e){var r;n=!1,null===(r=s.error)||void 0===r||r.call(s,e),t.error(e)},function(){var e,t;n&&(null===(e=s.unsubscribe)||void 0===e||e.call(s)),null===(t=s.finalize)||void 0===t||t.call(s)}))}):ep.D)).subscribe();return()=>{o.unsubscribe()}}).pipe(function(e,t){var r=(0,eg.v)(e)?{first:e}:"number"==typeof e?{each:e}:e,n=r.first,i=r.each,s=r.with,o=void 0===s?eb:s,a=r.scheduler,c=void 0===a?ef.E:a,l=r.meta,u=void 0===l?null:l;if(null==n&&null==i)throw TypeError("No timeout provided.");return(0,eh.N)(function(e,t){var r,s,a=null,l=0,h=function(e){s=(0,ey.N)(t,c,function(){try{r.unsubscribe(),(0,ev.Tg)(o({meta:u,lastValue:a,seen:l})).subscribe(t)}catch(e){t.error(e)}},e)};r=e.subscribe((0,ed._)(t,function(e){null==s||s.unsubscribe(),l++,t.next(a=e),i>0&&h(i)},void 0,void 0,function(){(null==s?void 0:s.closed)||null==s||s.unsubscribe(),a=null})),l||h(null!=n?"number"==typeof n?n:+n-c.now():i)})}(t.unlockTimeout)),getDeviceSessionState:()=>e.getDeviceSessionState(),setDeviceSessionState:t=>e.setDeviceSessionState(t),isDeviceOnboarded:()=>!0}}}class eT extends eA{makeStateMachine(e){let{closeApp:t,openApp:r,getDeviceSessionState:n,isDeviceOnboarded:i,setDeviceSessionState:s}=this.extractDependencies(e),o=new ex({input:{unlockTimeout:this.input.unlockTimeout??6e4}}).makeStateMachine(e);return(0,en.mj)({types:{input:{},context:{},output:{}},actors:{closeApp:(0,ei.Sx)(t),openApp:(0,ei.Sx)(r),getDeviceStatus:o},guards:{isDeviceOnboarded:()=>i(),isRequestedAppOpen:({context:e})=>{if(null===e._internalState.currentlyRunningApp)throw Error("context.currentlyRunningApp === null");return e._internalState.currentlyRunningApp===e.input.appName||void 0!==e.input.compatibleAppNames&&e.input.compatibleAppNames.includes(e._internalState.currentlyRunningApp)},isDashboardOpen:({context:e})=>{if(null===e._internalState.currentlyRunningApp)throw Error("context.currentlyRunningApp === null");return"BOLOS"===e._internalState.currentlyRunningApp},hasError:({context:e})=>null!==e._internalState.error},actions:{assignErrorDeviceNotOnboarded:(0,es.a)({_internalState:e=>({...e.context._internalState,error:new eo})}),assignUserActionNeededOpenApp:(0,es.a)({intermediateValue:e=>({...e.context.intermediateValue,requiredUserInteraction:et.ConfirmOpenApp})}),assignNoUserActionNeeded:(0,es.a)({intermediateValue:e=>({...e.context.intermediateValue,requiredUserInteraction:et.None})}),assignErrorFromEvent:(0,es.a)({_internalState:e=>({...e.context._internalState,error:e.event.error})}),assignNoError:(0,es.a)({_internalState:e=>({...e.context._internalState,error:null})})}}).createMachine({id:"OpenAppDeviceAction",initial:"DeviceReady",context:({input:e})=>{let t=n(),{sessionStateType:r}=t;return{input:e,intermediateValue:{requiredUserInteraction:et.None},_internalState:{error:null,currentlyRunningApp:r===eD.ReadyWithoutSecureChannel?t.currentApp.name:null}}},states:{DeviceReady:{always:{target:"OnboardingCheck"}},OnboardingCheck:{always:[{target:"GetDeviceStatus",guard:{type:"isDeviceOnboarded"}},{target:"Error",actions:"assignErrorDeviceNotOnboarded"}]},GetDeviceStatus:{invoke:{id:"deviceStatus",src:"getDeviceStatus",input:e=>({unlockTimeout:e.context.input.unlockTimeout}),onSnapshot:{actions:(0,es.a)({intermediateValue:e=>e.event.snapshot.context.intermediateValue})},onDone:{target:"CheckDeviceStatus",actions:(0,es.a)({_internalState:e=>e.event.output.caseOf({Right:t=>{let r=n();return r.sessionStateType!==eD.Connected&&s({...r,currentApp:{name:t.currentApp,version:t.currentAppVersion}}),{...e.context._internalState,currentlyRunningApp:t.currentApp}},Left:t=>({...e.context._internalState,error:t})})})}}},CheckDeviceStatus:{always:[{target:"Error",guard:"hasError"},{target:"ApplicationReady",guard:"isRequestedAppOpen"},{target:"DashboardCheck"}]},DashboardCheck:{always:[{target:"OpenApplication",guard:"isDashboardOpen"},"CloseApplication"]},OpenApplication:{entry:"assignUserActionNeededOpenApp",exit:"assignNoUserActionNeeded",invoke:{src:"openApp",input:({context:e})=>({appName:e.input.appName}),onDone:{target:"OpenApplicationResultCheck",actions:(0,es.a)({_internalState:e=>I(e.event.output)?{...e.context._internalState,currentlyRunningApp:e.context.input.appName}:{...e.context._internalState,error:e.event.output.error}})},onError:{target:"Error",actions:"assignErrorFromEvent"}}},OpenApplicationResultCheck:{always:[{target:"Error",guard:"hasError"},{target:"GetDeviceStatus"}]},CloseApplication:{invoke:{src:"closeApp",onDone:{target:"CloseApplicationResultCheck",actions:(0,es.a)({_internalState:e=>I(e.event.output)?{...e.context._internalState,currentlyRunningApp:"BOLOS"}:{...e.context._internalState,error:e.event.output.error}})},onError:{target:"Error",actions:"assignErrorFromEvent"}}},CloseApplicationResultCheck:{always:[{target:"Error",guard:"hasError"},{target:"OpenApplication"}]},ApplicationCheck:{always:[{target:"ApplicationReady",guard:"isRequestedAppOpen"},"DashboardCheck"]},ApplicationReady:{always:"Success"},Success:{type:"final",actions:"assignNoError"},Error:{type:"final"}},output:({context:e})=>e._internalState.error?(0,er.MN)(e._internalState.error):(0,er.xe)(void 0)})}extractDependencies(e){return{closeApp:async()=>e.sendCommand(new j),openApp:async t=>e.sendCommand(new Y({appName:t.input.appName})),getDeviceSessionState:()=>e.getDeviceSessionState(),setDeviceSessionState:t=>e.setDeviceSessionState(t),isDeviceOnboarded:()=>!0}}}class eC extends eA{makeStateMachine(e){let{callTask:t}=this.extractDependencies(e);return(0,en.mj)({types:{input:{},context:{},output:{}},actors:{callTask:(0,ei.Sx)(t),openAppStateMachine:new eT({input:{appName:this.input.appName,compatibleAppNames:this.input.compatibleAppNames}}).makeStateMachine(e)},guards:{noInternalError:({context:e})=>null===e._internalState.error},actions:{assignErrorFromEvent:(0,es.a)({_internalState:e=>({...e.context._internalState,error:e.event.error})})}}).createMachine({id:"CallTaskInAppDeviceAction",initial:"OpenAppDeviceAction",context:({input:e})=>({input:e,intermediateValue:{requiredUserInteraction:et.None},_internalState:{taskResponse:null,error:null}}),states:{OpenAppDeviceAction:{invoke:{id:"openAppStateMachine",input:{appName:this.input.appName,compatibleAppNames:this.input.compatibleAppNames},src:"openAppStateMachine",onSnapshot:{actions:(0,es.a)({intermediateValue:e=>e.event.snapshot.context.intermediateValue})},onDone:{actions:(0,es.a)({_internalState:e=>e.event.output.caseOf({Right:()=>e.context._internalState,Left:t=>({...e.context._internalState,error:t})})}),target:"CheckOpenAppDeviceActionResult"}}},CheckOpenAppDeviceActionResult:{always:[{target:"CallTask",guard:"noInternalError"},"Error"]},CallTask:{entry:(0,es.a)({intermediateValue:{requiredUserInteraction:this.input.requiredUserInteraction}}),exit:(0,es.a)({intermediateValue:{requiredUserInteraction:et.None}}),invoke:{id:"callTask",src:"callTask",input:e=>e.context.input.task,onDone:{target:"CallTaskResultCheck",actions:[(0,es.a)({_internalState:({event:e,context:t})=>I(e.output)?{...t._internalState,taskResponse:e.output.data}:{...t._internalState,error:e.output.error}})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},CallTaskResultCheck:{always:[{target:"Success",guard:"noInternalError"},"Error"]},Success:{type:"final"},Error:{type:"final"}},output:({context:e})=>e._internalState.taskResponse?(0,er.xe)(e._internalState.taskResponse):(0,er.MN)(e._internalState.error||new ec("No error in final state"))})}extractDependencies(e){return{callTask:t=>t.input(e)}}}class eO extends eA{makeStateMachine(e){let{sendCommand:t}=this.extractDependencies(e);return(0,en.mj)({types:{input:{},context:{},output:{}},actors:{sendCommand:(0,ei.Sx)(t),openAppStateMachine:new eT({input:{appName:this.input.appName,compatibleAppNames:this.input.compatibleAppNames}}).makeStateMachine(e)},guards:{noInternalError:({context:e})=>null===e._internalState.error},actions:{assignErrorFromEvent:(0,es.a)({_internalState:e=>({...e.context._internalState,error:e.event.error})})}}).createMachine({id:"SendCommandInAppDeviceAction",initial:"OpenAppDeviceAction",context:({input:e})=>({input:e,intermediateValue:{requiredUserInteraction:et.None},_internalState:{commandResponse:null,error:null}}),states:{OpenAppDeviceAction:{invoke:{id:"openAppStateMachine",input:{appName:this.input.appName,compatibleAppNames:this.input.compatibleAppNames},src:"openAppStateMachine",onSnapshot:{actions:(0,es.a)({intermediateValue:e=>e.event.snapshot.context.intermediateValue})},onDone:{actions:(0,es.a)({_internalState:e=>e.event.output.caseOf({Right:()=>e.context._internalState,Left:t=>({...e.context._internalState,error:t})})}),target:"CheckOpenAppDeviceActionResult"}}},CheckOpenAppDeviceActionResult:{always:[{target:"SendCommand",guard:"noInternalError"},"Error"]},SendCommand:{entry:(0,es.a)({intermediateValue:{requiredUserInteraction:this.input.requiredUserInteraction}}),exit:(0,es.a)({intermediateValue:{requiredUserInteraction:et.None}}),invoke:{id:"sendCommand",src:"sendCommand",input:({context:e})=>e.input.command,onDone:{target:"SendCommandResultCheck",actions:[(0,es.a)({_internalState:({event:e,context:t})=>I(e.output)?{...t._internalState,commandResponse:e.output.data}:{...t._internalState,error:e.output.error}})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},SendCommandResultCheck:{always:[{target:"Success",guard:"noInternalError"},"Error"]},Success:{type:"final"},Error:{type:"final"}},output:({context:e})=>e._internalState.commandResponse?(0,er.xe)(e._internalState.commandResponse):(0,er.MN)(e._internalState.error||new ec("No error in final state"))})}extractDependencies(e){return{sendCommand:t=>e.sendCommand(t.input)}}}var eI=r(15723);class eR{constructor(e,t,r,n,i){this.deviceModel=e,this.serviceUuid=t,this.writeUuid=r,this.writeCmdUuid=n,this.notifyUuid=i}}var eN=r(67312),ek=r.n(eN);class eU{id;productName;usbProductId;bootloaderUsbProductId;usbOnly;memorySize;masks;bluetoothSpec;constructor(e){this.id=e.id,this.productName=e.productName,this.usbProductId=e.usbProductId,this.bootloaderUsbProductId=e.bootloaderUsbProductId,this.usbOnly=e.usbOnly,this.memorySize=e.memorySize,this.masks=e.masks,this.bluetoothSpec=e.bluetoothSpec}getBlockSize(e){switch(this.id){case V.NANO_S:return ek().lt(ek().coerce(e)??"","2.0.0")?4096:2048;case V.NANO_X:return 4096;case V.NANO_SP:case V.STAX:case V.FLEX:return 32}}}var eL=Object.defineProperty,eP=Object.getOwnPropertyDescriptor,eM=(e,t,r)=>t in e?eL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;let ej=class{getAllDeviceModels(){return Object.values(ej.deviceModelByIds)}getDeviceModel(e){return ej.deviceModelByIds[e.id]}filterDeviceModels(e){return this.getAllDeviceModels().filter(t=>Object.entries(e).every(([e,r])=>t[e]===r))}getBluetoothServicesInfos(){return Object.values(ej.deviceModelByIds).reduce((e,t)=>{let{bluetoothSpec:r}=t;return r?{...e,...r.reduce((e,r)=>({...e,[r.serviceUuid]:new eR(t,r.serviceUuid,r.writeUuid,r.writeCmdUuid,r.notifyUuid)}),{})}:e},{})}getBluetoothServices(){return Object.values(ej.deviceModelByIds).map(e=>(e.bluetoothSpec||[]).map(e=>e.serviceUuid)).flat().filter(e=>!!e)}};((e,t,r)=>eM(e,"symbol"!=typeof t?t+"":t,r))(ej,"deviceModelByIds",{[V.NANO_S]:new eU({id:V.NANO_S,productName:"Ledger Nano S",usbProductId:16,bootloaderUsbProductId:1,usbOnly:!0,memorySize:327680,masks:[0x31100000]}),[V.NANO_SP]:new eU({id:V.NANO_SP,productName:"Ledger Nano S Plus",usbProductId:80,bootloaderUsbProductId:5,usbOnly:!0,memorySize:1569792,masks:[0x33100000]}),[V.NANO_X]:new eU({id:V.NANO_X,productName:"Ledger Nano X",usbProductId:64,bootloaderUsbProductId:4,usbOnly:!1,memorySize:2097152,masks:[0x33000000],bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]}),[V.STAX]:new eU({id:V.STAX,productName:"Ledger Stax",usbProductId:96,bootloaderUsbProductId:6,usbOnly:!1,memorySize:1569792,masks:[0x33200000],bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]}),[V.FLEX]:new eU({id:V.FLEX,productName:"Ledger Flex",usbProductId:112,bootloaderUsbProductId:7,usbOnly:!1,memorySize:1569792,masks:[0x33300000],bluetoothSpec:[{serviceUuid:"13d63400-2c97-3004-0000-4c6564676572",notifyUuid:"13d63400-2c97-3004-0001-4c6564676572",writeUuid:"13d63400-2c97-3004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-3004-0003-4c6564676572"}]})}),ej=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?eP(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&eL(t,r,s),s})([(0,eI._G)()],ej);var e$=null;"undefined"!=typeof WebSocket?e$=WebSocket:"undefined"!=typeof MozWebSocket?e$=MozWebSocket:void 0!==r.g?e$=r.g.WebSocket||r.g.MozWebSocket:"undefined"!=typeof window?e$=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(e$=self.WebSocket||self.MozWebSocket);let eF=e$;var eB=(e=>(e.GenuineCheck="GenuineCheck",e.ListInstalledApps="ListInstalledApps",e.UpdateMcu="UpdateMcu",e.UpdateFirmware="UpdateFirmware",e.InstallApp="InstallApp",e.UninstallApp="UninstallApp",e))(eB||{}),eV=(e=>(e.EXCHANGE="exchange",e.BULK="bulk",e.ERROR="error",e.WARNING="warning",e.SUCCESS="success",e))(eV||{}),eG=(e=>(e.SUCCESS="success",e.ERROR="error",e))(eG||{}),eW=(e=>(e.Opened="opened",e.Closed="closed",e.PermissionRequested="permission-requested",e.PermissionGranted="permission-granted",e.PreExchange="pre-exchange",e.Exchange="exchange",e.Progress="progress",e.Warning="warning",e.Result="result",e))(eW||{}),eq=r(36002);class ez{statusCode;data;constructor({statusCode:e,data:t}){this.statusCode=e,this.data=t}}let eH={getLastBytesFrom:(e,t)=>e.slice(-t),getFirstBytesFrom:(e,t)=>e.slice(0,t),bytesToNumber:e=>e.reduce((t,r,n)=>t+r*Math.pow(256,e.length-1-n),0),numberToByteArray:(e,t)=>new Uint8Array(t).map((r,n)=>e>>8*(t-1-n)&255)};class eX{_tag="FramerOverflowError";originalError;constructor(){this.originalError=Error("Frame header length is greater than frame size")}}class eJ{_tag="FramerApduError";originalError;constructor(){this.originalError=Error("Frame offset is greater than apdu length")}}class eK{_tag="ReceiverApduError";originalError;constructor(e){this.originalError=Error(e??"Unable to parse apdu")}}class eQ{_tag="DeviceSessionNotFound";originalError;constructor(e){this.originalError=e??Error("Device session not found")}}class eY{_header;_data;constructor({header:e,data:t}){this._header=e,this._data=t}toString(){return JSON.stringify({header:this._header.toString(),data:this._data.toString()},null,2)}getRawData(){let e=this._header.getRawData(),t=new Uint8Array(e.length+this._data.length);return t.set(e,0),t.set(this._data,e.length),t}getHeader(){return this._header}getData(){return this._data}}class eZ{_uuid;_channel;_headTag;_index;_length;_dataLength;constructor({uuid:e,dataSize:t,index:r,headTag:n,length:i,channel:s}){this._uuid=e,this._dataLength=t,this._index=r,this._headTag=n,this._length=i,this._channel=s}getDataLength(){return this._dataLength.map(e=>eH.bytesToNumber(e))}setDataSize(e){return this._dataLength=e,this}getLength(){return this._length}toString(){return JSON.stringify({uuid:this._uuid.toString(),dataSize:this._dataLength.extract()?.toString(),index:this._index.toString(),headTag:this._headTag.toString(),length:this._length.toString(),channel:this._channel.extract()?.toString()})}getRawData(){return new Uint8Array([...this._channel.caseOf({Just:e=>[...e],Nothing:()=>[]}),...this._headTag,...this._index,...this._dataLength.caseOf({Just:e=>[...e],Nothing:()=>[]})])}}let e0={LoggerPublisherServiceFactory:Symbol.for("LoggerPublisherServiceFactory")};var e1=Object.defineProperty,e2=Object.getOwnPropertyDescriptor;let e4=class{_channel;_logger;_pendingFrames;constructor({channel:e=er.bW.zero()},t){this._channel=e,this._logger=t("ApduReceiverService"),this._pendingFrames=[]}handleFrame(e){return this.getFrameFromBytes(e).map(e=>{if(this._logger.debug("handle frame",{data:{frame:e.getRawData()}}),this._pendingFrames.push(e),!this._pendingFrames[0])return er.Cl;let t=this._pendingFrames[0].getHeader().getDataLength();return this.getCompleteFrame(t)})}getCompleteFrame(e){return e.chain(e=>{if(!this.isComplete(e))return this._logger.debug("frame is not complete, waiting for more"),er.Cl;let t=eH.getFirstBytesFrom(this.concatFrames(this._pendingFrames),e),r=eH.getFirstBytesFrom(t,t.length-2),n=eH.getLastBytesFrom(t,2);return this._pendingFrames=[],(0,er.V1)(new ez({data:r,statusCode:n}))})}getFrameFromBytes(e){let t=this._channel.caseOf({Just:()=>2,Nothing:()=>0}),r=e.slice(t,t+1),n=e.slice(t+1,t+1+2),i=0===n.reduce((e,t)=>e+t,0);if(!i&&0===this._pendingFrames.length)return(0,er.MN)(new eK);let s=t+1+2,o=2*!!i;if(e.length<t+1+2+o)return(0,er.MN)(new eK("Unable to parse header from apdu"));let a=i?(0,er.V1)(e.slice(s,s+o)):er.Cl,c=e.slice(s+o),l=new eY({header:new eZ({uuid:(0,eq.A)(),channel:this._channel,dataSize:a,headTag:r,index:n,length:t+1+2+o}),data:c});return(0,er.xe)(l)}isComplete(e){return this._pendingFrames.reduce((e,t)=>e+t.getData().length,0)>=e}concatFrames(e){return e.reduce((e,t)=>Uint8Array.from([...e,...t.getData()]),new Uint8Array(0))}};e4=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?e2(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&e1(t,r,s),s})([(0,eI._G)(),(n=(0,eI.WQ)(e0.LoggerPublisherServiceFactory),(e,t)=>n(e,t,1))],e4);var e6=Object.defineProperty,e3=Object.getOwnPropertyDescriptor;let e5=class{_frameSize;_channel;_padding;_logger;constructor({frameSize:e,channel:t=er.bW.zero(),padding:r=!1},n){this._frameSize=e,this._channel=t,this._padding=r,this._logger=n("framer")}getFrames(e){let t=[],r=0,n=this.getFrameAtIndex(e,r);for(;n.isRight();)t.push(n.extract()),r+=1,n=this.getFrameAtIndex(e,r).mapLeft(e=>(e instanceof eX?this._logger.debug("Frames parsed",{data:{count:r}}):this._logger.error("Error while parsing frame",{data:{error:e}}),e));return t}getFrameAtIndex(e,t){let r=this.getFrameHeaderFrom(t,e.length),n=t*this._frameSize-this.getHeaderSizeSumFrom(t);if(n>e.length)return(0,er.MN)(new eX);if(r.getLength()>this._frameSize)return(0,er.MN)(new eJ);let i=this._frameSize-r.getLength(),s=e.slice(0===t?0:n,0===t?i:n+this._frameSize-r.getLength()),o=this._padding?new Uint8Array(i).fill(0):new Uint8Array(s.length<i?s.length:i);o.set(s,0);let a=new eY({header:r,data:o});return(0,er.xe)(a)}getFrameHeaderFrom(e,t){let r=new eZ({uuid:(0,eq.A)(),channel:this._channel.map(e=>eH.getLastBytesFrom(e,2)),headTag:new Uint8Array([5]),index:eH.numberToByteArray(e,2),length:this.getFrameHeaderSizeFromIndex(e),dataSize:er.bW.zero()});return 0===e&&r.setDataSize(er.bW.of(eH.numberToByteArray(t,2))),r}getHeaderSizeSumFrom(e){let t=this.getFrameHeaderSizeFromIndex(0),r=1;for(;r<e;)t+=this.getFrameHeaderSizeFromIndex(r),r+=1;return t}getFrameHeaderSizeFromIndex(e){return this._channel.caseOf({Just:()=>2,Nothing:()=>0})+2+1+2*(0===e)}};e5=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?e3(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&e6(t,r,s),s})([(0,eI._G)(),(i=(0,eI.WQ)(e0.LoggerPublisherServiceFactory),(e,t)=>i(e,t,1))],e5);let e7={SendCommandUseCase:Symbol.for("SendCommandUseCase")},e9={LocalConfigDataSource:Symbol.for("LocalConfigDataSource"),RemoteConfigDataSource:Symbol.for("RemoteConfigDataSource"),ConfigService:Symbol.for("ConfigService"),GetDmkVersionUseCase:Symbol.for("GetDmkVersionUseCase")},e8={ApduSenderServiceFactory:Symbol.for("ApduSenderServiceFactory"),ApduReceiverServiceFactory:Symbol.for("ApduReceiverServiceFactory"),DeviceSessionService:Symbol.for("DeviceSessionService"),GetDeviceSessionStateUseCase:Symbol.for("GetDeviceSessionStateUseCase"),DisableDeviceSessionRefresherUseCase:Symbol.for("DisableDeviceSessionRefresherUseCase"),CloseSessionsUseCase:Symbol.for("CloseSessionsUseCase")},te={StartDiscoveringUseCase:Symbol.for("StartDiscoveringUseCase"),StopDiscoveringUseCase:Symbol.for("StopDiscoveringUseCase"),ConnectUseCase:Symbol.for("ConnectUseCase"),DisconnectUseCase:Symbol.for("DisconnectUseCase"),GetConnectedDeviceUseCase:Symbol.for("GetConnectedDeviceUseCase"),ListenToAvailableDevicesUseCase:Symbol.for("ListenToAvailableDevicesUseCase"),ListenToConnectedDeviceUseCase:Symbol.for("ListenToConnectedDeviceUseCase"),ListConnectedDevicesUseCase:Symbol.for("ListConnectedDevicesUseCase")},tt={SendApduUseCase:Symbol.for("SendApduUseCase")};var tr=Object.defineProperty,tn=Object.getOwnPropertyDescriptor,ti=(e,t)=>(r,n)=>t(r,n,e);let ts=class{_sessionService;_logger;constructor(e,t){this._sessionService=e,this._logger=t("SendCommandUseCase")}async execute({sessionId:e,command:t}){return this._sessionService.getDeviceSessionById(e).caseOf({Right:async e=>await e.sendCommand(t),Left:e=>{throw this._logger.error("Error getting session",{data:{error:e}}),e}})}};ts=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?tn(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&tr(t,r,s),s})([(0,eI._G)(),ti(0,(0,eI.WQ)(e8.DeviceSessionService)),ti(1,(0,eI.WQ)(e0.LoggerPublisherServiceFactory))],ts);var to=Object.defineProperty,ta=Object.getOwnPropertyDescriptor;let tc=class{execute=vi.fn(()=>"stub")};tc=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?ta(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&to(t,r,s),s})([(0,eI._G)()],tc);let tl=({stub:e=!1}={})=>new eI.i0((t,r,n,i,s,o,a)=>{t(e7.SendCommandUseCase).to(ts),e&&i(e7.SendCommandUseCase).to(tc)});var tu=Object.defineProperty,th=Object.getOwnPropertyDescriptor,td=(e,t)=>(r,n)=>t(r,n,e);let tp=class{_sessionService;_logger;constructor(e,t){this._sessionService=e,this._logger=t("ExecuteDeviceActionUseCase")}execute({sessionId:e,deviceAction:t}){return this._sessionService.getDeviceSessionById(e).caseOf({Right:e=>e.executeDeviceAction(t),Left:e=>{throw this._logger.error("Error getting session",{data:{error:e}}),e}})}};tp=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?th(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&tu(t,r,s),s})([(0,eI._G)(),td(0,(0,eI.WQ)(e8.DeviceSessionService)),td(1,(0,eI.WQ)(e0.LoggerPublisherServiceFactory))],tp);let tf={ExecuteDeviceActionUseCase:Symbol.for("ExecuteDeviceActionUseCase")},tg=({stub:e=!1}={})=>new eI.i0((t,r,n,i,s,o,a)=>{t(tf.ExecuteDeviceActionUseCase).to(tp),e&&i(tf.ExecuteDeviceActionUseCase).to(tc)});class tv{constructor(e){this.err=e,this.originalError=e}_tag="ApiCallError";originalError}class tm{constructor(e){this.err=e,this.originalError=e}_tag="ParseResponseError";originalError}class ty{constructor(e){this.err=e,this.originalError=e}_tag="JSONParseError";originalError}class t_{constructor(e){this.err=e,this.originalError=e}_tag="ReadFileError";originalError}let tb=JSON.parse('{"UU":"@ledgerhq/device-management-kit","rE":"0.6.5"}');var tS=Object.defineProperty,tE=Object.getOwnPropertyDescriptor;let tw={name:tb.UU,version:tb.rE},tA=()=>JSON.stringify(tw),tD=class{getConfig(){return er.uu.encase(()=>tA()).mapLeft(e=>new t_(e)).chain(e=>er.uu.encase(()=>{let t=JSON.parse(e);if("object"==typeof t&&null!==t&&"version"in t&&"name"in t&&"string"==typeof t.version&&"string"==typeof t.name)return t;throw Error("Invalid config file")}).mapLeft(e=>new ty(e)))}};tD=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?tE(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&tS(t,r,s),s})([(0,eI._G)()],tD);var tx=Object.defineProperty,tT=Object.getOwnPropertyDescriptor;let tC=class{getConfig(){return er.uu.of({name:"DeviceSDK",version:"0.0.0-stub.1"})}};tC=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?tT(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&tx(t,r,s),s})([(0,eI._G)()],tC);var tO=Object.defineProperty,tI=Object.getOwnPropertyDescriptor;let tR=class{async getConfig(){let e=await this._callApi();if(e.isLeft())return(0,er.MN)(new tv(e.extract()));if(!e.extract().ok)return(0,er.MN)(new tv(Error("response not ok")));let t=await e.extract().json();return t.isLeft()?(0,er.MN)(new ty):t.chain(e=>this._parseResponse(e)).map(e=>e)}_parseResponse(e){let{name:t,version:r}=e;return t&&r?er.uu.of({name:t,version:r}):(0,er.MN)(new tm)}_callApi(){return new Promise(e=>{e(er.uu.of({ok:!0,json:async()=>new Promise(e=>{e(er.uu.of({name:"DeviceSDK",version:"0.0.0-fake.1",yolo:"yolo"}))})}))})}};tR=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?tI(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&tO(t,r,s),s})([(0,eI._G)()],tR);var tN=Object.defineProperty,tk=Object.getOwnPropertyDescriptor;let tU=class{async getConfig(){return new Promise(e=>e(er.uu.of({name:"DeviceSDK",version:"0.0.0-fake.2"})))}};tU=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?tk(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&tN(t,r,s),s})([(0,eI._G)()],tU);var tL=Object.defineProperty,tP=Object.getOwnPropertyDescriptor,tM=(e,t)=>(r,n)=>t(r,n,e);let tj=class{_local;_remote;_logger;constructor(e,t,r){this._local=e,this._remote=t,this._logger=r("config")}async getDmkConfig(){let e=this._local.getConfig().ifLeft(e=>{this._logger.error("Local config not available",{data:{error:e}})});if(e.isRight()){let t=e.extract();return this._logger.info("Local config available",{data:{config:t}}),t}return this._remote.getConfig().then(e=>e.mapLeft(e=>(this._logger.error("Local config available",{data:{error:e}}),{name:"DeadDmk",version:"0.0.0-dead.1"})).extract())}};tj=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?tP(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&tL(t,r,s),s})([(0,eI._G)(),tM(0,(0,eI.WQ)(e9.LocalConfigDataSource)),tM(1,(0,eI.WQ)(e9.RemoteConfigDataSource)),tM(2,(0,eI.WQ)(e0.LoggerPublisherServiceFactory))],tj);var t$=Object.defineProperty,tF=Object.getOwnPropertyDescriptor;let tB=class{_configService;constructor(e){this._configService=e}async getDmkVersion(){return(await this._configService.getDmkConfig()).version}};tB=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?tF(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&t$(t,r,s),s})([(0,eI._G)(),(s=(0,eI.WQ)(e9.ConfigService),(e,t)=>s(e,t,0))],tB);let tV=({stub:e})=>new eI.i0((t,r,n,i)=>{t(e9.LocalConfigDataSource).to(tD),t(e9.RemoteConfigDataSource).to(tR),t(e9.GetDmkVersionUseCase).to(tB),t(e9.ConfigService).to(tj),e&&(i(e9.LocalConfigDataSource).to(tC),i(e9.RemoteConfigDataSource).to(tU))}),tG={DeviceModelDataSource:Symbol.for("DeviceModelDataSource")},tW=({stub:e})=>new eI.i0((e,t,r,n)=>{e(tG.DeviceModelDataSource).to(ej)});var tq=Object.defineProperty,tz=Object.getOwnPropertyDescriptor,tH=(e,t)=>(r,n)=>t(r,n,e);let tX=class{constructor(e,t){this._sessionService=e,this._logger=t("DisableDeviceSessionRefresherUseCase")}_logger;execute({sessionId:e,blockerId:t}){return this._sessionService.getDeviceSessionById(e).caseOf({Left:e=>{throw this._logger.error("Error getting device session",{data:{error:e}}),e},Right:e=>e.disableRefresher(t)})}};tX=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?tz(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&tq(t,r,s),s})([(0,eI._G)(),tH(0,(0,eI.WQ)(e8.DeviceSessionService)),tH(1,(0,eI.WQ)(e0.LoggerPublisherServiceFactory))],tX);var tJ=Object.defineProperty,tK=Object.getOwnPropertyDescriptor;let tQ=class{_sessions;_logger;_sessionsSubject;constructor(e){this._sessions=[],this._sessionsSubject=new eS.m,this._logger=e("DeviceSessionService")}get sessionsObs(){return this._sessionsSubject.asObservable()}addDeviceSession(e){return this._sessions.find(t=>t.id===e.id)?this._logger.warn("DeviceSession already exists",{data:{deviceSession:e}}):(this._sessions.push(e),this._sessionsSubject.next(e),this._logger.info("DeviceSession added",{data:{deviceSession:e}})),this}removeDeviceSession(e){let t=this._sessions.find(t=>t.id===e);return t?(t.close(),this._sessions=this._sessions.filter(t=>t.id!==e),this._logger.info("DeviceSession removed",{data:{sessionId:e}})):this._logger.warn("DeviceSession not found",{data:{sessionId:e}}),this}getDeviceSessionById(e){return er.bW.fromNullable(this._sessions.find(t=>t.id===e)).toEither(new eQ)}getDeviceSessionByDeviceId(e){return er.bW.fromNullable(this._sessions.find(t=>t.connectedDevice.id===e)).toEither(new eQ)}getDeviceSessions(){return this._sessions}};tQ=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?tK(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&tJ(t,r,s),s})([(0,eI._G)(),(o=(0,eI.WQ)(e0.LoggerPublisherServiceFactory),(e,t)=>o(e,t,0))],tQ);var tY=Object.defineProperty,tZ=Object.getOwnPropertyDescriptor;let t0=class{_sessionService;constructor(e){this._sessionService=e}execute(){for(let e of this._sessionService.getDeviceSessions())e.close()}};t0=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?tZ(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&tY(t,r,s),s})([(0,eI._G)(),(a=(0,eI.WQ)(e8.DeviceSessionService),(e,t)=>a(e,t,0))],t0);var t1=Object.defineProperty,t2=Object.getOwnPropertyDescriptor,t4=(e,t)=>(r,n)=>t(r,n,e);let t6=class{_sessionService;_logger;constructor(e,t){this._sessionService=e,this._logger=t("GetDeviceSessionStateUseCase")}execute({sessionId:e}){return this._sessionService.getDeviceSessionById(e).caseOf({Left:e=>{throw this._logger.error("Error getting session device",{data:{error:e}}),e},Right:e=>e.state})}};t6=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?t2(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&t1(t,r,s),s})([(0,eI._G)(),t4(0,(0,eI.WQ)(e8.DeviceSessionService)),t4(1,(0,eI.WQ)(e0.LoggerPublisherServiceFactory))],t6);let t3=({stub:e}={stub:!1})=>new eI.i0((t,r,n,i,s,o,a)=>{t(e8.ApduSenderServiceFactory).toFactory(e=>{let t=e.container.get(e0.LoggerPublisherServiceFactory);return e=>new e5(e,t)}),t(e8.ApduReceiverServiceFactory).toFactory(e=>{let t=e.container.get(e0.LoggerPublisherServiceFactory);return (e={})=>new e4(e,t)}),t(e8.DeviceSessionService).to(tQ).inSingletonScope(),t(e8.GetDeviceSessionStateUseCase).to(t6),t(e8.CloseSessionsUseCase).to(t0),t(e8.DisableDeviceSessionRefresherUseCase).to(tX),e&&(i(e8.GetDeviceSessionStateUseCase).to(tc),i(e8.DisableDeviceSessionRefresherUseCase).to(tc))});class t5{_tag="GeneralDmkError";originalError;constructor(e){e instanceof Error?this.originalError=e:void 0!==e&&(this.originalError=Error(String(e)))}}class t7 extends t5{constructor(e){super(e),this.err=e}_tag="DeviceNotRecognizedError"}class t9 extends t5{constructor(e){super(e),this.err=e}_tag="NoAccessibleDeviceError"}class t8 extends t5{constructor(e){super(e),this.err=e}_tag="ConnectionOpeningError"}class re extends t5{constructor(e){super(e),this.err=e}_tag="UnknownDeviceError"}class rt extends t5{constructor(e){super(e),this.err=e}_tag="TransportNotSupportedError"}class rr extends t5{constructor(e){super(e),this.err=e}_tag="ReconnectionFailedError"}class rn extends t5{constructor(e){super(e),this.err=e}_tag="TransportAlreadyExistsError"}class ri extends t5{constructor(e){super(e),this.err=e}_tag="NoTransportProvidedError"}var rs=r(83302);let ro={isRefresherDisabled:!1,pollingInterval:1e3};class ra{_queue=[];_locked=!1;async lock(){return new Promise(e=>{let t=()=>{if(this._locked=!1,this._queue.length>0){let e=this._queue.shift();this._locked=!0,e()}};this._locked?this._queue.push(()=>e(t)):(this._locked=!0,e(t))})}}class rc{constructor(e,t){this._refresher=t,this._logger=e("refresher-service")}_refresherBlockers=new Set;_logger;disableRefresher(e){let t=`${e}-${(0,eq.A)()}`;this.addRefresherBlocker(t),this._logger.debug("Refresher disabled",{data:{blockerId:t,blockers:Array.from(this._refresherBlockers)}});let r=!1;return()=>{r||(r=!0,this.removeRefresherBlocker(t),this._logger.debug("Refresher re-enabled",{data:{blockerId:t,blockers:Array.from(this._refresherBlockers)}}))}}addRefresherBlocker(e){let t=this._refresherBlockers.size;this._refresherBlockers.add(e),0===t&&this._refresher.stop()}removeRefresherBlocker(e){let t=this._refresherBlockers.size;this._refresherBlockers.delete(e),t>0&&0===this._refresherBlockers.size&&this._refresher.start()}}var rl=r(90061),ru=(e=>(e.NEW_STATE="NEW_STATE",e.REFRESH_NEEDED="REFRESH_NEEDED",e.COMMAND_SUCCEEDED="COMMAND_SUCCEEDED",e.DEVICE_STATE_UPDATE_BUSY="DEVICE_STATE_UPDATE_BUSY",e.DEVICE_STATE_UPDATE_LOCKED="DEVICE_STATE_UPDATE_LOCKED",e.DEVICE_STATE_UPDATE_CONNECTED="DEVICE_STATE_UPDATE_CONNECTED",e))(ru||{});class rh{_eventEmitter=new rl.B;listen(){return this._eventEmitter.asObservable()}dispatch(e){this._eventEmitter.next(e)}}class rd{constructor(e,t,r,n){this.connectedDevice=t,this._sessionEventDispatcher=r,this._sendCommandFunction=n,this._logger=e("device-pinger"),this._subscription=this._sessionEventDispatcher.listen().subscribe(async e=>await this.mapEventAction(e))}_sendCommandFunction;_subscription;_logger;async ping(){try{return await this.mapDevicePingAction(this.connectedDevice.deviceModel.id)}catch(e){throw this._logger.error("Error while pinging device",{data:{error:e}}),e}}mapEventAction=async e=>e.eventName===ru.REFRESH_NEEDED?await this.ping():null;async mapDevicePingAction(e){if(e===V.NANO_S){let e=(async()=>{let e=await this._sendCommandFunction(new $);return this._sendCommandFunction(new z),e})(),t=new Promise(e=>{setTimeout(()=>e(null),2100)}),r=await Promise.race([e,t]);return r?this._sessionEventDispatcher.dispatch({eventName:ru.COMMAND_SUCCEEDED,eventData:r}):this._sessionEventDispatcher.dispatch({eventName:ru.DEVICE_STATE_UPDATE_LOCKED}),r}{let e=await this._sendCommandFunction(new $);return this._sessionEventDispatcher.dispatch({eventName:ru.COMMAND_SUCCEEDED,eventData:e}),e}}unsubscribe(){this._subscription.unsubscribe()}}var rp=r(22079);class rf{constructor(e,t,r,n){this._sessionEventDispatcher=r,this._refresherOptions=t,this._logger=e("device-session-refresher"),this._connectedDeviceID=n.deviceModel.id}_refresherSubscription;_refresherOptions;_logger;_connectedDeviceID;startRefresher(){if(this._refresherOptions.isRefresherDisabled)return;let e=2*this.getValidPollingInterval(this._refresherOptions,this._logger);this._refresherSubscription=(0,rp.O)(0,e).subscribe(()=>{this._sessionEventDispatcher.dispatch({eventName:ru.REFRESH_NEEDED})})}stopRefresher(){this._refresherSubscription&&(this._refresherSubscription.unsubscribe(),this._refresherSubscription=void 0,this._logger.info("Refresher stopped."))}restartRefresher(){this.stopRefresher(),this.startRefresher(),this._logger.info("Refresher restarted.")}destroy(){this.stopRefresher()}getValidPollingInterval=(e,t)=>{let{pollingInterval:r}=e;return this._connectedDeviceID===V.NANO_S?void 0!==r&&r<2e3?(t.warn(`Polling interval of ${r} is too low, setting to minimum as 2000`),2e3):r??2e3:void 0!==r&&r<1e3?(t.warn(`Polling interval of ${r} is too low, setting to minimum as 1000`),1e3):r??1e3}}class rg{constructor(e,t,r,n,i){this._sessionEventDispatcher=t,this._connectedDevice=r,this._deviceState=n,this.setDeviceSessionState=i,this._subscription=this._sessionEventDispatcher.listen().subscribe(e=>this.mapEventAction(e)),this._logger=e("device-session-state-handler")}_subscription;_logger;_updateDeviceState(e){let t=this._parseDeviceStatus(e);if(t){let{sessionStateType:e,deviceStatus:r,currentApp:n}=t;this.setDeviceSessionState({sessionStateType:e,deviceStatus:r,deviceModelId:this._connectedDevice.deviceModel.id,currentApp:n,installedApps:[],isSecureConnectionAllowed:!1})}}mapEventAction=e=>{switch(e.eventName){case ru.COMMAND_SUCCEEDED:return this._updateDeviceState(e.eventData);case ru.DEVICE_STATE_UPDATE_BUSY:return this.setDeviceSessionState({...this._deviceState.getValue(),deviceStatus:Z.BUSY});case ru.DEVICE_STATE_UPDATE_LOCKED:return this.setDeviceSessionState({...this._deviceState.getValue(),deviceStatus:Z.LOCKED});case ru.DEVICE_STATE_UPDATE_CONNECTED:return this.setDeviceSessionState({...this._deviceState.getValue(),deviceStatus:Z.CONNECTED});default:return null}};_parseDeviceStatus(e){return I(e)?{sessionStateType:eD.ReadyWithoutSecureChannel,deviceStatus:Z.CONNECTED,currentApp:{name:e.data.name,version:e.data.version}}:(this._logger.error("Error while parsing APDU response",{data:{parsedResponse:e}}),null)}unsubscribe(){this._subscription.unsubscribe()}}class rv{_id;_connectedDevice;_deviceState;_managerApiService;_secureChannelService;_logger;_refresherOptions;_pinger;_deviceSessionRefresher;_refresherService;_commandMutex=new ra;_sessionEventDispatcher=new rh;constructor({connectedDevice:e,id:t=(0,eq.A)()},r,n,i,s){this._id=t,this._connectedDevice=e,this._logger=r("device-session"),this._managerApiService=n,this._secureChannelService=i,this._refresherOptions={...ro,...s},this._deviceState=new rs.t({sessionStateType:eD.Connected,deviceStatus:Z.CONNECTED,deviceModelId:this._connectedDevice.deviceModel.id}),this._pinger=new rd(r,e,this._sessionEventDispatcher,e=>this.sendCommand(e)),this._deviceSessionRefresher=new rf(r,this._refresherOptions,this._sessionEventDispatcher,this._connectedDevice),new rg(r,this._sessionEventDispatcher,this._connectedDevice,this._deviceState,e=>this.setDeviceSessionState(e)),this._refresherService=new rc(r,{start:()=>this._deviceSessionRefresher.restartRefresher(),stop:()=>this._deviceSessionRefresher.stopRefresher()})}async initialiseSession(){try{await this._pinger.ping()}catch(e){throw this._logger.error("Error while initialising session",{data:{error:e}}),e}finally{this._refresherOptions.isRefresherDisabled||this._deviceSessionRefresher.startRefresher()}}get id(){return this._id}get connectedDevice(){return this._connectedDevice}get state(){return this._deviceState.asObservable()}setDeviceSessionState(e){this._deviceState.next(e)}async sendApdu(e,t={isPolling:!1,triggersDisconnection:!1}){let r=await this._commandMutex.lock();try{this._sessionEventDispatcher.dispatch({eventName:ru.DEVICE_STATE_UPDATE_BUSY});let r=await this._connectedDevice.sendApdu(e,t.triggersDisconnection);return r.ifRight(e=>{R.isLockedDeviceResponse(e)?this._sessionEventDispatcher.dispatch({eventName:ru.DEVICE_STATE_UPDATE_LOCKED}):this._sessionEventDispatcher.dispatch({eventName:ru.DEVICE_STATE_UPDATE_CONNECTED})}).ifLeft(()=>{this._sessionEventDispatcher.dispatch({eventName:ru.DEVICE_STATE_UPDATE_CONNECTED})}),r}finally{r()}}async sendCommand(e){let t=e.getApdu();return(await this.sendApdu(t.getRawApdu(),{isPolling:!1,triggersDisconnection:e.triggersDisconnection??!1})).caseOf({Left:e=>{throw e},Right:t=>e.parseResponse(t,this._connectedDevice.deviceModel.id)})}executeDeviceAction(e){let{observable:t,cancel:r}=e._execute({sendApdu:async e=>this.sendApdu(e),sendCommand:async e=>this.sendCommand(e),getDeviceSessionState:()=>this._deviceState.getValue(),getDeviceSessionStateObservable:()=>this.state,setDeviceSessionState:e=>(this.setDeviceSessionState(e),this._deviceState.getValue()),disableRefresher:e=>this._refresherService.disableRefresher(e),getManagerApiService:()=>this._managerApiService,getSecureChannelService:()=>this._secureChannelService});return{observable:t,cancel:r}}close(){this._updateDeviceStatus(Z.NOT_CONNECTED),this._deviceState.complete(),this._deviceSessionRefresher.stopRefresher()}disableRefresher(e){return this._refresherService.disableRefresher(e)}_updateDeviceStatus(e){let t=this._deviceState.getValue();this._deviceState.next({...t,deviceStatus:e})}}let rm={ManagerApiService:Symbol.for("ManagerApiService"),ManagerApiDataSource:Symbol.for("ManagerApiDataSource"),DmkConfig:Symbol.for("ManagerApiDmkConfig")},ry={SecureChannelService:Symbol.for("SecureChannelService"),SecureChannelDataSource:Symbol.for("SecureChannelDataSource"),DmkConfig:Symbol.for("SecureChannelDmkConfig")},r_={DmkConfig:Symbol.for("TransportDmkConfig"),TransportService:Symbol.for("TransportService"),TransportsInput:Symbol.for("TransportsInput")};var rb=Object.defineProperty,rS=Object.getOwnPropertyDescriptor,rE=(e,t)=>(r,n)=>t(r,n,e);let rw=class{_transportService;_sessionService;_loggerFactory;_managerApi;_secureChannel;_logger;constructor(e,t,r,n,i){this._sessionService=t,this._transportService=e,this._loggerFactory=r,this._logger=r("ConnectUseCase"),this._managerApi=n,this._secureChannel=i}handleDeviceDisconnect(e){this._sessionService.getDeviceSessionByDeviceId(e).map(e=>{this._sessionService.removeDeviceSession(e.id)})}async execute({device:e,sessionRefresherOptions:t}){let r=this._transportService.getTransport(e.transport);return er.o3.liftEither(r.toEither(new rt(Error("Unknown transport")))).chain(async t=>t.connect({deviceId:e.id,onDisconnect:e=>this.handleDeviceDisconnect(e)})).ifLeft(t=>{this._logger.error("Error connecting to device",{data:{deviceId:e.id,error:t}})}).map(async e=>{let r=new rv({connectedDevice:e},this._loggerFactory,this._managerApi,this._secureChannel,t);return this._sessionService.addDeviceSession(r),await r.initialiseSession(),r.id}).caseOf({Left:e=>{throw e},Right:e=>e})}};rw=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?rS(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&rb(t,r,s),s})([(0,eI._G)(),rE(0,(0,eI.WQ)(r_.TransportService)),rE(1,(0,eI.WQ)(e8.DeviceSessionService)),rE(2,(0,eI.WQ)(e0.LoggerPublisherServiceFactory)),rE(3,(0,eI.WQ)(rm.ManagerApiService)),rE(4,(0,eI.WQ)(ry.SecureChannelService))],rw);var rA=Object.defineProperty,rD=Object.getOwnPropertyDescriptor,rx=(e,t)=>(r,n)=>t(r,n,e);let rT=class{_transportService;_sessionService;_logger;constructor(e,t,r){this._sessionService=t,this._transportService=e,this._logger=r("DisconnectUseCase")}async execute({sessionId:e}){return(0,er.o3)(async({liftEither:t})=>{let r=await t(this._sessionService.getDeviceSessionById(e).ifLeft(t=>{this._logger.error("Device session not found",{data:{sessionId:e,error:t}})})),n=r.connectedDevice.transport,i=await t(this._transportService.getTransport(n).toEither(new rt(Error("Unknown transport"))));r.close(),this._sessionService.removeDeviceSession(e),await i.disconnect({connectedDevice:r.connectedDevice})}).caseOf({Left:e=>{throw this._logger.error("Error disconnecting from device",{data:{error:e}}),e},Right:()=>{}})}};rT=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?rD(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&rA(t,r,s),s})([(0,eI._G)(),rx(0,(0,eI.WQ)(r_.TransportService)),rx(1,(0,eI.WQ)(e8.DeviceSessionService)),rx(2,(0,eI.WQ)(e0.LoggerPublisherServiceFactory))],rT);class rC{id;sessionId;modelId;name;type;constructor({transportConnectedDevice:{id:e,deviceModel:{id:t,productName:r},type:n},sessionId:i}){this.id=e,this.sessionId=i,this.modelId=t,this.name=r,this.type=n}}var rO=Object.defineProperty,rI=Object.getOwnPropertyDescriptor,rR=(e,t)=>(r,n)=>t(r,n,e);let rN=class{_sessionService;_logger;constructor(e,t){this._sessionService=e,this._logger=t("GetConnectedDeviceUseCase")}execute({sessionId:e}){return this._sessionService.getDeviceSessionById(e).caseOf({Right:e=>new rC({sessionId:e.id,transportConnectedDevice:e.connectedDevice}),Left:e=>{throw this._logger.error("Error getting session",{data:{error:e}}),e}})}};rN=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?rI(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&rO(t,r,s),s})([(0,eI._G)(),rR(0,(0,eI.WQ)(e8.DeviceSessionService)),rR(1,(0,eI.WQ)(e0.LoggerPublisherServiceFactory))],rN);var rk=Object.defineProperty,rU=Object.getOwnPropertyDescriptor,rL=(e,t)=>(r,n)=>t(r,n,e);let rP=class{_sessionService;_logger;constructor(e,t){this._sessionService=e,this._logger=t("ListConnectedDeviceUseCase")}execute(){return this._logger.info("Listing connected devices"),this._sessionService.getDeviceSessions().map(e=>new rC({transportConnectedDevice:e.connectedDevice,sessionId:e.id}))}};rP=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?rU(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&rk(t,r,s),s})([(0,eI._G)(),rL(0,(0,eI.WQ)(e8.DeviceSessionService)),rL(1,(0,eI.WQ)(e0.LoggerPublisherServiceFactory))],rP);var rM=r(82663),rj=r(32940),r$=r(50994),rF=r(16024);function rB(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(0,rF.lI)(e);return(0,rM.H)(e,r)}var rV=Object.defineProperty,rG=Object.getOwnPropertyDescriptor,rW=(e,t)=>(r,n)=>t(r,n,e);let rq=class{_transports;_transportService;_logger;constructor(e,t){this._transports=e.getAllTransports(),this._transportService=e,this._logger=t("ListenToAvailableDevicesUseCase")}mapTransportDiscoveredDeviceToDiscoveredDevice(e){let t=new G({id:e.id,model:e.deviceModel.id,name:e.deviceModel.productName});return{id:e.id,deviceModel:t,transport:e.transport,name:e.name||t.name,rssi:e.rssi}}execute({transport:e}){if(this._logger.info("Listening to available devices"),0===this._transports.length)return this._logger.warn("No transports available"),(0,rM.H)([[]]);if(!e){this._logger.info("Discovering all available transports");let e=this._transports.map((e,t)=>e.listenToAvailableDevices().pipe((0,rj.T)(e=>({index:t,arr:e}))));return(0,r$.h)(...e).pipe(function(e,t){var r;return(0,eh.N)((r=arguments.length>=2,function(n,i){var s=r,o=t,a=0;n.subscribe((0,ed._)(i,function(t){var r=a++;o=s?e(o,t,r):(s=!0,t),i.next(o)},void 0))}))}((e,{index:t,arr:r})=>(e[t]=r,e),{}),(0,rj.T)(e=>Object.values(e).flat().map(this.mapTransportDiscoveredDeviceToDiscoveredDevice)))}return this._logger.info(`Discovering devices on transport ${e}`),this._transportService.getTransport(e).caseOf({Nothing:()=>(this._logger.error(`Transport ${e} not found`),rB([])),Just:e=>e.listenToAvailableDevices().pipe((0,rj.T)(e=>e.map(this.mapTransportDiscoveredDeviceToDiscoveredDevice)))})}};rq=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?rG(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&rV(t,r,s),s})([(0,eI._G)(),rW(0,(0,eI.WQ)(r_.TransportService)),rW(1,(0,eI.WQ)(e0.LoggerPublisherServiceFactory))],rq);var rz=Object.defineProperty,rH=Object.getOwnPropertyDescriptor,rX=(e,t)=>(r,n)=>t(r,n,e);let rJ=class{constructor(e,t){this._sessionService=e,this._logger=t("ListenToConnectedDeviceUseCase")}_logger;execute(){return this._logger.info("Observe connected devices"),this._sessionService.sessionsObs.pipe((0,rj.T)(e=>new rC({transportConnectedDevice:e.connectedDevice,sessionId:e.id})))}};rJ=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?rH(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&rz(t,r,s),s})([(0,eI._G)(),rX(0,(0,eI.WQ)(e8.DeviceSessionService)),rX(1,(0,eI.WQ)(e0.LoggerPublisherServiceFactory))],rJ);var rK=r(53112),rQ=Object.defineProperty,rY=Object.getOwnPropertyDescriptor;let rZ=class{constructor(e){this._transportService=e}mapDiscoveredDevice(e){let t=new G({id:e.id,model:e.deviceModel.id,name:e.deviceModel.productName});return{id:e.id,deviceModel:t,transport:e.transport}}execute({transport:e}){return e?this._transportService.getTransport(e).caseOf({Just:e=>e.startDiscovering().pipe((0,rj.T)(e=>this.mapDiscoveredDevice(e))),Nothing:()=>{throw new rt(Error("Unknown transport"))}}):rB(...this._transportService.getAllTransports()).pipe((0,rK.Z)(e=>e.startDiscovering().pipe((0,rj.T)(e=>this.mapDiscoveredDevice(e)))))}};rZ=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?rY(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&rQ(t,r,s),s})([(0,eI._G)(),(c=(0,eI.WQ)(r_.TransportService),(e,t)=>c(e,t,0))],rZ);var r0=Object.defineProperty,r1=Object.getOwnPropertyDescriptor;let r2=class{constructor(e){this.transportService=e}execute(){for(let e of this.transportService.getAllTransports())e.stopDiscovering()}};r2=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?r1(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&r0(t,r,s),s})([(0,eI._G)(),(l=(0,eI.WQ)(r_.TransportService),(e,t)=>l(e,t,0))],r2);let r4=({stub:e=!1})=>new eI.i0((t,r,n,i)=>{t(te.ConnectUseCase).to(rw),t(te.DisconnectUseCase).to(rT),t(te.StartDiscoveringUseCase).to(rZ),t(te.StopDiscoveringUseCase).to(r2),t(te.GetConnectedDeviceUseCase).to(rN),t(te.ListenToAvailableDevicesUseCase).to(rq),t(te.ListenToConnectedDeviceUseCase).to(rJ),t(te.ListConnectedDevicesUseCase).to(rP),e&&(i(te.StartDiscoveringUseCase).to(tc),i(te.StopDiscoveringUseCase).to(tc),i(te.ConnectUseCase).to(tc),i(te.DisconnectUseCase).to(tc),i(te.GetConnectedDeviceUseCase).to(tc),i(te.ListenToAvailableDevicesUseCase).to(tc),i(te.ListenToConnectedDeviceUseCase).to(tc),i(te.ListConnectedDevicesUseCase).to(tc))});var r6=(e=>(e[e.Fatal=0]="Fatal",e[e.Error=1]="Error",e[e.Warning=2]="Warning",e[e.Info=3]="Info",e[e.Debug=4]="Debug",e))(r6||{}),r3=Object.defineProperty,r5=Object.getOwnPropertyDescriptor;let r7=class{subscribers;tag;constructor(e,t){this.subscribers=e,this.tag=t}_log(e,t,r){this.subscribers.forEach(n=>{let i={timestamp:Date.now(),tag:this.tag,...r};n.log(e,t,i)})}info(e,t){this._log(r6.Info,e,t)}warn(e,t){this._log(r6.Warning,e,t)}debug(e,t){this._log(r6.Debug,e,t)}error(e,t){this._log(r6.Error,e,t)}};r7=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?r5(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&r3(t,r,s),s})([(0,eI._G)()],r7);let r9=({subscribers:e}={subscribers:[]})=>new eI.i0((t,r,n,i,s,o,a)=>{t(e0.LoggerPublisherServiceFactory).toFactory(t=>t=>new r7(e,t))});var r8=r(75119),ne=(e=>(e.currency="currency",e.plugin="plugin",e.tool="tool",e.swap="swap",e))(ne||{});class nt{constructor(e){this.error=e,this.originalError=e}_tag="FetchError";originalError}var nr=(e=>(e.currency="currency",e.plugin="plugin",e.tool="tool",e.swap="swap",e))(nr||{}),nn=Object.defineProperty,ni=Object.getOwnPropertyDescriptor;let ns=class{managerApiBaseUrl;constructor({managerApiUrl:e}){this.managerApiBaseUrl=e}getAppList(e){let{targetId:t,provider:r,firmwareVersionName:n}=e;return(0,er.o3)(()=>r8.A.get(`${this.managerApiBaseUrl}/v2/apps/by-target`,{params:{target_id:t,provider:r,firmware_version_name:n}})).map(e=>e.data).mapLeft(e=>new nt(e))}getDeviceVersion(e){let{targetId:t,provider:r}=e;return(0,er.o3)(()=>r8.A.get(`${this.managerApiBaseUrl}/get_device_version`,{params:{target_id:t,provider:r}})).map(e=>e.data).mapLeft(e=>new nt(e))}getFirmwareVersion(e){let{deviceId:t,version:r,provider:n}=e;return(0,er.o3)(()=>r8.A.get(`${this.managerApiBaseUrl}/get_firmware_version`,{params:{device_version:t,version_name:r,provider:n}})).map(e=>e.data).mapLeft(e=>new nt(e))}getAppsByHash(e){let{hashes:t}=e;return(0,er.o3)(()=>r8.A.post(`${this.managerApiBaseUrl}/v2/apps/hash`,t)).map(e=>e.data).map(e=>this.mapApplicationDtoToApplication(e)).mapLeft(e=>new nt(e))}mapAppTypeDtoToAppType(e){switch(e){case nr.currency:return ne.currency;case nr.plugin:return ne.plugin;case nr.tool:return ne.tool;case nr.swap:return ne.swap}}mapApplicationDtoToApplication(e){return e.map(e=>{if(null===e)return null;let{applicationType:t,...r}=e;return{...r,applicationType:this.mapAppTypeDtoToAppType(t)}})}};ns=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?ni(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&nn(t,r,s),s})([(0,eI._G)(),(u=(0,eI.WQ)(rm.DmkConfig),(e,t)=>u(e,t,0))],ns);var no=Object.defineProperty,na=Object.getOwnPropertyDescriptor;let nc=class{constructor(e){this.dataSource=e}getAppList(e,t){let r={targetId:e.targetId.toString(),provider:t,firmwareVersionName:e.seVersion};return this.dataSource.getAppList(r)}getDeviceVersion(e,t){let r={targetId:e.targetId.toString(),provider:t};return this.dataSource.getDeviceVersion(r)}getFirmwareVersion(e,t,r){let n={version:e.seVersion,deviceId:t.id,provider:r};return this.dataSource.getFirmwareVersion(n)}getAppsByHash(e){let t={hashes:e};return(0,er.o3)(async({fromPromise:e,throwE:r})=>{if(0===t.hashes.length)return[];try{return await e(this.dataSource.getAppsByHash(t))}catch(e){return r(e instanceof nt?e:new nt(e))}})}};nc=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?na(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&no(t,r,s),s})([(0,eI._G)(),(h=(0,eI.WQ)(rm.ManagerApiDataSource),(e,t)=>h(e,t,0))],nc);let nl=({stub:e,config:t})=>new eI.i0((r,n,i,s)=>{r(rm.DmkConfig).toConstantValue(t),r(rm.ManagerApiDataSource).to(ns),r(rm.ManagerApiService).to(nc),e&&(s(rm.ManagerApiDataSource).to(tc),s(rm.ManagerApiService).to(tc))}),nu="https://manager.api.live.ledger.com/api",nh="http://localhost:8080";var nd=r(3305),np=r.n(nd);class nf{constructor(e){this.error=e,this.originalError=e}_tag="WebSocketConnectionError";originalError}var ng=Object.defineProperty,nv=Object.getOwnPropertyDescriptor;let nm=class{webSocketBaseUrl;constructor({webSocketUrl:e}){this.webSocketBaseUrl=e}genuineCheck(e){let t=np().format({pathname:`${this.webSocketBaseUrl}/genuine`,query:e});return this._connectWebSocket(t)}installApp(e){let t=np().format({pathname:`${this.webSocketBaseUrl}/install`,query:e});return this._connectWebSocket(t)}listInstalledApps(e){let t=np().format({pathname:`${this.webSocketBaseUrl}/apps/list`,query:e});return this._connectWebSocket(t)}uninstallApp(e){let t=np().format({pathname:`${this.webSocketBaseUrl}/install`,query:e});return this._connectWebSocket(t)}updateFirmware(e){let t=np().format({pathname:`${this.webSocketBaseUrl}/install`,query:e});return this._connectWebSocket(t)}updateMcu(e){let t=np().format({pathname:`${this.webSocketBaseUrl}/mcu`,query:e});return this._connectWebSocket(t)}_connectWebSocket(e){try{return(0,er.xe)(new eF(e))}catch(e){return(0,er.MN)(new nf(e))}}};nm=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?nv(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&ng(t,r,s),s})([(0,eI._G)(),(d=(0,eI.WQ)(ry.DmkConfig),(e,t)=>d(e,t,0))],nm);var ny=Object.defineProperty,n_=Object.getOwnPropertyDescriptor;let nb=class{constructor(e){this.dataSource=e}genuineCheck(e,t){let r={targetId:e.targetId.toString(),perso:t.perso};return this.dataSource.genuineCheck(r)}installApp(e,t){let{perso:r,firmware:n,firmwareKey:i,hash:s}=t,o={targetId:e.targetId.toString(),perso:r,firmware:n,firmwareKey:i,hash:s};return this.dataSource.installApp(o)}listInstalledApps(e,t){let r={targetId:e.targetId.toString(),perso:t.perso};return this.dataSource.listInstalledApps(r)}uninstallApp(e,t){let{perso:r,delete:n,deleteKey:i,hash:s}=t,o={targetId:e.targetId.toString(),perso:r,firmware:n,firmwareKey:i,hash:s};return this.dataSource.uninstallApp(o)}updateFirmware(e,t){let r={targetId:e.targetId.toString(),perso:t.perso,firmware:t.firmware,firmwareKey:t.firmwareKey};return this.dataSource.updateFirmware(r)}updateMcu(e,t){let r={targetId:e.targetId.toString(),version:t.version};return this.dataSource.updateMcu(r)}};nb=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?n_(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&ny(t,r,s),s})([(0,eI._G)(),(p=(0,eI.WQ)(ry.SecureChannelDataSource),(e,t)=>p(e,t,0))],nb);let nS=({stub:e,config:t})=>new eI.i0((e,r,n,i)=>{e(ry.DmkConfig).toConstantValue(t),e(ry.SecureChannelDataSource).to(nm),e(ry.SecureChannelService).to(nb)}),nE="wss://scriptrunner.api.live.ledger.com/update";var nw=Object.defineProperty,nA=Object.getOwnPropertyDescriptor,nD=(e,t)=>(r,n)=>t(r,n,e);let nx=class{_sessionService;_logger;constructor(e,t){this._sessionService=e,this._logger=t("SendApduUseCase")}async execute({sessionId:e,apdu:t}){return this._sessionService.getDeviceSessionById(e).caseOf({Right:async r=>(await r.sendApdu(t)).caseOf({Right:e=>e,Left:r=>{throw this._logger.error("Error sending APDU",{data:{sessionId:e,apdu:t,error:r}}),r}}),Left:e=>{throw this._logger.error("Error getting deviceSession",{data:{error:e}}),e}})}};nx=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?nA(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&nw(t,r,s),s})([(0,eI._G)(),nD(0,(0,eI.WQ)(e8.DeviceSessionService)),nD(1,(0,eI.WQ)(e0.LoggerPublisherServiceFactory))],nx);let nT=({stub:e=!1})=>new eI.i0((t,r,n,i,s,o,a)=>{t(tt.SendApduUseCase).to(nx),e&&i(tt.SendApduUseCase).to(tc)});var nC=Object.defineProperty,nO=Object.getOwnPropertyDescriptor,nI=(e,t)=>(r,n)=>t(r,n,e);let nR=class{constructor(e,t,r,n,i,s){if(this._config=t,this._loggerModuleFactory=r,this._deviceModelDataSource=n,this._apduSenderServiceFactory=i,this._apduReceiverServiceFactory=s,this._logger=r("TransportService"),0===e.length)throw this._logger.warn("No transports provided, please check your configuration"),new ri("No transports provided, please check your configuration");for(let t of e){let e=this.addTransport(t);if(e.isLeft())throw e.extract()}}_transports=new Map;_logger;addTransport(e){let t=e({deviceModelDataSource:this._deviceModelDataSource,loggerServiceFactory:this._loggerModuleFactory,config:this._config,apduSenderServiceFactory:this._apduSenderServiceFactory,apduReceiverServiceFactory:this._apduReceiverServiceFactory});return this.addTransportInternal(t)}addTransportInternal(e){return this.getTransport(e.getIdentifier()).isJust()?(this._logger.warn(`Transport ${e.getIdentifier()} already exists, please check your configuration`),(0,er.MN)(new rn(`Transport ${e.getIdentifier()} already exists, please check your configuration`))):(this._transports.set(e.getIdentifier(),e),(0,er.xe)(void 0))}getTransport(e){return er.bW.fromNullable(this._transports.get(e))}getAllTransports(){return Array.from(this._transports.values())}};nR=((e,t,r,n)=>{for(var i,s=n>1?void 0:n?nO(t,r):t,o=e.length-1;o>=0;o--)(i=e[o])&&(s=(n?i(t,r,s):i(s))||s);return n&&s&&nC(t,r,s),s})([(0,eI._G)(),nI(0,(0,eI.WQ)(r_.TransportsInput)),nI(1,(0,eI.WQ)(r_.DmkConfig)),nI(2,(0,eI.WQ)(e0.LoggerPublisherServiceFactory)),nI(3,(0,eI.WQ)(tG.DeviceModelDataSource)),nI(4,(0,eI.WQ)(e8.ApduSenderServiceFactory)),nI(5,(0,eI.WQ)(e8.ApduReceiverServiceFactory))],nR);let nN=({stub:e=!1,transports:t=[],config:r}={})=>new eI.i0((e,n,i,s)=>{e(r_.TransportsInput).toConstantValue(t),e(r_.TransportService).to(nR).inSingletonScope(),e(r_.DmkConfig).toConstantValue(r)}),nk=({stub:e=!1,transports:t=[],loggers:r=[],config:n={mockUrl:nh,managerApiUrl:nu,webSocketUrl:nE}})=>{let i=new eI.mc;return i.load(tV({stub:e}),tW({stub:e}),nN({stub:e,transports:t,config:n}),nl({stub:e,config:n}),nS({stub:e,config:n}),r4({stub:e}),r9({subscribers:r}),t3({stub:e}),nT({stub:e}),tl({stub:e}),tg({stub:e})),i};class nU{container;constructor({stub:e,transports:t,loggers:r,config:n}={}){this.container=nk({stub:e,transports:t,loggers:r,config:n})}getVersion(){return this.container.get(e9.GetDmkVersionUseCase).getDmkVersion()}startDiscovering(e){return this.container.get(te.StartDiscoveringUseCase).execute(e)}stopDiscovering(){return this.container.get(te.StopDiscoveringUseCase).execute()}listenToAvailableDevices(e){return this.container.get(te.ListenToAvailableDevicesUseCase).execute(e)}connect(e){return this.container.get(te.ConnectUseCase).execute(e)}disconnect(e){return this.container.get(te.DisconnectUseCase).execute(e)}sendApdu(e){return this.container.get(tt.SendApduUseCase).execute(e)}sendCommand(e){return this.container.get(e7.SendCommandUseCase).execute(e)}executeDeviceAction(e){return this.container.get(tf.ExecuteDeviceActionUseCase).execute(e)}getConnectedDevice(e){return this.container.get(te.GetConnectedDeviceUseCase).execute(e)}getDeviceSessionState(e){return this.container.get(e8.GetDeviceSessionStateUseCase).execute(e)}close(){return this.container.get(e8.CloseSessionsUseCase).execute()}listConnectedDevices(){return this.container.get(te.ListConnectedDevicesUseCase).execute()}listenToConnectedDevice(){return this.container.get(te.ListenToConnectedDeviceUseCase).execute()}disableDeviceSessionRefresher(e){return this.container.get(e8.DisableDeviceSessionRefresherUseCase).execute(e)}}class nL{stub=!1;loggers=[];transports=[];config={managerApiUrl:nu,mockUrl:nh,webSocketUrl:nE};build(){return new nU({stub:this.stub,transports:this.transports,loggers:this.loggers,config:this.config})}setStub(e){return this.stub=e,this}addTransport(e){return this.transports.push(e),this}addLogger(e){return this.loggers.push(e),this}addConfig(e){return this.config={...this.config,...e},this}}class nP{id;deviceModel;sendApdu;type;transport;constructor({id:e,deviceModel:t,type:r,transport:n,sendApdu:i}){this.id=e,this.deviceModel=t,this.sendApdu=i,this.type=r,this.transport=n}}r(51642).Buffer},34731:(e,t,r)=>{let n=r(57334);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},35927:e=>{e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||0x1fffffffffffff,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},36002:(e,t,r)=>{"use strict";let n;r.d(t,{A:()=>a});let i={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},s=new Uint8Array(16),o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));let a=function(e,t,r){if(i.randomUUID&&!t&&!e)return i.randomUUID();let a=(e=e||{}).random??e.rng?.()??function(){if(!n){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");n=crypto.getRandomValues.bind(crypto)}return n(s)}();if(a.length<16)throw Error("Random bytes length must be >= 16");if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){if((r=r||0)<0||r+16>t.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=a[e];return t}return function(e,t=0){return(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase()}(a)}},37457:(e,t,r)=>{"use strict";r.d(t,{m:()=>o});var n=r(13829),i=r(90061),s=r(73987),o=function(e){function t(t,r,n){void 0===t&&(t=1/0),void 0===r&&(r=1/0),void 0===n&&(n=s.U);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=r,i._timestampProvider=n,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=r===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,r),i}return(0,n.C6)(t,e),t.prototype.next=function(t){var r=this.isStopped,n=this._buffer,i=this._infiniteTimeWindow,s=this._timestampProvider,o=this._windowTime;!r&&(n.push(t),i||n.push(s.now()+o)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),r=this._infiniteTimeWindow,n=this._buffer.slice(),i=0;i<n.length&&!e.closed;i+=r?1:2)e.next(n[i]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this._bufferSize,t=this._timestampProvider,r=this._buffer,n=this._infiniteTimeWindow,i=(n?1:2)*e;if(e<1/0&&i<r.length&&r.splice(0,r.length-i),!n){for(var s=t.now(),o=0,a=1;a<r.length&&r[a]<=s;a+=2)o=a;o&&r.splice(0,o+1)}},t}(i.B)},37808:(e,t,r)=>{let n=r(59405);e.exports=(e,t)=>new n(e,t).patch},38500:(e,t,r)=>{let n=r(82529);e.exports=(e,t)=>{let r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},43841:(e,t,r)=>{let n=r(74465);e.exports=(e,t,r)=>0>=n(e,t,r)},45641:(e,t,r)=>{let n=r(74465);e.exports=(e,t,r)=>0!==n(e,t,r)},46466:(e,t,r)=>{let n=r(74465);e.exports=(e,t)=>n(e,t,!0)},47748:(e,t,r)=>{let n=r(74465);e.exports=(e,t,r)=>0===n(e,t,r)},50994:(e,t,r)=>{"use strict";r.d(t,{h:()=>c});var n=r(84445),i=r(43414),s=r(67615),o=r(16024),a=r(82663);function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(0,o.lI)(e),c=(0,o.R0)(e,1/0);return e.length?1===e.length?(0,i.Tg)(e[0]):(0,n.U)(c)((0,a.H)(e,r)):s.w}},52812:(e,t,r)=>{"use strict";r.d(t,{$:()=>C,A:()=>N,D:()=>B,N:()=>o,S:()=>s,T:()=>O,U:()=>eC,X:()=>c,a:()=>b,b:()=>Z,c:()=>w,d:()=>et,e:()=>V,f:()=>ee,g:()=>Y,h:()=>Q,i:()=>z,j:()=>ec,k:()=>eT,l:()=>J,m:()=>g,n:()=>ey,o:()=>function e(t,r,n,i){return"string"==typeof r?function(e,t,r,n){let i=eo(e,t).next(r,n);return i&&i.length?i:e.next(r,n)}(t,r,n,i):1===Object.keys(r).length?function(t,r,n,i){let s=Object.keys(r),o=e(eo(t,s[0]),r[s[0]],n,i);return o&&o.length?o:t.next(n,i)}(t,r,n,i):function(t,r,n,i){let s=[];for(let o of Object.keys(r)){let a=r[o];if(!a)continue;let c=e(eo(t,o),a,n,i);c&&s.push(...c)}return s.length?s:t.next(n,i)}(t,r,n,i)},p:()=>em,q:()=>u,r:()=>eS,s:()=>ef,t:()=>m,u:()=>es,v:()=>p,w:()=>K,x:()=>ea,y:()=>eO,z:()=>A});let n=e=>{if("undefined"==typeof window)return;let t=function(){let e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r.g?r.g:void 0;if(e.__xstate__)return e.__xstate__}();t&&t.register(e)};class i{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(e){let t={value:e,next:null};if(this._current){this._last.next=t,this._last=t;return}this._current=t,this._last=t,this._active&&this.flush()}flush(){for(;this._current;){let e=this._current;this._process(e.value),this._current=e.next}this._last=null}}let s=".",o="",a="xstate.init",c="xstate.stop";function l(e,t){return{type:`xstate.done.state.${e}`,output:t}}function u(e){return{type:a,input:e}}function h(e){setTimeout(()=>{throw e})}let d="function"==typeof Symbol&&Symbol.observable||"@@observable";function p(e){if(_(e))return e;let t=[],r="";for(let n=0;n<e.length;n++){switch(e.charCodeAt(n)){case 92:r+=e[n+1],n++;continue;case 46:t.push(r),r="";continue}r+=e[n]}return t.push(r),t}function f(e){var t;return(t=e)&&"object"==typeof t&&"machine"in t&&"value"in t?e.value:"string"!=typeof e?e:function(e){if(1===e.length)return e[0];let t={},r=t;for(let t=0;t<e.length-1;t++)if(t===e.length-2)r[e[t]]=e[t+1];else{let n=r;r={},n[e[t]]=r}return t}(p(e))}function g(e,t){let r={},n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i];r[s]=t(e[s],s,e,i)}return r}function v(e){return _(e)?e:[e]}function m(e){var t;return void 0===e?[]:_(t=e)?t:[t]}function y(e,t,r,n){return"function"==typeof e?e({context:t,event:r,self:n}):e}function _(e){return Array.isArray(e)}function b(e){var t;return(_(t=e)?t:[t]).map(e=>void 0===e||"string"==typeof e?{target:e}:e)}function S(e){if(void 0!==e&&""!==e)return m(e)}function E(e,t,r){let n="object"==typeof e,i=n?e:void 0;return{next:(n?e.next:e)?.bind(i),error:(n?e.error:t)?.bind(i),complete:(n?e.complete:r)?.bind(i)}}function w(e,t){return`${t}.${e}`}function A(e,t){let r=t.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!r)return e.implementations.actors[t];let[,n,i]=r,s=e.getStateNodeById(i).config.invoke;return(Array.isArray(s)?s[n]:s).src}function D(e,t){return`${e.sessionId}.${t}`}let x=0,T=!1,C=1,O=function(e){return e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped",e}({}),I={clock:{setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},logger:console.log.bind(console),devTools:!1};class R{constructor(e,t){this.logic=e,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new i(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=O.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];let r={...I,...t},{clock:n,logger:s,parent:o,syncSnapshot:a,id:c,systemId:l,inspect:u}=r;this.system=o?o.system:function(e,t){let r=new Map,n=new Map,i=new WeakMap,s=new Set,o={},{clock:a,logger:c}=t,l={schedule:(e,t,r,n,i=Math.random().toString(36).slice(2))=>{let s={source:e,target:t,event:r,delay:n,id:i,startedAt:Date.now()},c=D(e,i);u._snapshot._scheduledEvents[c]=s;let l=a.setTimeout(()=>{delete o[c],delete u._snapshot._scheduledEvents[c],u._relay(e,t,r)},n);o[c]=l},cancel:(e,t)=>{let r=D(e,t),n=o[r];delete o[r],delete u._snapshot._scheduledEvents[r],void 0!==n&&a.clearTimeout(n)},cancelAll:e=>{for(let t in u._snapshot._scheduledEvents){let r=u._snapshot._scheduledEvents[t];r.source===e&&l.cancel(e,r.id)}}},u={_snapshot:{_scheduledEvents:(t?.snapshot&&t.snapshot.scheduler)??{}},_bookId:()=>`x:${x++}`,_register:(e,t)=>(r.set(e,t),e),_unregister:e=>{r.delete(e.sessionId);let t=i.get(e);void 0!==t&&(n.delete(t),i.delete(e))},get:e=>n.get(e),_set:(e,t)=>{let r=n.get(e);if(r&&r!==t)throw Error(`Actor with system ID '${e}' already exists.`);n.set(e,t),i.set(t,e)},inspect:e=>{let t=E(e);return s.add(t),{unsubscribe(){s.delete(t)}}},_sendInspectionEvent:t=>{if(!s.size)return;let r={...t,rootId:e.sessionId};s.forEach(e=>e.next?.(r))},_relay:(e,t,r)=>{u._sendInspectionEvent({type:"@xstate.event",sourceRef:e,actorRef:t,event:r}),t._send(r)},scheduler:l,getSnapshot:()=>({_scheduledEvents:{...u._snapshot._scheduledEvents}}),start:()=>{let e=u._snapshot._scheduledEvents;for(let t in u._snapshot._scheduledEvents={},e){let{source:r,target:n,event:i,delay:s,id:o}=e[t];l.schedule(r,n,i,s,o)}},_clock:a,_logger:c};return u}(this,{clock:n,logger:s}),u&&!o&&this.system.inspect(E(u)),this.sessionId=this.system._bookId(),this.id=c??this.sessionId,this.logger=t?.logger??this.system._logger,this.clock=t?.clock??this.system._clock,this._parent=o,this._syncSnapshot=a,this.options=r,this.src=r.src??e,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:e=>{this._deferred.push(e)},system:this.system,stopChild:e=>{if(e._parent!==this)throw Error(`Cannot stop child actor ${e.id} of ${this.id} because it is not a child`);e._stop()},emit:e=>{let t=this.eventListeners.get(e.type),r=this.eventListeners.get("*");if(t||r)for(let n of[...t?t.values():[],...r?r.values():[]])n(e)},actionExecutor:e=>{let t=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:e.type,params:e.params}}),!e.exec)return;let t=T;try{T=!0,e.exec(e.info,e.params)}finally{T=t}};this._processingStatus===O.Running?t():this._deferred.push(t)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),l&&(this._systemId=l,this.system._set(l,this)),this._initState(t?.snapshot??t?.state),l&&"active"!==this._snapshot.status&&this.system._unregister(this)}_initState(e){try{this._snapshot=e?this.logic.restoreSnapshot?this.logic.restoreSnapshot(e,this._actorScope):e:this.logic.getInitialSnapshot(this._actorScope,this.options?.input)}catch(e){this._snapshot={status:"error",output:void 0,error:e}}}update(e,t){let r;for(this._snapshot=e;r=this._deferred.shift();)try{r()}catch(t){this._deferred.length=0,this._snapshot={...e,status:"error",error:t}}switch(this._snapshot.status){case"active":for(let t of this.observers)try{t.next?.(e)}catch(e){h(e)}break;case"done":var n;for(let t of this.observers)try{t.next?.(e)}catch(e){h(e)}this._stopProcedure(),this._complete(),this._doneEvent=(n=this.id,{type:`xstate.done.actor.${n}`,output:this._snapshot.output,actorId:n}),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error)}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:t,snapshot:e})}subscribe(e,t,r){let n=E(e,t,r);if(this._processingStatus!==O.Stopped)this.observers.add(n);else switch(this._snapshot.status){case"done":try{n.complete?.()}catch(e){h(e)}break;case"error":{let e=this._snapshot.error;if(n.error)try{n.error(e)}catch(e){h(e)}else h(e)}}return{unsubscribe:()=>{this.observers.delete(n)}}}on(e,t){let r=this.eventListeners.get(e);r||(r=new Set,this.eventListeners.set(e,r));let n=t.bind(void 0);return r.add(n),{unsubscribe:()=>{r.delete(n)}}}start(){if(this._processingStatus===O.Running)return this;this._syncSnapshot&&this.subscribe({next:e=>{"active"===e.status&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:e})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=O.Running;let e=u(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:e}),this._snapshot.status){case"done":return this.update(this._snapshot,e),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(e){return this._snapshot={...this._snapshot,status:"error",error:e},this._error(e),this}return this.update(this._snapshot,e),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(e){let t,r;try{t=this.logic.transition(this._snapshot,e,this._actorScope)}catch(e){r={err:e}}if(r){let{err:e}=r;this._snapshot={...this._snapshot,status:"error",error:e},this._error(e);return}this.update(t,e),e.type===c&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===O.Stopped||((this.mailbox.clear(),this._processingStatus===O.NotStarted)?this._processingStatus=O.Stopped:this.mailbox.enqueue({type:c})),this}stop(){if(this._parent)throw Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){for(let e of this.observers)try{e.complete?.()}catch(e){h(e)}this.observers.clear()}_reportError(e){if(!this.observers.size){this._parent||h(e);return}let t=!1;for(let r of this.observers){let n=r.error;t||=!n;try{n?.(e)}catch(e){h(e)}}this.observers.clear(),t&&h(e)}_error(e){if(this._stopProcedure(),this._reportError(e),this._parent){var t;this.system._relay(this,this._parent,(t=this.id,{type:`xstate.error.actor.${t}`,error:e,actorId:t}))}}_stopProcedure(){return this._processingStatus!==O.Running||(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new i(this._process.bind(this)),this._processingStatus=O.Stopped,this.system._unregister(this)),this}_send(e){this._processingStatus!==O.Stopped&&this.mailbox.enqueue(e)}send(e){this.system._relay(void 0,this,e)}attachDevTools(){let{devTools:e}=this.options;e&&("function"==typeof e?e:n)(this)}toJSON(){return{xstate$$type:C,id:this.id}}getPersistedSnapshot(e){return this.logic.getPersistedSnapshot(this._snapshot,e)}[d](){return this}getSnapshot(){return this._snapshot}}function N(e,...[t]){return new R(e,t)}function k(e,t,r,n,{sendId:i}){return[t,{sendId:"function"==typeof i?i(r,n):i},void 0]}function U(e,t){e.defer(()=>{e.system.scheduler.cancel(e.self,t.sendId)})}function L(e,t,r,n,{id:i,systemId:s,src:o,input:a,syncSnapshot:c}){let l,u;let h="string"==typeof o?A(t.machine,o):o,d="function"==typeof i?i(r):i;return h&&(u="function"==typeof a?a({context:t.context,event:r.event,self:e.self}):a,l=N(h,{id:d,src:o,parent:e.self,syncSnapshot:c,systemId:s,input:u})),[eC(t,{children:{...t.children,[d]:l}}),{id:i,systemId:s,actorRef:l,src:o,input:u},void 0]}function P(e,{actorRef:t}){t&&e.defer(()=>{t._processingStatus!==O.Stopped&&t.start()})}function M(e,t,r,n,{actorRef:i}){let s="function"==typeof i?i(r,n):i,o="string"==typeof s?t.children[s]:s,a=t.children;return o&&(a={...a},delete a[o.id]),[eC(t,{children:a}),o,void 0]}function j(e,t){if(t){if(e.system._unregister(t),t._processingStatus!==O.Running){e.stopChild(t);return}e.defer(()=>{e.stopChild(t)})}}function $(e){function t(e,t){}return t.type="xstate.stopChild",t.actorRef=e,t.resolve=M,t.execute=j,t}function F(e,{context:t,event:r},{guards:n}){return n.every(n=>V(n,t,r,e))}function B(e){function t(e,t){return!1}return t.check=F,t.guards=e,t}function V(e,t,r,n){let{machine:i}=n,s="function"==typeof e,o=s?e:i.implementations.guards["string"==typeof e?e:e.type];if(!s&&!o)throw Error(`Guard '${"string"==typeof e?e:e.type}' is not implemented.'.`);if("function"!=typeof o)return V(o,t,r,n);let a={context:t,event:r},c=s||"string"==typeof e?void 0:"params"in e?"function"==typeof e.params?e.params({context:t,event:r}):e.params:void 0;return"check"in o?o.check(n,a,o):o(a,c)}let G=e=>"atomic"===e.type||"final"===e.type;function W(e){return Object.values(e.states).filter(e=>"history"!==e.type)}function q(e,t){let r=[];if(t===e)return r;let n=e.parent;for(;n&&n!==t;)r.push(n),n=n.parent;return r}function z(e){let t=new Set(e),r=H(t);for(let e of t)if("compound"!==e.type||r.get(e)&&r.get(e).length){if("parallel"===e.type){for(let r of W(e))if("history"!==r.type&&!t.has(r))for(let e of ei(r))t.add(e)}}else ei(e).forEach(e=>t.add(e));for(let e of t){let r=e.parent;for(;r;)t.add(r),r=r.parent}return t}function H(e){let t=new Map;for(let r of e)t.has(r)||t.set(r,[]),r.parent&&(t.has(r.parent)||t.set(r.parent,[]),t.get(r.parent).push(r));return t}function X(e,t){return function e(t,r){let n=r.get(t);if(!n)return{};if("compound"===t.type){let e=n[0];if(!e)return{};if(G(e))return e.key}let i={};for(let t of n)i[t.key]=e(t,r);return i}(e,H(z(t)))}function J(e,t){return"compound"===t.type?W(t).some(t=>"final"===t.type&&e.has(t)):"parallel"===t.type?W(t).every(t=>J(e,t)):"final"===t.type}let K=e=>"#"===e[0];function Q(e,t){return e.transitions.get(t)||[...e.transitions.keys()].filter(e=>{if("*"===e)return!0;if(!e.endsWith(".*"))return!1;let r=e.split("."),n=t.split(".");for(let e=0;e<r.length;e++){let t=r[e],i=n[e];if("*"===t)return e===r.length-1;if(t!==i)return!1}return!0}).sort((e,t)=>t.length-e.length).flatMap(t=>e.transitions.get(t))}function Y(e){let t=e.config.after;if(!t)return[];let r=t=>{var r;let n=(r=e.id,{type:`xstate.after.${t}.${r}`}),i=n.type;return e.entry.push(function(e,t){function r(e,t){}return r.type="xstate.raise",r.event=e,r.id=t?.id,r.delay=t?.delay,r.resolve=eI,r.execute=eR,r}(n,{id:i,delay:t})),e.exit.push(function(e){function t(e,t){}return t.type="xstate.cancel",t.sendId=e,t.resolve=k,t.execute=U,t}(i)),i};return Object.keys(t).flatMap(e=>{let n=t[e],i=Number.isNaN(+e)?e:+e,s=r(i);return m("string"==typeof n?{target:n}:n).map(e=>({...e,event:s,delay:i}))}).map(t=>{let{delay:r}=t;return{...Z(e,t.event,t),delay:r}})}function Z(e,t,r){let n=S(r.target),i=r.reenter??!1,o=function(e,t){if(void 0!==t)return t.map(t=>{if("string"!=typeof t)return t;if(K(t))return e.machine.getStateNodeById(t);let r=t[0]===s;if(r&&!e.parent)return ea(e,t.slice(1));let n=r?e.key+t:t;if(e.parent)try{return ea(e.parent,n)}catch(t){throw Error(`Invalid transition definition for state node '${e.id}':
${t.message}`)}else throw Error(`Invalid target: "${t}" is not a valid target from the root node. Did you mean ".${t}"?`)})}(e,n),a={...r,actions:m(r.actions),guard:r.guard,target:o,source:e,reenter:i,eventType:t,toJSON:()=>({...a,source:`#${e.id}`,target:o?o.map(e=>`#${e.id}`):void 0})};return a}function ee(e){let t=new Map;if(e.config.on)for(let r of Object.keys(e.config.on)){if(r===o)throw Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');let n=e.config.on[r];t.set(r,b(n).map(t=>Z(e,r,t)))}if(e.config.onDone){let r=`xstate.done.state.${e.id}`;t.set(r,b(e.config.onDone).map(t=>Z(e,r,t)))}for(let r of e.invoke){if(r.onDone){let n=`xstate.done.actor.${r.id}`;t.set(n,b(r.onDone).map(t=>Z(e,n,t)))}if(r.onError){let n=`xstate.error.actor.${r.id}`;t.set(n,b(r.onError).map(t=>Z(e,n,t)))}if(r.onSnapshot){let n=`xstate.snapshot.${r.id}`;t.set(n,b(r.onSnapshot).map(t=>Z(e,n,t)))}}for(let r of e.after){let e=t.get(r.eventType);e||(e=[],t.set(r.eventType,e)),e.push(r)}return t}function et(e,t){let r="string"==typeof t?e.states[t]:t?e.states[t.target]:void 0;if(!r&&t)throw Error(`Initial state node "${t}" not found on parent state node #${e.id}`);let n={source:e,actions:t&&"string"!=typeof t?m(t.actions):[],eventType:null,reenter:!1,target:r?[r]:[],toJSON:()=>({...n,source:`#${e.id}`,target:r?[`#${r.id}`]:[]})};return n}function er(e){let t=S(e.config.target);return t?{target:t.map(t=>"string"==typeof t?ea(e.parent,t):t)}:e.parent.initial}function en(e){return"history"===e.type}function ei(e){let t=es(e);for(let r of t)for(let n of q(r,e))t.add(n);return t}function es(e){let t=new Set;return!function e(r){if(!t.has(r)){if(t.add(r),"compound"===r.type)e(r.initial.target[0]);else if("parallel"===r.type)for(let t of W(r))e(t)}}(e),t}function eo(e,t){if(K(t))return e.machine.getStateNodeById(t);if(!e.states)throw Error(`Unable to retrieve child state '${t}' from '${e.id}'; no child states exist.`);let r=e.states[t];if(!r)throw Error(`Child state '${t}' does not exist on '${e.id}'`);return r}function ea(e,t){if("string"==typeof t&&K(t))try{return e.machine.getStateNodeById(t)}catch{}let r=p(t).slice(),n=e;for(;r.length;){let e=r.shift();if(!e.length)break;n=eo(n,e)}return n}function ec(e,t){if("string"==typeof t){let r=e.states[t];if(!r)throw Error(`State '${t}' does not exist on '${e.id}'`);return[e,r]}let r=Object.keys(t),n=r.map(t=>eo(e,t)).filter(Boolean);return[e.machine.root,e].concat(n,r.reduce((r,n)=>{let i=eo(e,n);if(!i)return r;let s=ec(i,t[n]);return r.concat(s)},[]))}function el(e,t){let r=e;for(;r.parent&&r.parent!==t;)r=r.parent;return r.parent===t}function eu(e,t,r){let n=new Set;for(let i of e){let e=!1,s=new Set;for(let o of n)if(function(e,t){let r=new Set(e),n=new Set(t);for(let e of r)if(n.has(e))return!0;for(let e of n)if(r.has(e))return!0;return!1}(ep([i],t,r),ep([o],t,r))){if(el(i.source,o.source))s.add(o);else{e=!0;break}}if(!e){for(let e of s)n.delete(e);n.add(i)}}return Array.from(n)}function eh(e,t){if(!e.target)return[];let r=new Set;for(let n of e.target)if(en(n)){if(t[n.id])for(let e of t[n.id])r.add(e);else for(let e of eh(er(n),t))r.add(e)}else r.add(n);return[...r]}function ed(e,t){let r=eh(e,t);if(!r)return;if(!e.reenter&&r.every(t=>t===e.source||el(t,e.source)))return e.source;let n=function(e){let[t,...r]=e;for(let e of q(t,void 0))if(r.every(t=>el(t,e)))return e}(r.concat(e.source));return n?n:e.reenter?void 0:e.source.machine.root}function ep(e,t,r){let n=new Set;for(let i of e)if(i.target?.length){let e=ed(i,r);for(let r of(i.reenter&&i.source===e&&n.add(e),t))el(r,e)&&n.add(r)}return[...n]}function ef(e,t,r,n,i,s){if(!e.length)return t;let o=new Set(t._nodes),a=t.historyValue,c=eu(e,o,a),u=t;i||([u,a]=function(e,t,r,n,i,s,o,a){let c,l=e,u=ep(n,i,s);for(let e of(u.sort((e,t)=>t.order-e.order),u))for(let t of function(e){return Object.keys(e.states).map(t=>e.states[t]).filter(e=>"history"===e.type)}(e)){let r;r="deep"===t.history?t=>G(t)&&el(t,e):t=>t.parent===e,(c??={...s})[t.id]=Array.from(i).filter(r)}for(let e of u)l=em(l,t,r,[...e.exit,...e.invoke.map(e=>$(e.id))],o,void 0),i.delete(e);return[l,c||s]}(u,n,r,c,o,a,s,r.actionExecutor)),u=function(e,t,r,n,i,s,o,a){let c=e,u=new Set,h=new Set;(function(e,t,r,n){for(let i of e){let e=ed(i,t);for(let s of i.target||[])!en(s)&&(i.source!==s||i.source!==e||i.reenter)&&(n.add(s),r.add(s)),eg(s,t,r,n);for(let s of eh(i,t)){let o=q(s,e);e?.type==="parallel"&&o.push(e),ev(n,t,r,o,!i.source.parent&&i.reenter?void 0:e)}}})(n,o,h,u),a&&h.add(e.machine.root);let d=new Set;for(let e of[...u].sort((e,t)=>e.order-t.order)){i.add(e);let n=[];for(let t of(n.push(...e.entry),e.invoke))n.push(function(...[e,{id:t,systemId:r,input:n,syncSnapshot:i=!1}={}]){function s(e,t){}return s.type="xstate.spawnChild",s.id=t,s.systemId=r,s.src=e,s.input=n,s.syncSnapshot=i,s.resolve=L,s.execute=P,s}(t.src,{...t,syncSnapshot:!!t.onSnapshot}));if(h.has(e)){let t=e.initial.actions;n.push(...t)}if(c=em(c,t,r,n,s,e.invoke.map(e=>e.id)),"final"===e.type){let n=e.parent,o=n?.type==="parallel"?n:n?.parent,a=o||e;for(n?.type==="compound"&&s.push(l(n.id,void 0!==e.output?y(e.output,c.context,t,r.self):void 0));o?.type==="parallel"&&!d.has(o)&&J(i,o);)d.add(o),s.push(l(o.id)),a=o,o=o.parent;if(o)continue;c=eC(c,{status:"done",output:function(e,t,r,n,i){if(void 0===n.output)return;let s=l(i.id,void 0!==i.output&&i.parent?y(i.output,e.context,t,r.self):void 0);return y(n.output,e.context,s,r.self)}(c,t,r,c.machine.root,a)})}}return c}(u=em(u,n,r,c.flatMap(e=>e.actions),s,void 0),n,r,c,o,s,a,i);let h=[...o];"done"===u.status&&(u=em(u,n,r,h.sort((e,t)=>t.order-e.order).flatMap(e=>e.exit),s,void 0));try{if(a===t.historyValue&&function(e,t){if(e.length!==t.size)return!1;for(let r of e)if(!t.has(r))return!1;return!0}(t._nodes,o))return u;return eC(u,{_nodes:h,historyValue:a})}catch(e){throw e}}function eg(e,t,r,n){if(en(e)){var i,s,o,a;if(t[e.id]){let o=t[e.id];for(let e of o)n.add(e),eg(e,t,r,n);for(let a of o){i=a,s=e.parent,ev(n,t,r,q(i,s))}}else{let i=er(e);for(let s of i.target)n.add(s),i===e.parent?.initial&&r.add(e.parent),eg(s,t,r,n);for(let s of i.target){o=s,a=e.parent,ev(n,t,r,q(o,a))}}}else if("compound"===e.type){let[i]=e.initial.target;en(i)||(n.add(i),r.add(i)),eg(i,t,r,n),ev(n,t,r,q(i,e))}else if("parallel"===e.type)for(let i of W(e).filter(e=>!en(e)))[...n].some(e=>el(e,i))||(en(i)||(n.add(i),r.add(i)),eg(i,t,r,n))}function ev(e,t,r,n,i){for(let s of n)if((!i||el(s,i))&&e.add(s),"parallel"===s.type)for(let n of W(s).filter(e=>!en(e)))[...e].some(e=>el(e,n))||(e.add(n),eg(n,t,r,e))}function em(e,t,r,n,i,s){let o=s?[]:void 0,a=function e(t,r,n,i,s,o){let{machine:a}=t,c=t;for(let t of i){var l;let i="function"==typeof t,u=i?t:(l="string"==typeof t?t:t.type,a.implementations.actions[l]),h={context:c.context,event:r,self:n.self,system:n.system},d=i||"string"==typeof t?void 0:"params"in t?"function"==typeof t.params?t.params({context:c.context,event:r}):t.params:void 0;if(!u||!("resolve"in u)){n.actionExecutor({type:"string"==typeof t?t:"object"==typeof t?t.type:t.name||"(anonymous)",info:h,params:d,exec:u});continue}let[p,f,g]=u.resolve(n,c,h,d,u,s);c=p,"retryResolve"in u&&o?.push([u,f]),"execute"in u&&n.actionExecutor({type:u.type,info:h,params:f,exec:u.execute.bind(null,n,f)}),g&&(c=e(c,r,n,g,s,o))}return c}(e,t,r,n,{internalQueue:i,deferredActorIds:s},o);return o?.forEach(([e,t])=>{e.retryResolve(r,a,t)}),a}function ey(e,t,r,n){let i=e,s=[];function o(e,t,n){r.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:r.self,event:t,snapshot:e,_transitions:n}),s.push(e)}if(t.type===c)return o(i=eC(e_(i,t,r),{status:"stopped"}),t,[]),{snapshot:i,microstates:s};let l=t;if(l.type!==a){let t=l,a=t.type.startsWith("xstate.error.actor"),c=eb(t,i);if(a&&!c.length)return o(i=eC(e,{status:"error",error:t.error}),t,[]),{snapshot:i,microstates:s};o(i=ef(c,e,r,l,!1,n),t,c)}let u=!0;for(;"active"===i.status;){let e=u?function(e,t){let r=new Set;for(let n of e._nodes.filter(G))e:for(let i of[n].concat(q(n,void 0)))if(i.always){for(let n of i.always)if(void 0===n.guard||V(n.guard,e.context,t,e)){r.add(n);break e}}return eu(Array.from(r),new Set(e._nodes),e.historyValue)}(i,l):[],t=e.length?i:void 0;if(!e.length){if(!n.length)break;e=eb(l=n.shift(),i)}u=(i=ef(e,i,r,l,!1,n))!==t,o(i,l,e)}return"active"!==i.status&&e_(i,l,r),{snapshot:i,microstates:s}}function e_(e,t,r){return em(e,t,r,Object.values(e.children).map(e=>$(e)),[],void 0)}function eb(e,t){return t.machine.getTransitionData(t,e)}function eS(e,t){let r=z(ec(e,t));return X(e,[...r])}let eE=function(e){return function e(t,r){let n=f(t),i=f(r);return"string"==typeof i?"string"==typeof n&&i===n:"string"==typeof n?n in i:Object.keys(n).every(t=>t in i&&e(n[t],i[t]))}(e,this.value)},ew=function(e){return this.tags.has(e)},eA=function(e){let t=this.machine.getTransitionData(this,e);return!!t?.length&&t.some(e=>void 0!==e.target||e.actions.length)},eD=function(){let{_nodes:e,tags:t,machine:r,getMeta:n,toJSON:i,can:s,hasTag:o,matches:a,...c}=this;return{...c,tags:Array.from(t)}},ex=function(){return this._nodes.reduce((e,t)=>(void 0!==t.meta&&(e[t.id]=t.meta),e),{})};function eT(e,t){return{status:e.status,output:e.output,error:e.error,machine:t,context:e.context,_nodes:e._nodes,value:X(t.root,e._nodes),tags:new Set(e._nodes.flatMap(e=>e.tags)),children:e.children,historyValue:e.historyValue||{},matches:eE,hasTag:ew,can:eA,getMeta:ex,toJSON:eD}}function eC(e,t={}){return eT({...e,...t},e.machine)}function eO(e,t){let{_nodes:r,tags:n,machine:i,children:s,context:o,can:a,hasTag:c,matches:l,getMeta:u,toJSON:h,...d}=e,p={};for(let e in s){let r=s[e];p[e]={snapshot:r.getPersistedSnapshot(t),src:r.src,systemId:r._systemId,syncSnapshot:r._syncSnapshot}}return{...d,context:function e(t){let r;for(let n in t){let i=t[n];if(i&&"object"==typeof i){if("sessionId"in i&&"send"in i&&"ref"in i)(r??=Array.isArray(t)?t.slice():{...t})[n]={xstate$$type:C,id:i.id};else{let s=e(i);s!==i&&((r??=Array.isArray(t)?t.slice():{...t})[n]=s)}}}return r??t}(o),children:p}}function eI(e,t,r,n,{event:i,id:s,delay:o},{internalQueue:a}){let c;let l=t.machine.implementations.delays;if("string"==typeof i)throw Error(`Only event objects may be used with raise; use raise({ type: "${i}" }) instead`);let u="function"==typeof i?i(r,n):i;if("string"==typeof o){let e=l&&l[o];c="function"==typeof e?e(r,n):e}else c="function"==typeof o?o(r,n):o;return"number"!=typeof c&&a.push(u),[t,{event:u,id:s,delay:c},void 0]}function eR(e,t){let{event:r,delay:n,id:i}=t;if("number"==typeof n){e.defer(()=>{let t=e.self;e.system.scheduler.schedule(t,t,r,n,i)});return}}},53977:(e,t,r)=>{"use strict";r.d(t,{APDU_MAX_PAYLOAD:()=>n.APDU_MAX_PAYLOAD,ApduBuilder:()=>n.ApduBuilder,ApduParser:()=>n.ApduParser,ByteArrayBuilder:()=>n.ByteArrayBuilder,ByteArrayParser:()=>n.ByteArrayParser,CallTaskInAppDeviceAction:()=>n.CallTaskInAppDeviceAction,CommandResultFactory:()=>n.CommandResultFactory,CommandUtils:()=>n.CommandUtils,DeviceActionStatus:()=>n.DeviceActionStatus,DeviceExchangeError:()=>n.DeviceExchangeError,DeviceManagementKitBuilder:()=>n.DeviceManagementKitBuilder,DeviceModelId:()=>n.DeviceModelId,DeviceNotRecognizedError:()=>n.DeviceNotRecognizedError,DeviceSessionStateType:()=>n.DeviceSessionStateType,FramerUtils:()=>n.FramerUtils,GeneralDmkError:()=>n.GeneralDmkError,GlobalCommandErrorHandler:()=>n.GlobalCommandErrorHandler,InvalidStatusWordError:()=>n.InvalidStatusWordError,LEDGER_VENDOR_ID:()=>n.LEDGER_VENDOR_ID,LoadCertificateCommand:()=>n.LoadCertificateCommand,NoAccessibleDeviceError:()=>n.NoAccessibleDeviceError,OpenAppDeviceAction:()=>n.OpenAppDeviceAction,OpeningConnectionError:()=>n.OpeningConnectionError,ReconnectionFailedError:()=>n.ReconnectionFailedError,SendCommandInAppDeviceAction:()=>n.SendCommandInAppDeviceAction,TransportConnectedDevice:()=>n.TransportConnectedDevice,UnknownDAError:()=>n.UnknownDAError,UnknownDeviceError:()=>n.UnknownDeviceError,UserInteractionRequired:()=>n.UserInteractionRequired,XStateDeviceAction:()=>n.XStateDeviceAction,bufferToHexaString:()=>n.bufferToHexaString,hexaStringToBuffer:()=>n.hexaStringToBuffer,isCommandErrorCode:()=>n.isCommandErrorCode,isHexaString:()=>n.isHexaString,isSuccessCommandResult:()=>n.isSuccessCommandResult}),r(9180);var n=r(34673)},55199:(e,t,r)=>{"use strict";r.d(t,{b:()=>h,E:()=>u});var n=r(13829),i=function(e){function t(t,r){return e.call(this)||this}return(0,n.C6)(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(r(71460).yU),s={setInterval:function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=s.delegate;return(null==o?void 0:o.setInterval)?o.setInterval.apply(o,(0,n.fX)([e,t],(0,n.zs)(r))):setInterval.apply(void 0,(0,n.fX)([e,t],(0,n.zs)(r)))},clearInterval:function(e){var t=s.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},o=r(15656),a=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n.pending=!1,n}return(0,n.C6)(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r,n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),s.setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&s.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r,n=!1;try{this.work(e)}catch(e){n=!0,r=e||Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,r=this.scheduler,n=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,(0,o.o)(n,this),null!=t&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(i),c=r(73987),l=function(){function e(t,r){void 0===r&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},e.now=c.U.now,e}(),u=new(function(e){function t(t,r){void 0===r&&(r=l.now);var n=e.call(this,t,r)||this;return n.actions=[],n._active=!1,n}return(0,n.C6)(t,e),t.prototype.flush=function(e){var t,r=this.actions;if(this._active){r.push(e);return}this._active=!0;do if(t=e.execute(e.state,e.delay))break;while(e=r.shift());if(this._active=!1,t){for(;e=r.shift();)e.unsubscribe();throw t}},t}(l))(a),h=u},55746:(e,t,r)=>{let n=r(74465);e.exports=(e,t,r)=>n(e,t,r)>0},57334:(e,t,r)=>{let n=/\s+/g;class i{constructor(e,t){if(t=o(t),e instanceof i){if(!!t.loose===e.loose&&!!t.includePrerelease===e.includePrerelease)return e;return new i(e.raw,t)}if(e instanceof a)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(n," "),this.set=this.raw.split("||").map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let e=this.set[0];if(this.set=this.set.filter(e=>!m(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1){for(let e of this.set)if(1===e.length&&y(e[0])){this.set=[e];break}}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let t=((this.options.includePrerelease&&g)|(this.options.loose&&v))+":"+e,r=s.get(t);if(r)return r;let n=this.options.loose,i=n?u[h.HYPHENRANGELOOSE]:u[h.HYPHENRANGE];c("hyphen replace",e=e.replace(i,I(this.options.includePrerelease))),c("comparator trim",e=e.replace(u[h.COMPARATORTRIM],d)),c("tilde trim",e=e.replace(u[h.TILDETRIM],p)),c("caret trim",e=e.replace(u[h.CARETTRIM],f));let o=e.split(" ").map(e=>b(e,this.options)).join(" ").split(/\s+/).map(e=>O(e,this.options));n&&(o=o.filter(e=>(c("loose invalid filter",e,this.options),!!e.match(u[h.COMPARATORLOOSE])))),c("range list",o);let l=new Map;for(let e of o.map(e=>new a(e,this.options))){if(m(e))return[e];l.set(e.value,e)}l.size>1&&l.has("")&&l.delete("");let y=[...l.values()];return s.set(t,y),y}intersects(e,t){if(!(e instanceof i))throw TypeError("a Range is required");return this.set.some(r=>_(r,t)&&e.set.some(e=>_(e,t)&&r.every(r=>e.every(e=>r.intersects(e,t)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new l(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(R(this.set[t],e,this.options))return!0;return!1}}e.exports=i;let s=new(r(72239)),o=r(63130),a=r(95937),c=r(65937),l=r(59405),{safeRe:u,t:h,comparatorTrimReplace:d,tildeTrimReplace:p,caretTrimReplace:f}=r(84899),{FLAG_INCLUDE_PRERELEASE:g,FLAG_LOOSE:v}=r(35927),m=e=>"<0.0.0-0"===e.value,y=e=>""===e.value,_=(e,t)=>{let r=!0,n=e.slice(),i=n.pop();for(;r&&n.length;)r=n.every(e=>i.intersects(e,t)),i=n.pop();return r},b=(e,t)=>(c("comp",e,t),c("caret",e=A(e,t)),c("tildes",e=E(e,t)),c("xrange",e=x(e,t)),c("stars",e=C(e,t)),e),S=e=>!e||"x"===e.toLowerCase()||"*"===e,E=(e,t)=>e.trim().split(/\s+/).map(e=>w(e,t)).join(" "),w=(e,t)=>{let r=t.loose?u[h.TILDELOOSE]:u[h.TILDE];return e.replace(r,(t,r,n,i,s)=>{let o;return c("tilde",e,t,r,n,i,s),S(r)?o="":S(n)?o=`>=${r}.0.0 <${+r+1}.0.0-0`:S(i)?o=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:s?(c("replaceTilde pr",s),o=`>=${r}.${n}.${i}-${s} <${r}.${+n+1}.0-0`):o=`>=${r}.${n}.${i} <${r}.${+n+1}.0-0`,c("tilde return",o),o})},A=(e,t)=>e.trim().split(/\s+/).map(e=>D(e,t)).join(" "),D=(e,t)=>{c("caret",e,t);let r=t.loose?u[h.CARETLOOSE]:u[h.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(t,r,i,s,o)=>{let a;return c("caret",e,t,r,i,s,o),S(r)?a="":S(i)?a=`>=${r}.0.0${n} <${+r+1}.0.0-0`:S(s)?a="0"===r?`>=${r}.${i}.0${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.0${n} <${+r+1}.0.0-0`:o?(c("replaceCaret pr",o),a="0"===r?"0"===i?`>=${r}.${i}.${s}-${o} <${r}.${i}.${+s+1}-0`:`>=${r}.${i}.${s}-${o} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${s}-${o} <${+r+1}.0.0-0`):(c("no pr"),a="0"===r?"0"===i?`>=${r}.${i}.${s}${n} <${r}.${i}.${+s+1}-0`:`>=${r}.${i}.${s}${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${s} <${+r+1}.0.0-0`),c("caret return",a),a})},x=(e,t)=>(c("replaceXRanges",e,t),e.split(/\s+/).map(e=>T(e,t)).join(" ")),T=(e,t)=>{e=e.trim();let r=t.loose?u[h.XRANGELOOSE]:u[h.XRANGE];return e.replace(r,(r,n,i,s,o,a)=>{c("xRange",e,r,n,i,s,o,a);let l=S(i),u=l||S(s),h=u||S(o);return"="===n&&h&&(n=""),a=t.includePrerelease?"-0":"",l?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&h?(u&&(s=0),o=0,">"===n?(n=">=",u?(i=+i+1,s=0):s=+s+1,o=0):"<="===n&&(n="<",u?i=+i+1:s=+s+1),"<"===n&&(a="-0"),r=`${n+i}.${s}.${o}${a}`):u?r=`>=${i}.0.0${a} <${+i+1}.0.0-0`:h&&(r=`>=${i}.${s}.0${a} <${i}.${+s+1}.0-0`),c("xRange return",r),r})},C=(e,t)=>(c("replaceStars",e,t),e.trim().replace(u[h.STAR],"")),O=(e,t)=>(c("replaceGTE0",e,t),e.trim().replace(u[t.includePrerelease?h.GTE0PRE:h.GTE0],"")),I=e=>(t,r,n,i,s,o,a,c,l,u,h,d)=>(r=S(n)?"":S(i)?`>=${n}.0.0${e?"-0":""}`:S(s)?`>=${n}.${i}.0${e?"-0":""}`:o?`>=${r}`:`>=${r}${e?"-0":""}`,c=S(l)?"":S(u)?`<${+l+1}.0.0-0`:S(h)?`<${l}.${+u+1}.0-0`:d?`<=${l}.${u}.${h}-${d}`:e?`<${l}.${u}.${+h+1}-0`:`<=${c}`,`${r} ${c}`.trim()),R=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(c(e[r].semver),e[r].semver!==a.ANY&&e[r].semver.prerelease.length>0){let n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},57497:(e,t,r)=>{"use strict";r.d(t,{a:()=>s});var n=r(52812);function i(e,t,r,i,{assignment:s}){if(!t.context)throw Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");let o={},a={context:t.context,event:r.event,spawn:function(e,{machine:t,context:r},i,s){let o=(o,a)=>{if("string"!=typeof o)return(0,n.A)(o,{id:a?.id,parent:e.self,syncSnapshot:a?.syncSnapshot,input:a?.input,src:o,systemId:a?.systemId});{let c=(0,n.z)(t,o);if(!c)throw Error(`Actor logic '${o}' not implemented in machine '${t.id}'`);let l=(0,n.A)(c,{id:a?.id,parent:e.self,syncSnapshot:a?.syncSnapshot,input:"function"==typeof a?.input?a.input({context:r,event:i,self:e.self}):a?.input,src:o,systemId:a?.systemId});return s[l.id]=l,l}};return(t,r)=>{let i=o(t,r);return s[i.id]=i,e.defer(()=>{i._processingStatus!==n.T.Stopped&&i.start()}),i}}(e,t,r.event,o),self:e.self,system:e.system},c={};if("function"==typeof s)c=s(a,i);else for(let e of Object.keys(s)){let t=s[e];c[e]="function"==typeof t?t(a,i):t}let l=Object.assign({},t.context,c);return[(0,n.U)(t,{context:l,children:Object.keys(o).length?{...t.children,...o}:t.children}),void 0,void 0]}function s(e){function t(e,t){}return t.type="xstate.assign",t.assignment=e,t.resolve=i,t}function o(e,t,r,n,{event:i}){return[t,{event:"function"==typeof i?i(r,n):i},void 0]}function a(e,{event:t}){e.defer(()=>e.emit(t))}let c=function(e){return e.Parent="#_parent",e.Internal="#_internal",e}({});function l(e,t,r,n,{to:i,event:s,id:o,delay:a},l){let u,h;let d=t.machine.implementations.delays;if("string"==typeof s)throw Error(`Only event objects may be used with sendTo; use sendTo({ type: "${s}" }) instead`);let p="function"==typeof s?s(r,n):s;if("string"==typeof a){let e=d&&d[a];u="function"==typeof e?e(r,n):e}else u="function"==typeof a?a(r,n):a;let f="function"==typeof i?i(r,n):i;if("string"==typeof f){if(!(h=f===c.Parent?e.self._parent:f===c.Internal?e.self:f.startsWith("#_")?t.children[f.slice(2)]:l.deferredActorIds?.includes(f)?f:t.children[f]))throw Error(`Unable to send event to actor '${f}' from machine '${t.machine.id}'.`)}else h=f||e.self;return[t,{to:h,targetId:"string"==typeof f?f:void 0,event:p,id:o,delay:u},void 0]}function u(e,t,r){"string"==typeof r.to&&(r.to=t.children[r.to])}function h(e,t){e.defer(()=>{let{to:r,event:n,delay:i,id:s}=t;if("number"==typeof i){e.system.scheduler.schedule(e.self,r,n,i,s);return}e.system._relay(e.self,r,n.type===XSTATE_ERROR?createErrorActorEvent(e.self.id,n.data):n)})}function d(e,t,r){function n(e,t){}return n.type="xstate.sendTo",n.to=e,n.event=t,n.id=r?.id,n.delay=r?.delay,n.resolve=l,n.retryResolve=u,n.execute=h,n}},57763:(e,t,r)=>{let n=r(59405);e.exports=(e,t)=>new n(e,t).minor},59405:(e,t,r)=>{let n=r(65937),{MAX_LENGTH:i,MAX_SAFE_INTEGER:s}=r(35927),{safeRe:o,t:a}=r(84899),c=r(63130),{compareIdentifiers:l}=r(22498);class u{constructor(e,t){if(t=c(t),e instanceof u){if(!!t.loose===e.loose&&!!t.includePrerelease===e.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>i)throw TypeError(`version is longer than ${i} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?o[a.LOOSE]:o[a.FULL]);if(!r)throw TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>s||this.major<0)throw TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){let t=+e;if(t>=0&&t<s)return t}return e}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof u)){if("string"==typeof e&&e===this.version)return 0;e=new u(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof u||(e=new u(e,this.options)),l(this.major,e.major)||l(this.minor,e.minor)||l(this.patch,e.patch)}comparePre(e){if(e instanceof u||(e=new u(e,this.options)),this.prerelease.length&&!e.prerelease.length)return -1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return -1;else if(r===i)continue;else return l(r,i)}while(++t)}compareBuild(e){e instanceof u||(e=new u(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if(n("build compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return -1;else if(r===i)continue;else return l(r,i)}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{let e=+!!Number(r);if(!t&&!1===r)throw Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===l(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=u},63130:e=>{let t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},63286:(e,t,r)=>{"use strict";r.d(t,{K_:()=>a,Sx:()=>h});var n=r(52812);let i="xstate.observable.next",s="xstate.observable.error",o="xstate.observable.complete";function a(e){return{config:e,transition:(e,t)=>{if("active"!==e.status)return e;switch(t.type){case i:return{...e,context:t.data};case s:return{...e,status:"error",error:t.data,input:void 0,_subscription:void 0};case o:return{...e,status:"done",input:void 0,_subscription:void 0};case n.X:return e._subscription.unsubscribe(),{...e,status:"stopped",input:void 0,_subscription:void 0};default:return e}},getInitialSnapshot:(e,t)=>({status:"active",output:void 0,error:void 0,context:void 0,input:t,_subscription:void 0}),start:(t,{self:r,system:n,emit:a})=>{"done"!==t.status&&(t._subscription=e({input:t.input,system:n,self:r,emit:a}).subscribe({next:e=>{n._relay(r,r,{type:i,data:e})},error:e=>{n._relay(r,r,{type:s,data:e})},complete:()=>{n._relay(r,r,{type:o})}}))},getPersistedSnapshot:({_subscription:e,...t})=>t,restoreSnapshot:e=>({...e,_subscription:void 0})}}let c="xstate.promise.resolve",l="xstate.promise.reject",u=new WeakMap;function h(e){return{config:e,transition:(e,t,r)=>{if("active"!==e.status)return e;switch(t.type){case c:{let r=t.data;return{...e,status:"done",output:r,input:void 0}}case l:return{...e,status:"error",error:t.data,input:void 0};case n.X:return u.get(r.self)?.abort(),{...e,status:"stopped",input:void 0};default:return e}},start:(t,{self:r,system:n,emit:i})=>{if("active"!==t.status)return;let s=new AbortController;u.set(r,s),Promise.resolve(e({input:t.input,system:n,self:r,signal:s.signal,emit:i})).then(e=>{"active"===r.getSnapshot().status&&(u.delete(r),n._relay(r,r,{type:c,data:e}))},e=>{"active"===r.getSnapshot().status&&(u.delete(r),n._relay(r,r,{type:l,data:e}))})},getInitialSnapshot:(e,t)=>({status:"active",output:void 0,error:void 0,input:t}),getPersistedSnapshot:e=>e,restoreSnapshot:e=>e}}e=>void 0},65937:(e,t,r)=>{var n=r(29143);e.exports="object"==typeof n&&n.env&&n.env.NODE_DEBUG&&/\bsemver\b/i.test(n.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{}},67312:(e,t,r)=>{let n=r(84899),i=r(35927),s=r(59405),o=r(22498),a=r(82529),c=r(1156),l=r(83195),u=r(2958),h=r(18465),d=r(7871),p=r(57763),f=r(37808),g=r(38500),v=r(74465),m=r(1319),y=r(46466),_=r(79296),b=r(97750),S=r(88496),E=r(55746),w=r(7066),A=r(47748),D=r(45641),x=r(708),T=r(43841),C=r(33998),O=r(97935),I=r(95937),R=r(57334),N=r(34731),k=r(14566),U=r(26165),L=r(9640),P=r(18576),M=r(67855),j=r(266),$=r(31458),F=r(13563),B=r(31821);e.exports={parse:a,valid:c,clean:l,inc:u,diff:h,major:d,minor:p,patch:f,prerelease:g,compare:v,rcompare:m,compareLoose:y,compareBuild:_,sort:b,rsort:S,gt:E,lt:w,eq:A,neq:D,gte:x,lte:T,cmp:C,coerce:O,Comparator:I,Range:R,satisfies:N,toComparators:k,maxSatisfying:U,minSatisfying:L,minVersion:P,validRange:M,outside:j,gtr:$,ltr:F,intersects:B,simplifyRange:r(9320),subset:r(67697),SemVer:s,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:i.SEMVER_SPEC_VERSION,RELEASE_TYPES:i.RELEASE_TYPES,compareIdentifiers:o.compareIdentifiers,rcompareIdentifiers:o.rcompareIdentifiers}},67615:(e,t,r)=>{"use strict";r.d(t,{w:()=>n});var n=new(r(33300)).c(function(e){return e.complete()})},67697:(e,t,r)=>{let n=r(57334),i=r(95937),{ANY:s}=i,o=r(34731),a=r(74465),c=[new i(">=0.0.0-0")],l=[new i(">=0.0.0")],u=(e,t,r)=>{let n,i,u,p,f,g,v;if(e===t)return!0;if(1===e.length&&e[0].semver===s){if(1===t.length&&t[0].semver===s)return!0;e=r.includePrerelease?c:l}if(1===t.length&&t[0].semver===s){if(r.includePrerelease)return!0;t=l}let m=new Set;for(let t of e)">"===t.operator||">="===t.operator?n=h(n,t,r):"<"===t.operator||"<="===t.operator?i=d(i,t,r):m.add(t.semver);if(m.size>1||n&&i&&((u=a(n.semver,i.semver,r))>0||0===u&&(">="!==n.operator||"<="!==i.operator)))return null;for(let e of m){if(n&&!o(e,String(n),r)||i&&!o(e,String(i),r))return null;for(let n of t)if(!o(e,String(n),r))return!1;return!0}let y=!!i&&!r.includePrerelease&&!!i.semver.prerelease.length&&i.semver,_=!!n&&!r.includePrerelease&&!!n.semver.prerelease.length&&n.semver;for(let e of(y&&1===y.prerelease.length&&"<"===i.operator&&0===y.prerelease[0]&&(y=!1),t)){if(v=v||">"===e.operator||">="===e.operator,g=g||"<"===e.operator||"<="===e.operator,n){if(_&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===_.major&&e.semver.minor===_.minor&&e.semver.patch===_.patch&&(_=!1),">"===e.operator||">="===e.operator){if((p=h(n,e,r))===e&&p!==n)return!1}else if(">="===n.operator&&!o(n.semver,String(e),r))return!1}if(i){if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),"<"===e.operator||"<="===e.operator){if((f=d(i,e,r))===e&&f!==i)return!1}else if("<="===i.operator&&!o(i.semver,String(e),r))return!1}if(!e.operator&&(i||n)&&0!==u)return!1}return(!n||!g||!!i||0===u)&&(!i||!v||!!n||0===u)&&!_&&!y&&!0},h=(e,t,r)=>{if(!e)return t;let n=a(e.semver,t.semver,r);return n>0?e:n<0?t:">"===t.operator&&">="===e.operator?t:e},d=(e,t,r)=>{if(!e)return t;let n=a(e.semver,t.semver,r);return n<0?e:n>0?t:"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let i=!1;t:for(let n of e.set){for(let e of t.set){let t=u(n,e,r);if(i=i||null!==t,t)continue t}if(i)return!1}return!0}},67855:(e,t,r)=>{let n=r(57334);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},72220:(e,t,r)=>{"use strict";var n=r(53977);r.o(n,"APDU_MAX_PAYLOAD")&&r.d(t,{APDU_MAX_PAYLOAD:function(){return n.APDU_MAX_PAYLOAD}}),r.o(n,"ApduBuilder")&&r.d(t,{ApduBuilder:function(){return n.ApduBuilder}}),r.o(n,"ApduParser")&&r.d(t,{ApduParser:function(){return n.ApduParser}}),r.o(n,"ByteArrayBuilder")&&r.d(t,{ByteArrayBuilder:function(){return n.ByteArrayBuilder}}),r.o(n,"ByteArrayParser")&&r.d(t,{ByteArrayParser:function(){return n.ByteArrayParser}}),r.o(n,"CallTaskInAppDeviceAction")&&r.d(t,{CallTaskInAppDeviceAction:function(){return n.CallTaskInAppDeviceAction}}),r.o(n,"CommandResultFactory")&&r.d(t,{CommandResultFactory:function(){return n.CommandResultFactory}}),r.o(n,"CommandUtils")&&r.d(t,{CommandUtils:function(){return n.CommandUtils}}),r.o(n,"DeviceActionStatus")&&r.d(t,{DeviceActionStatus:function(){return n.DeviceActionStatus}}),r.o(n,"DeviceExchangeError")&&r.d(t,{DeviceExchangeError:function(){return n.DeviceExchangeError}}),r.o(n,"DeviceManagementKitBuilder")&&r.d(t,{DeviceManagementKitBuilder:function(){return n.DeviceManagementKitBuilder}}),r.o(n,"DeviceModelId")&&r.d(t,{DeviceModelId:function(){return n.DeviceModelId}}),r.o(n,"DeviceNotRecognizedError")&&r.d(t,{DeviceNotRecognizedError:function(){return n.DeviceNotRecognizedError}}),r.o(n,"DeviceSessionStateType")&&r.d(t,{DeviceSessionStateType:function(){return n.DeviceSessionStateType}}),r.o(n,"FramerUtils")&&r.d(t,{FramerUtils:function(){return n.FramerUtils}}),r.o(n,"GeneralDmkError")&&r.d(t,{GeneralDmkError:function(){return n.GeneralDmkError}}),r.o(n,"GlobalCommandErrorHandler")&&r.d(t,{GlobalCommandErrorHandler:function(){return n.GlobalCommandErrorHandler}}),r.o(n,"InvalidStatusWordError")&&r.d(t,{InvalidStatusWordError:function(){return n.InvalidStatusWordError}}),r.o(n,"LEDGER_VENDOR_ID")&&r.d(t,{LEDGER_VENDOR_ID:function(){return n.LEDGER_VENDOR_ID}}),r.o(n,"LoadCertificateCommand")&&r.d(t,{LoadCertificateCommand:function(){return n.LoadCertificateCommand}}),r.o(n,"NoAccessibleDeviceError")&&r.d(t,{NoAccessibleDeviceError:function(){return n.NoAccessibleDeviceError}}),r.o(n,"OpenAppDeviceAction")&&r.d(t,{OpenAppDeviceAction:function(){return n.OpenAppDeviceAction}}),r.o(n,"OpeningConnectionError")&&r.d(t,{OpeningConnectionError:function(){return n.OpeningConnectionError}}),r.o(n,"ReconnectionFailedError")&&r.d(t,{ReconnectionFailedError:function(){return n.ReconnectionFailedError}}),r.o(n,"SendCommandInAppDeviceAction")&&r.d(t,{SendCommandInAppDeviceAction:function(){return n.SendCommandInAppDeviceAction}}),r.o(n,"TransportConnectedDevice")&&r.d(t,{TransportConnectedDevice:function(){return n.TransportConnectedDevice}}),r.o(n,"UnknownDAError")&&r.d(t,{UnknownDAError:function(){return n.UnknownDAError}}),r.o(n,"UnknownDeviceError")&&r.d(t,{UnknownDeviceError:function(){return n.UnknownDeviceError}}),r.o(n,"UserInteractionRequired")&&r.d(t,{UserInteractionRequired:function(){return n.UserInteractionRequired}}),r.o(n,"XStateDeviceAction")&&r.d(t,{XStateDeviceAction:function(){return n.XStateDeviceAction}}),r.o(n,"bufferToHexaString")&&r.d(t,{bufferToHexaString:function(){return n.bufferToHexaString}}),r.o(n,"hexaStringToBuffer")&&r.d(t,{hexaStringToBuffer:function(){return n.hexaStringToBuffer}}),r.o(n,"isCommandErrorCode")&&r.d(t,{isCommandErrorCode:function(){return n.isCommandErrorCode}}),r.o(n,"isHexaString")&&r.d(t,{isHexaString:function(){return n.isHexaString}}),r.o(n,"isSuccessCommandResult")&&r.d(t,{isSuccessCommandResult:function(){return n.isSuccessCommandResult}})},72239:e=>{class t{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(void 0!==t)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){let e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}e.exports=t},73987:(e,t,r)=>{"use strict";r.d(t,{U:()=>n});var n={now:function(){return(n.delegate||Date).now()},delegate:void 0}},74465:(e,t,r)=>{let n=r(59405);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},75119:(e,t,r)=>{"use strict";let n;r.d(t,{A:()=>ta});var i,s,o,a={};function c(e,t){return function(){return e.apply(t,arguments)}}r.r(a),r.d(a,{hasBrowserEnv:()=>eu,hasStandardBrowserEnv:()=>ed,hasStandardBrowserWebWorkerEnv:()=>ep,navigator:()=>eh,origin:()=>ef});var l=r(29143);let{toString:u}=Object.prototype,{getPrototypeOf:h}=Object,d=(e=>t=>{let r=u.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),p=e=>(e=e.toLowerCase(),t=>d(t)===e),f=e=>t=>typeof t===e,{isArray:g}=Array,v=f("undefined"),m=p("ArrayBuffer"),y=f("string"),_=f("function"),b=f("number"),S=e=>null!==e&&"object"==typeof e,E=e=>{if("object"!==d(e))return!1;let t=h(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},w=p("Date"),A=p("File"),D=p("Blob"),x=p("FileList"),T=p("URLSearchParams"),[C,O,I,R]=["ReadableStream","Request","Response","Headers"].map(p);function N(e,t,{allOwnKeys:r=!1}={}){let n,i;if(null!=e){if("object"!=typeof e&&(e=[e]),g(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{let i;let s=r?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;for(n=0;n<o;n++)i=s[n],t.call(null,e[i],i,e)}}}function k(e,t){let r;t=t.toLowerCase();let n=Object.keys(e),i=n.length;for(;i-- >0;)if(t===(r=n[i]).toLowerCase())return r;return null}let U="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,L=e=>!v(e)&&e!==U,P=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&h(Uint8Array)),M=p("HTMLFormElement"),j=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),$=p("RegExp"),F=(e,t)=>{let r=Object.getOwnPropertyDescriptors(e),n={};N(r,(r,i)=>{let s;!1!==(s=t(r,i,e))&&(n[i]=s||r)}),Object.defineProperties(e,n)},B=p("AsyncFunction"),V=(i="function"==typeof setImmediate,s=_(U.postMessage),i?setImmediate:s?((e,t)=>(U.addEventListener("message",({source:r,data:n})=>{r===U&&n===e&&t.length&&t.shift()()},!1),r=>{t.push(r),U.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e)),G="undefined"!=typeof queueMicrotask?queueMicrotask.bind(U):void 0!==l&&l.nextTick||V,W={isArray:g,isArrayBuffer:m,isBuffer:function(e){return null!==e&&!v(e)&&null!==e.constructor&&!v(e.constructor)&&_(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||_(e.append)&&("formdata"===(t=d(e))||"object"===t&&_(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&m(e.buffer)},isString:y,isNumber:b,isBoolean:e=>!0===e||!1===e,isObject:S,isPlainObject:E,isReadableStream:C,isRequest:O,isResponse:I,isHeaders:R,isUndefined:v,isDate:w,isFile:A,isBlob:D,isRegExp:$,isFunction:_,isStream:e=>S(e)&&_(e.pipe),isURLSearchParams:T,isTypedArray:P,isFileList:x,forEach:N,merge:function e(){let{caseless:t}=L(this)&&this||{},r={},n=(n,i)=>{let s=t&&k(r,i)||i;E(r[s])&&E(n)?r[s]=e(r[s],n):E(n)?r[s]=e({},n):g(n)?r[s]=n.slice():r[s]=n};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&N(arguments[e],n);return r},extend:(e,t,r,{allOwnKeys:n}={})=>(N(t,(t,n)=>{r&&_(t)?e[n]=c(t,r):e[n]=t},{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let i,s,o;let a={};if(t=t||{},null==e)return t;do{for(s=(i=Object.getOwnPropertyNames(e)).length;s-- >0;)o=i[s],(!n||n(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=!1!==r&&h(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:d,kindOfTest:p,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;let n=e.indexOf(t,r);return -1!==n&&n===r},toArray:e=>{if(!e)return null;if(g(e))return e;let t=e.length;if(!b(t))return null;let r=Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{let r;let n=(e&&e[Symbol.iterator]).call(e);for(;(r=n.next())&&!r.done;){let n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let r;let n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:M,hasOwnProperty:j,hasOwnProp:j,reduceDescriptors:F,freezeMethods:e=>{F(e,(t,r)=>{if(_(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;if(_(e[r])){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},toObjectSet:(e,t)=>{let r={};return(e=>{e.forEach(e=>{r[e]=!0})})(g(e)?e:String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e*=1)?e:t,findKey:k,global:U,isContextDefined:L,isSpecCompliantForm:function(e){return!!(e&&_(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{let t=Array(10),r=(e,n)=>{if(S(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;let i=g(e)?[]:{};return N(e,(e,t)=>{let s=r(e,n+1);v(s)||(i[t]=s)}),t[n]=void 0,i}}return e};return r(e,0)},isAsyncFn:B,isThenable:e=>e&&(S(e)||_(e))&&_(e.then)&&_(e.catch),setImmediate:V,asap:G};function q(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}W.inherits(q,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.status}}});let z=q.prototype,H={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{H[e]={value:e}}),Object.defineProperties(q,H),Object.defineProperty(z,"isAxiosError",{value:!0}),q.from=(e,t,r,n,i,s)=>{let o=Object.create(z);return W.toFlatObject(e,o,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),q.call(o,e.message,t,r,n,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};var X=r(51642).Buffer;function J(e){return W.isPlainObject(e)||W.isArray(e)}function K(e){return W.endsWith(e,"[]")?e.slice(0,-2):e}function Q(e,t,r){return e?e.concat(t).map(function(e,t){return e=K(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}let Y=W.toFlatObject(W,{},null,function(e){return/^is[A-Z]/.test(e)}),Z=function(e,t,r){if(!W.isObject(e))throw TypeError("target must be an object");t=t||new FormData;let n=(r=W.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!W.isUndefined(t[e])})).metaTokens,i=r.visitor||l,s=r.dots,o=r.indexes,a=(r.Blob||"undefined"!=typeof Blob&&Blob)&&W.isSpecCompliantForm(t);if(!W.isFunction(i))throw TypeError("visitor must be a function");function c(e){if(null===e)return"";if(W.isDate(e))return e.toISOString();if(!a&&W.isBlob(e))throw new q("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(e)||W.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):X.from(e):e}function l(e,r,i){let a=e;if(e&&!i&&"object"==typeof e){if(W.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else{var l;if(W.isArray(e)&&(l=e,W.isArray(l)&&!l.some(J))||(W.isFileList(e)||W.endsWith(r,"[]"))&&(a=W.toArray(e)))return r=K(r),a.forEach(function(e,n){W.isUndefined(e)||null===e||t.append(!0===o?Q([r],n,s):null===o?r:r+"[]",c(e))}),!1}}return!!J(e)||(t.append(Q(i,r,s),c(e)),!1)}let u=[],h=Object.assign(Y,{defaultVisitor:l,convertValue:c,isVisitable:J});if(!W.isObject(e))throw TypeError("data must be an object");return!function e(r,n){if(!W.isUndefined(r)){if(-1!==u.indexOf(r))throw Error("Circular reference detected in "+n.join("."));u.push(r),W.forEach(r,function(r,s){!0===(!(W.isUndefined(r)||null===r)&&i.call(t,r,W.isString(s)?s.trim():s,n,h))&&e(r,n?n.concat(s):[s])}),u.pop()}}(e),t};function ee(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function et(e,t){this._pairs=[],e&&Z(e,this,t)}let er=et.prototype;function en(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ei(e,t,r){let n;if(!t)return e;let i=r&&r.encode||en;W.isFunction(r)&&(r={serialize:r});let s=r&&r.serialize;if(n=s?s(t,r):W.isURLSearchParams(t)?t.toString():new et(t,r).toString(i)){let t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}er.append=function(e,t){this._pairs.push([e,t])},er.toString=function(e){let t=e?function(t){return e.call(this,t,ee)}:ee;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class es{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){W.forEach(this.handlers,function(t){null!==t&&e(t)})}}let eo={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ea="undefined"!=typeof URLSearchParams?URLSearchParams:et,ec="undefined"!=typeof FormData?FormData:null,el="undefined"!=typeof Blob?Blob:null,eu="undefined"!=typeof window&&"undefined"!=typeof document,eh="object"==typeof navigator&&navigator||void 0,ed=eu&&(!eh||0>["ReactNative","NativeScript","NS"].indexOf(eh.product)),ep="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,ef=eu&&window.location.href||"http://localhost",eg={...a,isBrowser:!0,classes:{URLSearchParams:ea,FormData:ec,Blob:el},protocols:["http","https","file","blob","url","data"]},ev=function(e){if(W.isFormData(e)&&W.isFunction(e.entries)){let t={};return W.forEachEntry(e,(e,r)=>{!function e(t,r,n,i){let s=t[i++];if("__proto__"===s)return!0;let o=Number.isFinite(+s),a=i>=t.length;return(s=!s&&W.isArray(n)?n.length:s,a)?W.hasOwnProp(n,s)?n[s]=[n[s],r]:n[s]=r:(n[s]&&W.isObject(n[s])||(n[s]=[]),e(t,r,n[s],i)&&W.isArray(n[s])&&(n[s]=function(e){let t,r;let n={},i=Object.keys(e),s=i.length;for(t=0;t<s;t++)n[r=i[t]]=e[r];return n}(n[s]))),!o}(W.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0]),r,t,0)}),t}return null},em={transitional:eo,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){let r;let n=t.getContentType()||"",i=n.indexOf("application/json")>-1,s=W.isObject(e);if(s&&W.isHTMLForm(e)&&(e=new FormData(e)),W.isFormData(e))return i?JSON.stringify(ev(e)):e;if(W.isArrayBuffer(e)||W.isBuffer(e)||W.isStream(e)||W.isFile(e)||W.isBlob(e)||W.isReadableStream(e))return e;if(W.isArrayBufferView(e))return e.buffer;if(W.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1){var o,a;return(o=e,a=this.formSerializer,Z(o,new eg.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return eg.isNode&&W.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},a))).toString()}if((r=W.isFileList(e))||n.indexOf("multipart/form-data")>-1){let t=this.env&&this.env.FormData;return Z(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),function(e,t,r){if(W.isString(e))try{return(0,JSON.parse)(e),W.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){let t=this.transitional||em.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(W.isResponse(e)||W.isReadableStream(e))return e;if(e&&W.isString(e)&&(r&&!this.responseType||n)){let r=t&&t.silentJSONParsing;try{return JSON.parse(e)}catch(e){if(!r&&n){if("SyntaxError"===e.name)throw q.from(e,q.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:eg.classes.FormData,Blob:eg.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};W.forEach(["delete","get","head","post","put","patch"],e=>{em.headers[e]={}});let ey=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),e_=e=>{let t,r,n;let i={};return e&&e.split("\n").forEach(function(e){n=e.indexOf(":"),t=e.substring(0,n).trim().toLowerCase(),r=e.substring(n+1).trim(),t&&(!i[t]||!ey[t])&&("set-cookie"===t?i[t]?i[t].push(r):i[t]=[r]:i[t]=i[t]?i[t]+", "+r:r)}),i},eb=Symbol("internals");function eS(e){return e&&String(e).trim().toLowerCase()}function eE(e){return!1===e||null==e?e:W.isArray(e)?e.map(eE):String(e)}let ew=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function eA(e,t,r,n,i){if(W.isFunction(n))return n.call(this,t,r);if(i&&(t=r),W.isString(t)){if(W.isString(n))return -1!==t.indexOf(n);if(W.isRegExp(n))return n.test(t)}}class eD{constructor(e){e&&this.set(e)}set(e,t,r){let n=this;function i(e,t,r){let i=eS(t);if(!i)throw Error("header name must be a non-empty string");let s=W.findKey(n,i);s&&void 0!==n[s]&&!0!==r&&(void 0!==r||!1===n[s])||(n[s||t]=eE(e))}let s=(e,t)=>W.forEach(e,(e,r)=>i(e,r,t));if(W.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(W.isString(e)&&(e=e.trim())&&!ew(e))s(e_(e),t);else if(W.isHeaders(e))for(let[t,n]of e.entries())i(n,t,r);else null!=e&&i(t,e,r);return this}get(e,t){if(e=eS(e)){let r=W.findKey(this,e);if(r){let e=this[r];if(!t)return e;if(!0===t)return function(e){let t;let r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;for(;t=n.exec(e);)r[t[1]]=t[2];return r}(e);if(W.isFunction(t))return t.call(this,e,r);if(W.isRegExp(t))return t.exec(e);throw TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=eS(e)){let r=W.findKey(this,e);return!!(r&&void 0!==this[r]&&(!t||eA(this,this[r],r,t)))}return!1}delete(e,t){let r=this,n=!1;function i(e){if(e=eS(e)){let i=W.findKey(r,e);i&&(!t||eA(r,r[i],i,t))&&(delete r[i],n=!0)}}return W.isArray(e)?e.forEach(i):i(e),n}clear(e){let t=Object.keys(this),r=t.length,n=!1;for(;r--;){let i=t[r];(!e||eA(this,this[i],i,e,!0))&&(delete this[i],n=!0)}return n}normalize(e){let t=this,r={};return W.forEach(this,(n,i)=>{let s=W.findKey(r,i);if(s){t[s]=eE(n),delete t[i];return}let o=e?i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r):String(i).trim();o!==i&&delete t[i],t[o]=eE(n),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let t=Object.create(null);return W.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&W.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){let r=new this(e);return t.forEach(e=>r.set(e)),r}static accessor(e){let t=(this[eb]=this[eb]={accessors:{}}).accessors,r=this.prototype;function n(e){let n=eS(e);t[n]||(!function(e,t){let r=W.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,i){return this[n].call(this,t,e,r,i)},configurable:!0})})}(r,e),t[n]=!0)}return W.isArray(e)?e.forEach(n):n(e),this}}function ex(e,t){let r=this||em,n=t||r,i=eD.from(n.headers),s=n.data;return W.forEach(e,function(e){s=e.call(r,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function eT(e){return!!(e&&e.__CANCEL__)}function eC(e,t,r){q.call(this,null==e?"canceled":e,q.ERR_CANCELED,t,r),this.name="CanceledError"}function eO(e,t,r){let n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new q("Request failed with status code "+r.status,[q.ERR_BAD_REQUEST,q.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}eD.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),W.reduceDescriptors(eD.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}}),W.freezeMethods(eD),W.inherits(eC,q,{__CANCEL__:!0});let eI=function(e,t){let r;let n=Array(e=e||10),i=Array(e),s=0,o=0;return t=void 0!==t?t:1e3,function(a){let c=Date.now(),l=i[o];r||(r=c),n[s]=a,i[s]=c;let u=o,h=0;for(;u!==s;)h+=n[u++],u%=e;if((s=(s+1)%e)===o&&(o=(o+1)%e),c-r<t)return;let d=l&&c-l;return d?Math.round(1e3*h/d):void 0}},eR=function(e,t){let r,n,i=0,s=1e3/t,o=(t,s=Date.now())=>{i=s,r=null,n&&(clearTimeout(n),n=null),e.apply(null,t)};return[(...e)=>{let t=Date.now(),a=t-i;a>=s?o(e,t):(r=e,n||(n=setTimeout(()=>{n=null,o(r)},s-a)))},()=>r&&o(r)]},eN=(e,t,r=3)=>{let n=0,i=eI(50,250);return eR(r=>{let s=r.loaded,o=r.lengthComputable?r.total:void 0,a=s-n,c=i(a);n=s,e({loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&s<=o?(o-s)/c:void 0,event:r,lengthComputable:null!=o,[t?"download":"upload"]:!0})},r)},ek=(e,t)=>{let r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},eU=e=>(...t)=>W.asap(()=>e(...t)),eL=eg.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,eg.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(eg.origin),eg.navigator&&/(msie|trident)/i.test(eg.navigator.userAgent)):()=>!0,eP=eg.hasStandardBrowserEnv?{write(e,t,r,n,i,s){let o=[e+"="+encodeURIComponent(t)];W.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),W.isString(n)&&o.push("path="+n),W.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){let t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function eM(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&n||!1==r?t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e:t}let ej=e=>e instanceof eD?{...e}:e;function e$(e,t){t=t||{};let r={};function n(e,t,r,n){return W.isPlainObject(e)&&W.isPlainObject(t)?W.merge.call({caseless:n},e,t):W.isPlainObject(t)?W.merge({},t):W.isArray(t)?t.slice():t}function i(e,t,r,i){return W.isUndefined(t)?W.isUndefined(e)?void 0:n(void 0,e,r,i):n(e,t,r,i)}function s(e,t){if(!W.isUndefined(t))return n(void 0,t)}function o(e,t){return W.isUndefined(t)?W.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function a(r,i,s){return s in t?n(r,i):s in e?n(void 0,r):void 0}let c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t,r)=>i(ej(e),ej(t),r,!0)};return W.forEach(Object.keys(Object.assign({},e,t)),function(n){let s=c[n]||i,o=s(e[n],t[n],n);W.isUndefined(o)&&s!==a||(r[n]=o)}),r}let eF=e=>{let t;let r=e$({},e),{data:n,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:o,headers:a,auth:c}=r;if(r.headers=a=eD.from(a),r.url=ei(eM(r.baseURL,r.url,r.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),W.isFormData(n)){if(eg.hasStandardBrowserEnv||eg.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(t=a.getContentType())){let[e,...r]=t?t.split(";").map(e=>e.trim()).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...r].join("; "))}}if(eg.hasStandardBrowserEnv&&(i&&W.isFunction(i)&&(i=i(r)),i||!1!==i&&eL(r.url))){let e=s&&o&&eP.read(o);e&&a.set(s,e)}return r},eB="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){let n,i,s,o,a;let c=eF(e),l=c.data,u=eD.from(c.headers).normalize(),{responseType:h,onUploadProgress:d,onDownloadProgress:p}=c;function f(){o&&o(),a&&a(),c.cancelToken&&c.cancelToken.unsubscribe(n),c.signal&&c.signal.removeEventListener("abort",n)}let g=new XMLHttpRequest;function v(){if(!g)return;let n=eD.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());eO(function(e){t(e),f()},function(e){r(e),f()},{data:h&&"text"!==h&&"json"!==h?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:n,config:e,request:g}),g=null}g.open(c.method.toUpperCase(),c.url,!0),g.timeout=c.timeout,"onloadend"in g?g.onloadend=v:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(v)},g.onabort=function(){g&&(r(new q("Request aborted",q.ECONNABORTED,e,g)),g=null)},g.onerror=function(){r(new q("Network Error",q.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let t=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded",n=c.transitional||eo;c.timeoutErrorMessage&&(t=c.timeoutErrorMessage),r(new q(t,n.clarifyTimeoutError?q.ETIMEDOUT:q.ECONNABORTED,e,g)),g=null},void 0===l&&u.setContentType(null),"setRequestHeader"in g&&W.forEach(u.toJSON(),function(e,t){g.setRequestHeader(t,e)}),W.isUndefined(c.withCredentials)||(g.withCredentials=!!c.withCredentials),h&&"json"!==h&&(g.responseType=c.responseType),p&&([s,a]=eN(p,!0),g.addEventListener("progress",s)),d&&g.upload&&([i,o]=eN(d),g.upload.addEventListener("progress",i),g.upload.addEventListener("loadend",o)),(c.cancelToken||c.signal)&&(n=t=>{g&&(r(!t||t.type?new eC(null,e,g):t),g.abort(),g=null)},c.cancelToken&&c.cancelToken.subscribe(n),c.signal&&(c.signal.aborted?n():c.signal.addEventListener("abort",n)));let m=function(e){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(c.url);if(m&&-1===eg.protocols.indexOf(m)){r(new q("Unsupported protocol "+m+":",q.ERR_BAD_REQUEST,e));return}g.send(l||null)})},eV=(e,t)=>{let{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController,i=function(e){if(!r){r=!0,o();let t=e instanceof Error?e:this.reason;n.abort(t instanceof q?t:new eC(t instanceof Error?t.message:t))}},s=t&&setTimeout(()=>{s=null,i(new q(`timeout ${t} of ms exceeded`,q.ETIMEDOUT))},t),o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)}),e=null)};e.forEach(e=>e.addEventListener("abort",i));let{signal:a}=n;return a.unsubscribe=()=>W.asap(o),a}},eG=function*(e,t){let r,n=e.byteLength;if(!t||n<t){yield e;return}let i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},eW=async function*(e,t){for await(let r of eq(e))yield*eG(r,t)},eq=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}let t=e.getReader();try{for(;;){let{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},ez=(e,t,r,n)=>{let i;let s=eW(e,t),o=0,a=e=>{!i&&(i=!0,n&&n(e))};return new ReadableStream({async pull(e){try{let{done:t,value:n}=await s.next();if(t){a(),e.close();return}let i=n.byteLength;if(r){let e=o+=i;r(e)}e.enqueue(new Uint8Array(n))}catch(e){throw a(e),e}},cancel:e=>(a(e),s.return())},{highWaterMark:2})},eH="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,eX=eH&&"function"==typeof ReadableStream,eJ=eH&&("function"==typeof TextEncoder?(n=new TextEncoder,e=>n.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer())),eK=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},eQ=eX&&eK(()=>{let e=!1,t=new Request(eg.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),eY=eX&&eK(()=>W.isReadableStream(new Response("").body)),eZ={stream:eY&&(e=>e.body)};eH&&(o=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{eZ[e]||(eZ[e]=W.isFunction(o[e])?t=>t[e]():(t,r)=>{throw new q(`Response type '${e}' is not supported`,q.ERR_NOT_SUPPORT,r)})}));let e0=async e=>{if(null==e)return 0;if(W.isBlob(e))return e.size;if(W.isSpecCompliantForm(e)){let t=new Request(eg.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return W.isArrayBufferView(e)||W.isArrayBuffer(e)?e.byteLength:(W.isURLSearchParams(e)&&(e+=""),W.isString(e))?(await eJ(e)).byteLength:void 0},e1=async(e,t)=>{let r=W.toFiniteNumber(e.getContentLength());return null==r?e0(t):r},e2={http:null,xhr:eB,fetch:eH&&(async e=>{let t,r,{url:n,method:i,data:s,signal:o,cancelToken:a,timeout:c,onDownloadProgress:l,onUploadProgress:u,responseType:h,headers:d,withCredentials:p="same-origin",fetchOptions:f}=eF(e);h=h?(h+"").toLowerCase():"text";let g=eV([o,a&&a.toAbortSignal()],c),v=g&&g.unsubscribe&&(()=>{g.unsubscribe()});try{if(u&&eQ&&"get"!==i&&"head"!==i&&0!==(r=await e1(d,s))){let e,t=new Request(n,{method:"POST",body:s,duplex:"half"});if(W.isFormData(s)&&(e=t.headers.get("content-type"))&&d.setContentType(e),t.body){let[e,n]=ek(r,eN(eU(u)));s=ez(t.body,65536,e,n)}}W.isString(p)||(p=p?"include":"omit");let o="credentials"in Request.prototype;t=new Request(n,{...f,signal:g,method:i.toUpperCase(),headers:d.normalize().toJSON(),body:s,duplex:"half",credentials:o?p:void 0});let a=await fetch(t),c=eY&&("stream"===h||"response"===h);if(eY&&(l||c&&v)){let e={};["status","statusText","headers"].forEach(t=>{e[t]=a[t]});let t=W.toFiniteNumber(a.headers.get("content-length")),[r,n]=l&&ek(t,eN(eU(l),!0))||[];a=new Response(ez(a.body,65536,r,()=>{n&&n(),v&&v()}),e)}h=h||"text";let m=await eZ[W.findKey(eZ,h)||"text"](a,e);return!c&&v&&v(),await new Promise((r,n)=>{eO(r,n,{data:m,headers:eD.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:t})})}catch(r){if(v&&v(),r&&"TypeError"===r.name&&/fetch/i.test(r.message))throw Object.assign(new q("Network Error",q.ERR_NETWORK,e,t),{cause:r.cause||r});throw q.from(r,r&&r.code,e,t)}})};W.forEach(e2,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});let e4=e=>`- ${e}`,e6=e=>W.isFunction(e)||null===e||!1===e,e3={getAdapter:e=>{let t,r;let{length:n}=e=W.isArray(e)?e:[e],i={};for(let s=0;s<n;s++){let n;if(r=t=e[s],!e6(t)&&void 0===(r=e2[(n=String(t)).toLowerCase()]))throw new q(`Unknown adapter '${n}'`);if(r)break;i[n||"#"+s]=r}if(!r){let e=Object.entries(i).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new q("There is no suitable adapter to dispatch the request "+(n?e.length>1?"since :\n"+e.map(e4).join("\n"):" "+e4(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r}};function e5(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new eC(null,e)}function e7(e){return e5(e),e.headers=eD.from(e.headers),e.data=ex.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),e3.getAdapter(e.adapter||em.adapter)(e).then(function(t){return e5(e),t.data=ex.call(e,e.transformResponse,t),t.headers=eD.from(t.headers),t},function(t){return!eT(t)&&(e5(e),t&&t.response&&(t.response.data=ex.call(e,e.transformResponse,t.response),t.response.headers=eD.from(t.response.headers))),Promise.reject(t)})}let e9="1.8.3",e8={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{e8[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});let te={};e8.transitional=function(e,t,r){function n(e,t){return"[Axios v"+e9+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,i,s)=>{if(!1===e)throw new q(n(i," has been removed"+(t?" in "+t:"")),q.ERR_DEPRECATED);return t&&!te[i]&&(te[i]=!0,console.warn(n(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,i,s)}},e8.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};let tt={assertOptions:function(e,t,r){if("object"!=typeof e)throw new q("options must be an object",q.ERR_BAD_OPTION_VALUE);let n=Object.keys(e),i=n.length;for(;i-- >0;){let s=n[i],o=t[s];if(o){let t=e[s],r=void 0===t||o(t,s,e);if(!0!==r)throw new q("option "+s+" must be "+r,q.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new q("Unknown option "+s,q.ERR_BAD_OPTION)}},validators:e8},tr=tt.validators;class tn{constructor(e){this.defaults=e,this.interceptors={request:new es,response:new es}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=Error();let r=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?r&&!String(e.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+r):e.stack=r}catch(e){}}throw e}}_request(e,t){let r,n;"string"==typeof e?(t=t||{}).url=e:t=e||{};let{transitional:i,paramsSerializer:s,headers:o}=t=e$(this.defaults,t);void 0!==i&&tt.assertOptions(i,{silentJSONParsing:tr.transitional(tr.boolean),forcedJSONParsing:tr.transitional(tr.boolean),clarifyTimeoutError:tr.transitional(tr.boolean)},!1),null!=s&&(W.isFunction(s)?t.paramsSerializer={serialize:s}:tt.assertOptions(s,{encode:tr.function,serialize:tr.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),tt.assertOptions(t,{baseUrl:tr.spelling("baseURL"),withXsrfToken:tr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=o&&W.merge(o.common,o[t.method]);o&&W.forEach(["delete","get","head","post","put","patch","common"],e=>{delete o[e]}),t.headers=eD.concat(a,o);let c=[],l=!0;this.interceptors.request.forEach(function(e){("function"!=typeof e.runWhen||!1!==e.runWhen(t))&&(l=l&&e.synchronous,c.unshift(e.fulfilled,e.rejected))});let u=[];this.interceptors.response.forEach(function(e){u.push(e.fulfilled,e.rejected)});let h=0;if(!l){let e=[e7.bind(this),void 0];for(e.unshift.apply(e,c),e.push.apply(e,u),n=e.length,r=Promise.resolve(t);h<n;)r=r.then(e[h++],e[h++]);return r}n=c.length;let d=t;for(h=0;h<n;){let e=c[h++],t=c[h++];try{d=e(d)}catch(e){t.call(this,e);break}}try{r=e7.call(this,d)}catch(e){return Promise.reject(e)}for(h=0,n=u.length;h<n;)r=r.then(u[h++],u[h++]);return r}getUri(e){return ei(eM((e=e$(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}W.forEach(["delete","get","head","options"],function(e){tn.prototype[e]=function(t,r){return this.request(e$(r||{},{method:e,url:t,data:(r||{}).data}))}}),W.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,i){return this.request(e$(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}tn.prototype[e]=t(),tn.prototype[e+"Form"]=t(!0)});class ti{constructor(e){let t;if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});let r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;let n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,i){!r.reason&&(r.reason=new eC(e,n,i),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){let e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new ti(function(t){e=t}),cancel:e}}}let ts={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ts).forEach(([e,t])=>{ts[t]=e});let to=function e(t){let r=new tn(t),n=c(tn.prototype.request,r);return W.extend(n,tn.prototype,r,{allOwnKeys:!0}),W.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(e$(t,r))},n}(em);to.Axios=tn,to.CanceledError=eC,to.CancelToken=ti,to.isCancel=eT,to.VERSION=e9,to.toFormData=Z,to.AxiosError=q,to.Cancel=to.CanceledError,to.all=function(e){return Promise.all(e)},to.spread=function(e){return function(t){return e.apply(null,t)}},to.isAxiosError=function(e){return W.isObject(e)&&!0===e.isAxiosError},to.mergeConfig=e$,to.AxiosHeaders=eD,to.formToJSON=e=>ev(W.isHTMLForm(e)?new FormData(e):e),to.getAdapter=e3.getAdapter,to.HttpStatusCode=ts,to.default=to;let ta=to},79296:(e,t,r)=>{let n=r(59405);e.exports=(e,t,r)=>{let i=new n(e,r),s=new n(t,r);return i.compare(s)||i.compareBuild(s)}},82529:(e,t,r)=>{let n=r(59405);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},82663:(e,t,r)=>{"use strict";r.d(t,{H:()=>b});var n=r(43414),i=r(7541),s=r(32224),o=r(42948);function a(e,t){return void 0===t&&(t=0),(0,s.N)(function(r,n){r.subscribe((0,o._)(n,function(r){return(0,i.N)(n,e,function(){return n.next(r)},t)},function(){return(0,i.N)(n,e,function(){return n.complete()},t)},function(r){return(0,i.N)(n,e,function(){return n.error(r)},t)}))})}function c(e,t){return void 0===t&&(t=0),(0,s.N)(function(r,n){n.add(e.schedule(function(){return r.subscribe(n)},t))})}var l=r(33300),u=r(27503),h=r(2913);function d(e,t){if(!e)throw Error("Iterable cannot be null");return new l.c(function(r){(0,i.N)(r,t,function(){var n=e[Symbol.asyncIterator]();(0,i.N)(r,t,function(){n.next().then(function(e){e.done?r.complete():r.next(e.value)})},0,!0)})})}var p=r(19627),f=r(13241),g=r(26921),v=r(69911),m=r(12049),y=r(60149),_=r(60782);function b(e,t){return t?function(e,t){if(null!=e){if((0,p.l)(e))return(0,n.Tg)(e).pipe(c(t),a(t));if((0,g.X)(e))return new l.c(function(r){var n=0;return t.schedule(function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())})});if((0,f.y)(e))return(0,n.Tg)(e).pipe(c(t),a(t));if((0,m.T)(e))return d(e,t);if((0,v.x)(e))return new l.c(function(r){var n;return(0,i.N)(r,t,function(){n=e[u.l](),(0,i.N)(r,t,function(){var e,t,i;try{t=(e=n.next()).value,i=e.done}catch(e){r.error(e);return}i?r.complete():r.next(t)},0,!0)}),function(){return(0,h.T)(null==n?void 0:n.return)&&n.return()}});if((0,_.U)(e))return d((0,_.C)(e),t)}throw(0,y.L)(e)}(e,t):(0,n.Tg)(e)}},83195:(e,t,r)=>{let n=r(82529);e.exports=(e,t)=>{let r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},83302:(e,t,r)=>{"use strict";r.d(t,{t:()=>i});var n=r(13829),i=function(e){function t(t){var r=e.call(this)||this;return r._value=t,r}return(0,n.C6)(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r.closed||t.next(this._value),r},t.prototype.getValue=function(){var e=this.hasError,t=this.thrownError,r=this._value;if(e)throw t;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(r(90061).B)},84445:(e,t,r)=>{"use strict";r.d(t,{U:()=>s});var n=r(53112),i=r(78159);function s(e){return void 0===e&&(e=1/0),(0,n.Z)(i.D,e)}},84899:(e,t,r)=>{let{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:s}=r(35927),o=r(65937),a=(t=e.exports={}).re=[],c=t.safeRe=[],l=t.src=[],u=t.t={},h=0,d="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",s],[d,i]],f=e=>{for(let[t,r]of p)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},g=(e,t,r)=>{let n=f(t),i=h++;o(e,i,t),u[e]=i,l[i]=t,a[i]=new RegExp(t,r?"g":void 0),c[i]=new RegExp(n,r?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),g("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),g("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${d}+`),g("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),g("FULL",`^${l[u.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),g("LOOSE",`^${l[u.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),g("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),g("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?`+`(?:${l[u.BUILD]})?`+"(?:$|[^\\d])"),g("COERCERTL",l[u.COERCE],!0),g("COERCERTLFULL",l[u.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",g("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",g("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},88496:(e,t,r)=>{let n=r(79296);e.exports=(e,t)=>e.sort((e,r)=>n(r,e,t))},94696:(e,t,r)=>{"use strict";r.d(t,{mj:()=>h}),r(63286);var n=r(52812),i=r(57497);let s=new WeakMap;function o(e,t,r){let n=s.get(e);return n?t in n||(n[t]=r()):(n={[t]:r()},s.set(e,n)),n[t]}let a={},c=e=>"string"==typeof e?{type:e}:"function"==typeof e?"resolve"in e?{type:e.type}:{type:e.name}:e;class l{constructor(e,t){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=t._parent,this.key=t._key,this.machine=t._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(n.S),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?(0,n.m)(this.config.states,(e,t)=>new l(e,{_parent:this,_key:t,_machine:this.machine})):a,"compound"===this.type&&!this.config.initial)throw Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=!0===this.config.history?"shallow":this.config.history||!1,this.entry=(0,n.t)(this.config.entry).slice(),this.exit=(0,n.t)(this.config.exit).slice(),this.meta=this.config.meta,this.output="final"!==this.type&&this.parent?void 0:this.config.output,this.tags=(0,n.t)(e.tags).slice()}_initialize(){this.transitions=(0,n.f)(this),this.config.always&&(this.always=(0,n.a)(this.config.always).map(e=>(0,n.b)(this,n.N,e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(c),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(c),eventType:null})}:void 0,history:this.history,states:(0,n.m)(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(c)})),entry:this.entry.map(c),exit:this.exit.map(c),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return o(this,"invoke",()=>(0,n.t)(this.config.invoke).map((e,t)=>{let{src:r,systemId:i}=e,s=e.id??(0,n.c)(this.id,t),o="string"==typeof r?r:`xstate.invoke.${(0,n.c)(this.id,t)}`;return{...e,src:o,id:s,systemId:i,toJSON(){let{onDone:t,onError:r,...n}=e;return{...n,type:"xstate.invoke",src:o,id:s}}}}))}get on(){return o(this,"on",()=>[...this.transitions].flatMap(([e,t])=>t.map(t=>[e,t])).reduce((e,[t,r])=>(e[t]=e[t]||[],e[t].push(r),e),{}))}get after(){return o(this,"delayedTransitions",()=>(0,n.g)(this))}get initial(){return o(this,"initial",()=>(0,n.d)(this,this.config.initial))}next(e,t){let r;let i=t.type,s=[];for(let a of o(this,`candidates-${i}`,()=>(0,n.h)(this,i))){let{guard:o}=a,c=e.context,l=!1;try{l=!o||(0,n.e)(o,c,t,e)}catch(t){let e="string"==typeof o?o:"object"==typeof o?o.type:void 0;throw Error(`Unable to evaluate guard ${e?`'${e}' `:""}in transition for event '${i}' in state node '${this.id}':
${t.message}`)}if(l){s.push(...a.actions),r=a;break}}return r?[r]:void 0}get events(){return o(this,"events",()=>{let{states:e}=this,t=new Set(this.ownEvents);if(e)for(let r of Object.keys(e)){let n=e[r];if(n.states)for(let e of n.events)t.add(`${e}`)}return Array.from(t)})}get ownEvents(){return Array.from(new Set([...this.transitions.keys()].filter(e=>this.transitions.get(e).some(e=>!(!e.target&&!e.actions.length&&!e.reenter)))))}}class u{constructor(e,t){this.config=e,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=e.id||"(machine)",this.implementations={actors:t?.actors??{},actions:t?.actions??{},delays:t?.delays??{},guards:t?.guards??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new l(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(e){let{actions:t,guards:r,actors:n,delays:i}=this.implementations;return new u(this.config,{actions:{...t,...e.actions},guards:{...r,...e.guards},actors:{...n,...e.actors},delays:{...i,...e.delays}})}resolveState(e){let t=(0,n.r)(this.root,e.value),r=(0,n.i)((0,n.j)(this.root,t));return(0,n.k)({_nodes:[...r],context:e.context||{},children:{},status:(0,n.l)(r,this.root)?"done":e.status||"active",output:e.output,error:e.error,historyValue:e.historyValue},this)}transition(e,t,r){return(0,n.n)(e,t,r,[]).snapshot}microstep(e,t,r){return(0,n.n)(e,t,r,[]).microstates}getTransitionData(e,t){return(0,n.o)(this.root,e.value,e,t)||[]}getPreInitialState(e,t,r){let{context:s}=this.config,o=(0,n.k)({context:"function"!=typeof s&&s?s:{},_nodes:[this.root],children:{},status:"active"},this);return"function"==typeof s?(0,n.p)(o,t,e,[(0,i.a)(({spawn:e,event:t,self:r})=>s({spawn:e,input:t.input,self:r}))],r,void 0):o}getInitialSnapshot(e,t){let r=(0,n.q)(t),i=[],s=this.getPreInitialState(e,r,i),o=(0,n.s)([{target:[...(0,n.u)(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],s,e,r,!0,i),{snapshot:a}=(0,n.n)(o,r,e,i);return a}start(e){Object.values(e.children).forEach(e=>{"active"===e.getSnapshot().status&&e.start()})}getStateNodeById(e){let t=(0,n.v)(e),r=t.slice(1),i=(0,n.w)(t[0])?t[0].slice(1):t[0],s=this.idMap.get(i);if(!s)throw Error(`Child state node '#${i}' does not exist on machine '${this.id}'`);return(0,n.x)(s,r)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(e,t){return(0,n.y)(e,t)}restoreSnapshot(e,t){let r={},i=e.children;Object.keys(i).forEach(e=>{let s=i[e],o=s.snapshot,a=s.src,c="string"==typeof a?(0,n.z)(this,a):a;if(!c)return;let l=(0,n.A)(c,{id:e,parent:t.self,syncSnapshot:s.syncSnapshot,snapshot:o,src:a,systemId:s.systemId});r[e]=l});let s=(0,n.k)({...e,children:r,_nodes:Array.from((0,n.i)((0,n.j)(this.root,e.value)))},this),o=new Set;return!function e(t,r){if(!o.has(t))for(let i in o.add(t),t){let s=t[i];if(s&&"object"==typeof s){if("xstate$$type"in s&&s.xstate$$type===n.$){t[i]=r[s.id];continue}e(s,r)}}}(s.context,r),s}}function h({schemas:e,actors:t,actions:r,guards:n,delays:i}){return{createMachine:s=>new u({...s,schemas:e},{actors:t,actions:r,guards:n,delays:i})}}},95937:(e,t,r)=>{let n=Symbol("SemVer ANY");class i{static get ANY(){return n}constructor(e,t){if(t=s(t),e instanceof i){if(!!t.loose===e.loose)return e;e=e.value}l("comparator",e=e.trim().split(/\s+/).join(" "),t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,l("comp",this)}parse(e){let t=this.options.loose?o[a.COMPARATORLOOSE]:o[a.COMPARATOR],r=e.match(t);if(!r)throw TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new u(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(l("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}return c(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw TypeError("a Comparator is required");return""===this.operator?""===this.value||new h(e.value,t).test(this.value):""===e.operator?""===e.value||new h(this.value,t).test(e.semver):!((t=s(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||c(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||c(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">"))}}e.exports=i;let s=r(63130),{safeRe:o,t:a}=r(84899),c=r(33998),l=r(65937),u=r(59405),h=r(57334)},97750:(e,t,r)=>{let n=r(79296);e.exports=(e,t)=>e.sort((e,r)=>n(e,r,t))},97935:(e,t,r)=>{let n=r(59405),i=r(82529),{safeRe:s,t:o}=r(84899);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let n;let i=t.includePrerelease?s[o.COERCERTLFULL]:s[o.COERCERTL];for(;(n=i.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&n.index+n[0].length===r.index+r[0].length||(r=n),i.lastIndex=n.index+n[1].length+n[2].length;i.lastIndex=-1}else r=e.match(t.includePrerelease?s[o.COERCEFULL]:s[o.COERCE]);if(null===r)return null;let a=r[2],c=r[3]||"0",l=r[4]||"0",u=t.includePrerelease&&r[5]?`-${r[5]}`:"",h=t.includePrerelease&&r[6]?`+${r[6]}`:"";return i(`${a}.${c}.${l}${u}${h}`,t)}}}]);
//# sourceMappingURL=2220.c0321b215296070c.js.map