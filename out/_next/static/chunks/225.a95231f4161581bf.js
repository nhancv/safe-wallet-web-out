"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[225],{40225:(e,t,o)=>{o.r(t),o.d(t,{default:()=>L});var n=o(6029),i=o(24334),a=o(47214),l=o(13484),s=o(81173),r=o(80779),c=o(85591),d=o(17358),u=o(28056),x=o(66416),h=o(43255),v=o(6305),p=o(50293),w=o(30697),f=o(11353),m=o(24007),y=o(28729),A=o(58426),j=o(88683),g=o(85205),E=o(56366),S=o(79651),C=o(57187),_=o(3640),k=o(78726),P=o(55729),b=o(10996),G=o(92178),N=o(45129),T=o(69629),I=o(18492),z=o(96049),F=o(12002);let R=e=>{var t;let o=(0,w._J)(),[n]=(0,f.Ay)(),i=e&&((0,v.Ky)(null==e?void 0:e.props)?null==e?void 0:null===(t=e.props.safeDeploymentConfig)||void 0===t?void 0:t.safeVersion:null==e?void 0:e.props.safeVersion),{gasLimit:a}=(0,G.Z)(null==e?void 0:e.props,i),l=o&&(0,F.jI)(o,F.Gv.EIP1559),s=null==n?void 0:n.maxFeePerGas,r=null==n?void 0:n.maxPriorityFeePerGas,c=l?{maxFeePerGas:null==s?void 0:s.toString(),maxPriorityFeePerGas:null==r?void 0:r.toString(),gasLimit:null==a?void 0:a.toString()}:{gasPrice:null==s?void 0:s.toString(),gasLimit:null==a?void 0:a.toString()};return{options:c,totalFee:(0,f.$c)(s,a,o),walletCanPay:(0,A.A)({gasLimit:a,maxFeePerGas:s})}},L=()=>{let[e,t]=(0,P.useState)(!0),[o,f]=(0,P.useState)(),[A,G]=(0,P.useState)(u.S.RELAY),L=(0,w._J)(),Y=(0,p.Ay)(),{safeAddress:D}=(0,y.A)(),J=(0,C.GV)(e=>(0,h.Bo)(e,Y,D)),{setTxFlow:O}=(0,P.useContext)(s.P),V=(0,j.Ay)(),{options:Z,totalFee:K,walletCanPay:X}=R(J),H=(0,N.A)(),M=(0,P.useMemo)(()=>(0,v.kp)(J,Y),[J,Y]),U=J&&(0,v.Ky)(null==J?void 0:J.props)?null==J?void 0:J.props.safeAccountConfig:void 0,W=(null==M?void 0:M.owners)||[],[$]=(0,m.x6)(W),B=(0,_.v)($),q=B&&A===u.S.RELAY;if(!J||!M)return null;let{owners:Q,threshold:ee,safeVersion:et}=M,eo=(0,z.getSafeToL2SetupDeployment)({version:"1.4.1",network:null==L?void 0:L.chainId}),en=null==eo?void 0:eo.defaultAddress,ei=(0,b.xU)(null==U?void 0:U.to,en),ea=e=>{(0,g.sx)({...E.V.CREATE,label:E.p.activate_without_tx}),(0,g.sx)({...E.V.EXECUTE,label:E.p.activate_without_tx}),(0,g.sx)(g.Cw.ONCHAIN_INTERACTION),e&&(0,x.p5)(x.Zf.PROCESSING,{groupKey:v.Xh,txHash:e,safeAddress:D}),O(void 0)},el=async()=>{if(V&&L){(0,g.sx)({...g.kg.PROCEED_WITH_TX,label:E.p.activate_without_tx}),t(!1),f(void 0);try{if(q){let e=await (0,i.ST)(L,J.props);(0,x.p5)(x.Zf.RELAYING,{groupKey:v.Xh,taskId:e,safeAddress:D}),ea()}else await (0,i.sZ)(V.provider,J.props,null!=et?et:(0,F.Tw)(L),L,Z,ea,!!ei||void 0)}catch(o){let e=(0,S.z)(o);t(!0),f(e);return}}},es=!e||H;return(0,n.jsx)(c.A,{title:"Activate account",hideNonce:!0,children:(0,n.jsxs)(r.A,{children:[(0,n.jsx)(k.o5u,{children:"You're about to deploy this Safe Account and will have to confirm the transaction with your connected wallet."}),(0,n.jsx)(k.cGx,{sx:{mx:-3,my:2}}),(0,n.jsx)(a.GT,{owners:Q.map(e=>({name:"",address:e})),threshold:ee,networks:L?[L]:[]}),(0,n.jsx)(k.cGx,{sx:{mx:-3,mt:2,mb:1}}),(0,n.jsxs)(k.azJ,{display:"flex",flexDirection:"column",gap:3,children:[B&&(0,n.jsx)(k.xA9,{container:!0,spacing:3,children:(0,n.jsx)(l.A,{name:"Execution method",value:(0,n.jsx)(u.Z,{executionMethod:A,setExecutionMethod:G,relays:$})})}),(0,n.jsx)(k.xA9,{"data-testid":"network-fee-section",container:!0,spacing:3,children:(0,n.jsx)(l.A,{name:"Est. network fee",value:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.dz,{totalFee:K,isWaived:q||H,chain:L}),!q&&(0,n.jsx)(k.o5u,{variant:"body2",color:"text.secondary",mt:1,children:H?"Switch your connected wallet to ".concat(null==L?void 0:L.chainName," to see the correct estimated network fee"):"You will have to confirm a transaction with your connected wallet."})]})})}),o&&(0,n.jsx)(k.azJ,{mt:1,children:(0,n.jsx)(d.A,{error:o,children:"Error submitting the transaction. Please try again."})}),H&&(0,n.jsx)(T.A,{}),!X&&!q&&(0,n.jsx)(d.A,{children:"Your connected wallet doesn't have enough funds to execute this transaction"})]}),(0,n.jsx)(k.cGx,{sx:{mx:-3,mt:2,mb:1}}),(0,n.jsx)(k.azJ,{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:3,children:(0,n.jsx)(I.A,{checkNetwork:!es,allowNonOwner:!0,allowUndeployedSafe:!0,children:t=>(0,n.jsx)(k.$nd,{"data-testid":"activate-account-flow-btn",onClick:el,variant:"contained",size:"stretched",disabled:!t||es,children:e?"Activate":(0,n.jsx)(k.PaH,{size:20})})})})]})})}}}]);
//# sourceMappingURL=225.a95231f4161581bf.js.map