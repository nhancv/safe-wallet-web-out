"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[260],{260:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var r=a(6029),n=a(85591),s=a(28381),i=a(55729),o=a(78726),d=a(18492),l=a(26247),c=a(24365),u=a(88683),h=a(28729),E=a(17358),x=a(80779),v=a(81173),A=a(69629),S=a(20738),f=a(67732);function m(e){let{item:t}=e,{submitError:a}=(0,i.useContext)(f.C),[,n]=(0,S.rt)(t),[,s]=(0,S.Rp)(t),o=null!=n?n:s;return a||o?(0,r.jsxs)(r.Fragment,{children:[o&&(0,r.jsx)(E.A,{error:o,children:"This transaction will most likely fail. To save gas costs, avoid executing the transaction."}),a&&(0,r.jsx)(E.A,{error:a,children:"Error submitting the transaction. Please try again."})]}):null}var w=a(38149),y=a(8694),C=a(18969),I=a(4876),g=a(66072),T=a(11353),R=a(30697),P=a(12002);let p=e=>{let{item:t}=e,{asyncCallback:a,isLoading:n,error:s}=(0,y.V)(c._L),S=(0,u.Ay)(),{safe:f}=(0,h.A)(),{setTxFlow:p}=(0,i.useContext)(v.P),{setNonceNeeded:_}=(0,i.useContext)(g.H),[b]=(0,T.Ay)(),N=(0,R._J)(),O=(0,i.useCallback)(async e=>{var r,n,s;if(e.preventDefault(),!S||!b)return;let i=N&&(0,P.jI)(N,P.Gv.EIP1559)?{maxFeePerGas:null==b?void 0:null===(r=b.maxFeePerGas)||void 0===r?void 0:r.toString(),maxPriorityFeePerGas:null==b?void 0:null===(n=b.maxPriorityFeePerGas)||void 0===n?void 0:n.toString()}:{gasPrice:null==b?void 0:null===(s=b.maxFeePerGas)||void 0===s?void 0:s.toString()};try{await a({provider:S.provider,chainId:f.chainId,args:t.args,delayModifierAddress:t.address,signerAddress:S.address,overrides:i}),p(void 0)}catch(e){(0,l.Oz)(l.I._812,e)}},[S,b,N,a,f.chainId,t.args,t.address,p]);return(0,i.useEffect)(()=>{_(!1)},[_]),(0,r.jsx)(x.A,{children:(0,r.jsxs)("form",{onSubmit:O,children:[(0,r.jsxs)(o.BJc,{sx:{gap:3,mb:2},children:[(0,r.jsx)(o.o5u,{children:"Execute this transaction to finalize the recovery."}),(0,r.jsx)(C.A,{title:"Initiator",children:(0,r.jsx)(I.A,{address:t.executor,showName:!0,showCopyButton:!0,hasExplorer:!0})}),(0,r.jsx)(o.cGx,{sx:{mx:-3}}),(0,r.jsx)(w.E,{item:t}),(0,r.jsx)(A.A,{}),(0,r.jsx)(m,{item:t}),s&&(0,r.jsx)(E.A,{error:s,children:"Error submitting the transaction."})]}),(0,r.jsx)(o.cGx,{sx:{mx:-3,my:3.5}}),(0,r.jsx)(o.waF,{children:(0,r.jsx)(d.A,{allowNonOwner:!0,children:e=>(0,r.jsx)(o.$nd,{"data-testid":"execute-through-role-form-btn",variant:"contained",type:"submit",disabled:!e||n,sx:{minWidth:"112px"},children:n?(0,r.jsx)(o.PaH,{size:20}):"Execute"})})})]})})},_=e=>{let{item:t}=e;return(0,r.jsx)(n.A,{title:"Recovery",subtitle:"Execute recovery",icon:s.A,step:0,hideNonce:!0,children:(0,r.jsx)(p,{item:t})})}},12668:(e,t,a)=>{a.d(t,{E8:()=>n,M8:()=>s,aG:()=>o,uF:()=>d});var r=a(63388),n=function(e){return e.PROCESSING_BY_SMART_CONTRACT_WALLET="PROCESSING_BY_SMART_CONTRACT_WALLET",e.PROCESSING="PROCESSING",e.PROCESSED="PROCESSED",e.SUCCESS="SUCCESS",e.FAILED="FAILED",e.REVERTED="REVERTED",e}({}),s=function(e){return e.PROPOSAL="PROPOSAL",e.EXECUTION="EXECUTION",e.SKIP_EXPIRED="SKIP_EXPIRED",e}({});let i=new r.A,o=i.dispatch.bind(i),d=i.subscribe.bind(i);Object.values(n).forEach(e=>{d(e,t=>{console.info("Recovery ".concat(e," event received"),t)})})},20738:(e,t,a)=>{a.d(t,{Cw:()=>u,Rp:()=>E,rt:()=>h});var r=a(48199),n=a(88683),s=a(32294),i=a(8694),o=a(28729),d=a(7602),l=a(72207),c=a(51458);function u(e,t){let a=(0,n.Ay)(),{safe:l}=(0,o.A)(),u=(0,s.vH)(),h=(0,c.f)();return(0,i.A)(async()=>{if(!h||!t||!a||!u||!e)return;let n=(0,d.b)(a,l.chainId,u),s=(0,r.k)(r.v.DELAY,e,n),i=await n.getSigner();return s.connect(i).execTransactionFromModule.staticCall(t.data.to,t.data.value,t.data.data,t.data.operation)},[h,t,a,u,l.chainId,e])}function h(e){let t=(0,n.Ay)(),{safe:a}=(0,o.A)(),c=(0,s.vH)(),{isExecutable:u}=(0,l.y)(e);return(0,i.A)(async()=>{if(!u||!(null==t?void 0:t.address)||!c)return;let n=(0,d.b)(t,a.chainId,c),s=(0,r.k)(r.v.DELAY,e.address,n),i=await n.getSigner(),o=s.connect(i),{to:l,value:h,data:E,operation:x}=e.args;return await o.executeNextTx.staticCall(l,h,E,x),!0},[u,e.address,e.args,a.chainId,t,c])}function E(e){let t=(0,n.Ay)(),{safe:a}=(0,o.A)(),c=(0,s.vH)(),{isExpired:u}=(0,l.y)(e);return(0,i.A)(async()=>{if(!u||!(null==t?void 0:t.address)||!c)return;let n=(0,d.b)(t,a.chainId,c),s=(0,r.k)(r.v.DELAY,e.address,n),i=await n.getSigner(),o=s.connect(i);return await o.skipExpired.staticCall(),!0},[u,e.address,a.chainId,t,c])}},24365:(e,t,a)=>{a.d(t,{_:()=>E,_L:()=>h,wQ:()=>u});var r=a(48199),n=a(22510),s=a(12668),i=a(79651),o=a(76870),d=a(7639);async function l(e){let{provider:t,chainId:a,delayModifierAddress:n,signerAddress:s}=e,i=await (0,d.tA)(a,s),l=await (0,o.RF)(t);return{isUnchecked:i,delayModifier:(0,r.k)(r.v.DELAY,n,l).connect(l)}}function c(e){let{tx:t,...a}=e,r={...a,txHash:t.hash};(0,s.aG)(s.E8.PROCESSING,r),t.wait().then(e=>{(0,n.EB)(e)?(0,s.aG)(s.E8.REVERTED,{...r,error:Error("Transaction reverted by EVM")}):(0,s.aG)(s.E8.PROCESSED,r)}).catch(e=>{(0,n.w1)(e)?(0,s.aG)(s.E8.PROCESSED,r):(0,s.aG)(s.E8.FAILED,{...r,error:(0,i.z)(e)})})}async function u(e){let t,{provider:a,safe:r,safeTx:n,delayModifierAddress:o,signerAddress:d,overrides:u}=e,{delayModifier:h,isUnchecked:E}=await l({provider:a,chainId:r.chainId,delayModifierAddress:o,signerAddress:d}),x=s.M8.PROPOSAL;try{t=await h.getTransactionHash(n.data.to,n.data.value,n.data.data,n.data.operation);let e=await h.execTransactionFromModule(n.data.to,n.data.value,n.data.data,n.data.operation,u);E?(0,s.aG)(s.E8.PROCESSING_BY_SMART_CONTRACT_WALLET,{moduleAddress:o,recoveryTxHash:t,txType:x,txHash:e.hash}):c({moduleAddress:o,recoveryTxHash:t,txType:x,tx:e})}catch(e){throw(0,s.aG)(s.E8.FAILED,{moduleAddress:o,recoveryTxHash:t,txType:x,error:(0,i.z)(e)}),e}}async function h(e){let{provider:t,chainId:a,args:r,delayModifierAddress:n,signerAddress:o,overrides:d}=e,{delayModifier:u,isUnchecked:h}=await l({provider:t,chainId:a,delayModifierAddress:n,signerAddress:o}),E=s.M8.EXECUTION;try{let e=await u.executeNextTx(r.to,r.value,r.data,r.operation,d);h?(0,s.aG)(s.E8.PROCESSING_BY_SMART_CONTRACT_WALLET,{moduleAddress:n,recoveryTxHash:r.txHash,txType:E,txHash:e.hash}):c({moduleAddress:n,recoveryTxHash:r.txHash,txType:E,tx:e})}catch(e){throw(0,s.aG)(s.E8.FAILED,{moduleAddress:n,recoveryTxHash:r.txHash,txType:E,error:(0,i.z)(e)}),e}}async function E(e){let{provider:t,chainId:a,delayModifierAddress:r,recoveryTxHash:n,signerAddress:o}=e,{delayModifier:d,isUnchecked:u}=await l({provider:t,chainId:a,delayModifierAddress:r,signerAddress:o}),h=s.M8.SKIP_EXPIRED;try{let e=await d.skipExpired();u?(0,s.aG)(s.E8.PROCESSING_BY_SMART_CONTRACT_WALLET,{moduleAddress:r,recoveryTxHash:n,txType:h,txHash:e.hash}):c({moduleAddress:r,recoveryTxHash:n,txType:h,tx:e})}catch(e){throw(0,s.aG)(s.E8.FAILED,{moduleAddress:r,recoveryTxHash:n,txType:h,error:(0,i.z)(e)}),e}}},38149:(e,t,a)=>{a.d(t,{E:()=>S});var r=a(6029),n=a(28798),s=a(55729),i=a(4876),o=a(97625),d=a(17358),l=a(51458),c=a(28729),u=a(26247),h=a(10996),E=a(52872),x=a(96049),v=a(7008),A=a(56182);function S(e){let{item:t}=e,{args:a,isMalicious:S}=t,{safe:f}=(0,c.A)(),m=(0,l.f)(),w=(0,s.useMemo)(()=>{try{var e;return e={to:a.to,value:a.value.toString(),data:a.data},((0,E.cb)(e.data)?(0,A.decodeMultiSendData)(e.data):[e]).reduce((e,t)=>(function(e,t){var a;let r=(0,x.getSafeSingletonDeployment)({network:e.chainId,version:null!==(a=e.version)&&void 0!==a?a:void 0});if(!r)throw Error("No Safe deployment found");let n=new v.KA(r.abi),s=e.owners,i=e.threshold;if((0,E.fp)(t.data)){let[,a,r]=n.decodeFunctionData("swapOwner",t.data);s=e.owners.map(e=>(0,h.xU)(e.value,a)?{value:r}:e)}else if((0,E.ib)(t.data)){let[e,a]=n.decodeFunctionData("addOwnerWithThreshold",t.data);s=s.concat({value:e}),i=Number(a)}else if((0,E.YN)(t.data)){let[,a,r]=n.decodeFunctionData("removeOwner",t.data);s=e.owners.filter(e=>!(0,h.xU)(e.value,a)),i=Number(r)}else if((0,E.KU)(t.data)){let[e]=n.decodeFunctionData("changeThreshold",t.data);i=Number(e)}else throw Error("Unexpected transaction");return{...e,owners:s,threshold:i}})(e,t),f)}catch(e){(0,u.vV)(u.I._811,e)}},[a.data,a.to,a.value,f.threshold,f.owners]);return S?(0,r.jsx)(d.A,{children:"This transaction potentially calls malicious actions. We recommend cancelling it."}):w&&0!==w.owners.length?(0,r.jsxs)(o.d,{title:"Add signer(s):",children:[w.owners.map(e=>(0,r.jsx)(i.A,{address:e.value,shortAddress:!1,showCopyButton:!0,hasExplorer:!0},e.value)),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.o5u,{fontWeight:700,gutterBottom:!0,children:"Required confirmations for new transactions:"}),(0,r.jsxs)(n.o5u,{children:[w.threshold," out of ",w.owners.length," owner(s)"]})]})]}):(0,r.jsxs)(d.A,{children:["This recovery proposal will fail as the owner structure has since been modified. We recommend cancelling it",m?" and trying again":"","."]})}},67732:(e,t,a)=>{a.d(t,{C:()=>s,S:()=>i});var r=a(6029),n=a(55729);let s=(0,n.createContext)({submitError:void 0,setSubmitError:()=>{}});function i(e){let{children:t}=e,[a,i]=(0,n.useState)(void 0);return(0,r.jsx)(s.Provider,{value:{submitError:a,setSubmitError:i},children:t})}},72207:(e,t,a)=>{a.d(t,{y:()=>o});var r=a(55729),n=a(42751),s=a(3087),i=a(10996);function o(e){let{validFrom:t,expiresAt:a,transactionHash:o,args:d,address:l}=e,{state:c,pending:u}=s.A.useStore()||{},h=null==c?void 0:c[0],E=h&&(0,n.sp)(h,o),x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,[t,a]=(0,r.useState)(Date.now());return(0,r.useEffect)(()=>{let t=setInterval(()=>{a(t=>t+e)},e);return()=>{clearInterval(t)}},[e]),t}(6e4),v=Number(t)-x,A=v<=0,S=null!==a&&Number(a)<=Date.now(),f=!E||(0,i.xU)(E.address,l)&&BigInt(d.queueNonce)===BigInt(E.txNonce),m=!!(null==u?void 0:u[d.txHash]),w=A?0:Math.ceil(v/1e3);return{isNext:f,isExecutable:f&&A&&!S,isExpired:S,remainingSeconds:w,isPending:m}}}}]);
//# sourceMappingURL=260.a749842f89d31b3c.js.map