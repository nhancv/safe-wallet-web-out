"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4882],{5813:(e,r,t)=>{t.d(r,{a:()=>n});let n={THRESHOLD:"The threshold of a Safe Account specifies how many signers need to confirm a Safe Account transaction before it can be executed.",REVIEW_WINDOW:"A period that begins after a recovery is submitted on-chain, during which the Safe Account signers can review the proposal and cancel it before it is executable.",PROPOSAL_EXPIRY:"A period after which the recovery proposal will expire and can no longer be executed."}},14882:(e,r,t)=>{t.r(r),t.d(r,{ChangeThresholdFlowFieldNames:()=>E,default:()=>_});var n=t(6029),s=t(28381),o=t(28729),i=t(88992),l=t(38830),a=t(55729),h=t(80779),c=t(21128),d=t(5813),x=t(98079),u=t.n(x),m=t(12426),f=t(66072),j=t(96524),A=t(30264);let p=()=>{let{onNext:e,data:r}=(0,a.useContext)(A.o3),{setSafeTx:t,setSafeTxError:s}=(0,a.useContext)(f.H),{safe:x}=(0,o.A)(),p=(0,i.mN)({defaultValues:r,mode:"onChange"}),w=p.watch(E.threshold);return(0,a.useEffect)(()=>{(0,j.JL)(w).then(t).catch(s)},[w,t,s]),(0,n.jsxs)(h.A,{children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(l.o5u,{variant:"h3",sx:{fontWeight:700},children:["Threshold",(0,n.jsx)(l.m_M,{title:d.a.THRESHOLD,arrow:!0,placement:"top",children:(0,n.jsx)("span",{children:(0,n.jsx)(l.Ahz,{component:c.A,inheritViewBox:!0,color:"border",fontSize:"small",sx:{verticalAlign:"middle",ml:.5}})})})]}),(0,n.jsx)(l.o5u,{children:"Any transaction will require the confirmation of:"})]}),(0,n.jsxs)("form",{onSubmit:p.handleSubmit(e),children:[(0,n.jsx)(l.azJ,{sx:{mb:2},children:(0,n.jsx)(i.xI,{control:p.control,rules:{validate:e=>{if(e===x.threshold)return"Current policy is already set to ".concat(x.threshold,".")}},name:E.threshold,render:e=>{var r;let{field:t,fieldState:s}=e,o=!!s.error;return(0,n.jsxs)(l.xA9,{container:!0,direction:"row",sx:{gap:2,alignItems:"center"},children:[(0,n.jsx)(l.xA9,{item:!0,children:(0,n.jsx)(l.A_L,{select:!0,...t,error:o,children:x.owners.map((e,r)=>(0,n.jsx)(l.Drp,{"data-testid":"threshold-item",value:r+1,children:r+1},r+1))})}),(0,n.jsx)(l.xA9,{item:!0,children:(0,n.jsxs)(l.o5u,{children:["out of ",x.owners.length," signer",(0,m.Tz)(x.owners)]})}),(0,n.jsx)(l.xA9,{item:!0,xs:12,children:o?(0,n.jsx)(l.o5u,{color:"error",sx:{mb:2},children:null===(r=s.error)||void 0===r?void 0:r.message}):(0,n.jsxs)(l.o5u,{sx:{mb:2},children:[s.isDirty?"Previous policy was ":"Current policy is ",(0,n.jsxs)("b",{children:[x.threshold," out of ",x.owners.length]}),"."]})})]})}})}),(0,n.jsx)(l.cGx,{className:u().nestedDivider}),(0,n.jsx)(l.waF,{children:(0,n.jsx)(l.$nd,{"data-testid":"threshold-next-btn",variant:"contained",type:"submit",disabled:!!p.formState.errors[E.threshold]||w===x.threshold,children:"Next"})})]})]})};var w=t(85205),b=t(60082),v=t(96758),g=t(99322);let S=e=>{let{params:r,onSubmit:t,children:s}=e,{safe:i}=(0,o.A)(),l=r[E.threshold],{setSafeTx:h,setSafeTxError:c}=(0,a.useContext)(f.H);(0,a.useEffect)(()=>{(0,j.JL)(l).then(h).catch(c)},[l,h,c]);let d=()=>{(0,w.sx)({...w.kd.SETUP.OWNERS,label:i.owners.length}),(0,w.sx)({...w.kd.SETUP.THRESHOLD,label:l})};return(0,n.jsx)(g.A,{onSubmit:()=>{d(),t()},children:s})};var E=function(e){return e.threshold="threshold",e}({});let C=e=>{let{data:r}=(0,a.useContext)(A.o3);return(0,n.jsx)(S,{params:r,...e})},_=()=>{let{safe:{threshold:e}}=(0,o.A)();return(0,n.jsx)(b.J,{initialData:{threshold:e},icon:s.A,subtitle:"Change threshold",eventCategory:w.TL.CHANGE_THRESHOLD,ReviewTransactionComponent:C,children:(0,n.jsx)(v.L,{title:"New transaction",children:(0,n.jsx)(p,{})})})}},38830:(e,r,t)=>{t.d(r,{$nd:()=>n.$nd,A_L:()=>n.A_L,Ahz:()=>n.Ahz,Drp:()=>n.Drp,azJ:()=>n.azJ,cGx:()=>n.cGx,m_M:()=>n.m_M,o5u:()=>n.o5u,waF:()=>n.waF,xA9:()=>n.xA9});var n=t(78726)}}]);
//# sourceMappingURL=4882.8737f31f1f5e9c88.js.map