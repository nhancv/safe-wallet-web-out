(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5810],{2837:(e,a,s)=>{"use strict";s.d(a,{A:()=>Y});var n=s(6029),t=s(50614),i=s(81696),r=s(54222),l=s(75073),c=s(21967),d=s.n(c),o=s(52442),h=s(14663),u=s.n(h),x=s(30697),p=s(87505),m=s(78726),f=s(54926),j=s(55729),g=s(88992),v=s(54932),A=s(85205);let S=e=>{let{handleAddSafe:a}=e,[s,i]=(0,j.useState)(!1),{configs:c}=(0,x.Ay)(),h=(0,g.mN)({mode:"onChange",defaultValues:{address:"",chainId:o.A.eth}}),{handleSubmit:S,watch:b,register:y,reset:C,formState:_}=h,I=b("chainId"),w=c.find(e=>e.chainId===I),k=S(e=>{(0,A.sx)({...v.D.ADD_ACCOUNT_MANUALLY}),a(e),N()}),N=()=>{C(),i(!1)},z=async e=>{try{await (0,f.getSafeInfo)(I,e)}catch(e){return"Address given is not a valid Safe Account address"}},P=(0,j.useCallback)((e,a)=>c.find(a=>a.chainId===e)?(0,n.jsx)(m.Drp,{"data-testid":"network-item",value:e,sx:{"&:hover":{backgroundColor:a?"transparent":"inherit"}},disableRipple:a,children:(0,n.jsx)(l.A,{chainId:e})},e):null,[c]),D=y("chainId");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.$nd,{"data-testid":"add-manually-button",size:"compact",onClick:()=>i(!0),children:"+ Add manually"}),(0,n.jsx)(t.A,{open:s,dialogTitle:"Add safe account",onClose:N,hideChainIndicator:!0,PaperProps:{sx:{maxWidth:"760px"}},children:(0,n.jsx)(g.Op,{...h,children:(0,n.jsxs)("form",{onSubmit:e=>(e.stopPropagation(),k(e)),children:[(0,n.jsx)(m.Cff,{children:(0,n.jsxs)(m.BJc,{direction:{xs:"column",md:"row"},spacing:2,children:[(0,n.jsx)(r.A,{"data-testid":"add-address-input",label:"Safe Account",chain:w,validate:z,name:"address",deps:I}),(0,n.jsx)(m.azJ,{"data-testid":"network-selector",className:u().selectWrapper,children:(0,n.jsx)(m.l6P,{...D,value:I,size:"small",className:d().select,variant:"standard",sx:{width:"100%"},IconComponent:p.A,renderValue:e=>P(e,!0),MenuProps:{transitionDuration:0,slotProps:{paper:{sx:{overflow:"auto"}}}},children:c.map(e=>P(e.chainId,!1))})})]})}),(0,n.jsxs)(m.iin,{children:[(0,n.jsx)(m.$nd,{onClick:N,children:"Cancel"}),(0,n.jsx)(m.$nd,{"data-testid":"add-space-account-manually-button",variant:"contained",disabled:!_.isValid,type:"submit",children:"Add"})]})]})})})]})};var b=s(4876),y=s(42701),C=s(87137),_=s(21846),I=s(66929),w=s(12398),k=s(61240),N=s(93256),z=s(8443),P=s(80482),D=s.n(P);let J=e=>{let{chainId:a}=e,s=(0,x.n$)(a);return s?(0,n.jsxs)(m.BJc,{alignItems:"center",direction:"row",gap:1,children:[(0,n.jsx)(y.P,{chainId:a}),(0,n.jsx)(m.o5u,{component:"span",sx:{color:"var(--color-primary-light)",fontSize:"inherit"},children:s.chainName})]}):null},W=e=>"".concat(e.chainId,":").concat(e.address),B=e=>{let{safes:a}=e,{watch:s,setValue:t,control:i}=(0,g.xW)(),{allSafes:r}=(0,z.a)(),c=(0,I.yS)(r),d=r.filter(C.di);return(0,n.jsx)(m.B8B,{sx:{px:2,pb:2,pt:0,display:"flex",flexDirection:"column",gap:1,maxHeight:400,minHeight:400,overflow:"auto"},children:a.map((e,a)=>{if((0,C.di)(e)){let r="multichain_".concat(e.address),l=e.safes.map(W),o=s(l.map(e=>"selectedSafes.".concat(e))),h=e.safes.length,x=o.filter(Boolean).length,f=d.some(a=>D()(a.safes,e.safes)),j=e=>{t("selectedSafes.".concat(r),e,{shouldValidate:!0}),l.forEach(a=>{t("selectedSafes.".concat(a),e,{shouldValidate:!0})})};return(0,n.jsxs)(m.nD3,{className:u().accordion,disableGutters:!0,sx:{flexShrink:"0"},children:[(0,n.jsxs)(m.Xo_,{expandIcon:(0,n.jsx)(p.A,{}),sx:{"& .MuiAccordionSummary-expandIconWrapper":{position:"absolute",right:"16px"}},children:[(0,n.jsx)(m.Sc0,{checked:!!(x===h&&h>0)||f,indeterminate:x>0&&x<h,onChange:e=>j(e.target.checked),onClick:e=>e.stopPropagation(),onFocus:e=>e.stopPropagation(),sx:{mr:2},disabled:f}),(0,n.jsxs)(m.azJ,{className:u().safeRow,children:[(0,n.jsx)(b.A,{address:e.address,copyAddress:!1,showPrefix:!1}),(0,n.jsx)(m.azJ,{sx:{justifySelf:"flex-start"},children:(0,n.jsx)(_.i,{safes:e.safes})})]})]}),(0,n.jsx)(m.ZiS,{sx:{p:0},children:(0,n.jsx)(m.B8B,{disablePadding:!0,children:e.safes.map(e=>{let a=W(e),s=c.some(a=>a.chainId===e.chainId&&a.address===e.address);return(0,n.jsx)(g.xI,{name:"selectedSafes.".concat(a),control:i,render:a=>{let{field:t}=a;return(0,n.jsx)(m.ckQ,{disablePadding:!0,children:(0,n.jsxs)(w.A,{onClick:()=>{t.onChange(!t.value)},disabled:s,children:[(0,n.jsx)(k.A,{onClick:e=>e.stopPropagation(),children:(0,n.jsx)(m.Sc0,{checked:!!t.value||s,onClick:e=>e.stopPropagation(),onFocus:e=>e.stopPropagation(),onChange:e=>t.onChange(e.target.checked)})}),(0,n.jsx)(N.A,{primary:(0,n.jsx)(J,{chainId:e.chainId})})]})})}},"".concat(a))})})})]},a)}let r=W(e),o=c.some(a=>a.address===e.address&&a.chainId===e.chainId);return(0,n.jsx)(g.xI,{name:"selectedSafes.".concat(r),control:i,render:a=>{let{field:s}=a;return(0,n.jsx)(m.ckQ,{className:u().safeItem,disablePadding:!0,children:(0,n.jsxs)(w.A,{onClick:()=>{s.onChange(!s.value)},disabled:o,children:[(0,n.jsx)(k.A,{onClick:e=>e.stopPropagation(),children:(0,n.jsx)(m.Sc0,{checked:!!s.value||o,onChange:e=>s.onChange(e.target.checked)})}),(0,n.jsx)(N.A,{primary:(0,n.jsxs)(m.azJ,{className:u().safeRow,children:[(0,n.jsx)(b.A,{address:e.address,chainId:e.chainId,copyAddress:!1}),(0,n.jsx)(l.A,{chainId:e.chainId,responsive:!0,onlyLogo:!0})]})})]})})}},"".concat(r))})})};var V=s(60627),M=s(12273),G=s(1122),E=s(36429),L=s.n(E),O=s(87885),T=s(57187),R=s(99969),H=s(84942),U=s(35908),F=s(42205);function $(e,a){let s=(0,I.yS)(a);return Object.entries(e).filter(e=>{let[a,n]=e;return n&&!a.startsWith("multichain_")&&!s.some(e=>{let[s,n]=a.split(":");return e.address===n&&e.chainId===s})})}let Y=()=>{let e=(0,U.h7)(),[a,s]=(0,j.useState)(!1),[r,l]=(0,j.useState)(""),[c,d]=(0,j.useState)(),[o,h]=(0,j.useState)([]),{orderBy:x}=(0,T.GV)(R.h3),p=(0,T.jL)(),{allSafes:f}=(0,z.a)(),b=(0,I.RG)(),y=(0,O.hz)(x),[C]=(0,G.sm)(),_=(0,V.O)(),w=(0,j.useMemo)(()=>{var e,a;return[...o,...null!==(e=b.allMultiChainSafes)&&void 0!==e?e:[],...null!==(a=b.allSingleSafes)&&void 0!==a?a:[]].sort(y)},[o,b.allMultiChainSafes,b.allSingleSafes,y]),k=(0,j.useCallback)(L()(l,300),[]),N=(0,i.G)(null!=w?w:[],r),P=(0,g.mN)({mode:"onChange",defaultValues:{selectedSafes:{}}}),{handleSubmit:D,watch:J,setValue:E}=P,Y=$(J("selectedSafes"),f).length,Q=D(async e=>{(0,A.sx)({...v.D.ADD_ACCOUNTS});let a=$(e.selectedSafes,f).map(e=>{let[a]=e,[s,n]=a.split(":");return{chainId:s,address:n}});try{let e=await C({spaceId:Number(_),createSpaceSafesDto:{safes:a}});if(e.error){var s,n;d((null===(n=e.error)||void 0===n?void 0:null===(s=n.data)||void 0===s?void 0:s.message)||"Something went wrong adding one or more Safe Accounts.");return}p((0,F.Ds)({message:"Added safe account(s) to space",variant:"success",groupKey:"add-safe-account-success"})),X()}catch(e){console.log(e)}}),X=()=>{d(void 0),l(""),E("selectedSafes",{}),s(!1)};return(0,j.useEffect)(()=>{r&&(0,A.sx)({...v.D.SEARCH_ACCOUNTS,label:v.N.add_accounts_modal})},[r]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.m_M,{title:e?"":"You need to be an Admin to add accounts",placement:"top",children:(0,n.jsx)(m.azJ,{component:"span",children:(0,n.jsx)(m.$nd,{"data-testid":"add-space-account-button",variant:"contained",onClick:()=>s(!0),disabled:!e,sx:{whiteSpace:"nowrap"},children:"Add accounts"})})}),(0,n.jsx)(t.A,{open:a,fullScreen:!0,hideChainIndicator:!0,PaperProps:{sx:{backgroundColor:"border.background"}},children:(0,n.jsx)(m.Cff,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:(0,n.jsxs)(m.mcf,{fixed:!0,maxWidth:"sm",disableGutters:!0,children:[(0,n.jsx)(m.o5u,{component:"div",variant:"h1",mb:1,children:"Add Safe Accounts"}),(0,n.jsxs)(m.o5u,{mb:2,children:["You can add any Safe Account to your Space. This is currently limited to ",10," Safe Accounts."]}),(0,n.jsx)(m.ZpM,{children:(0,n.jsx)(g.Op,{...P,children:(0,n.jsxs)("form",{onSubmit:Q,children:[(0,n.jsx)(m.azJ,{m:2,children:(0,n.jsx)(m.A_L,{id:"search-by-name",placeholder:"Search","aria-label":"Search Safe list by name",variant:"filled",hiddenLabel:!0,onChange:e=>{k(e.target.value)},className:u().search,InputProps:{startAdornment:(0,n.jsx)(m.jC1,{position:"start",children:(0,n.jsx)(m.Ahz,{component:M.A,inheritViewBox:!0,fontWeight:"bold",fontSize:"small",sx:{color:"var(--color-border-main)",".MuiInputBase-root.Mui-focused &":{color:"var(--color-text-primary)"}}})}),disableUnderline:!0},fullWidth:!0,size:"small"})}),r?(0,n.jsx)(B,{safes:N}):(0,n.jsx)(B,{safes:w}),(0,n.jsx)(m.azJ,{p:2,children:(0,n.jsx)(H.A,{...v.D.ADD_ACCOUNT_MANUALLY_MODAL,children:(0,n.jsx)(S,{handleAddSafe:e=>{let a=w.some(a=>a.address===e.address),s={...e,isReadOnly:!1,isPinned:!1,lastVisited:0,name:""};a||h(e=>[s,...e]);let n=W(s);E("selectedSafes.".concat(n),!0,{shouldValidate:!0})}})})}),c&&(0,n.jsx)(m.FcD,{severity:"error",sx:{m:2,mt:0},children:c}),(0,n.jsxs)(m.iin,{children:[(0,n.jsx)(m.$nd,{onClick:X,children:"Cancel"}),(0,n.jsxs)(m.$nd,{"data-testid":"add-accounts-button",variant:"contained",disabled:0===Y,type:"submit",children:["Add Accounts (",Y,")"]})]})]})})})]})})})]})}},8443:(e,a,s)=>{"use strict";s.d(a,{a:()=>p});var n=s(1122),t=s(60627),i=s(66929),r=s(57187),l=s(99969),c=s(87885),d=s(55729),o=s(62994),h=s(36733),u=s(5172),x=s(88683);let p=()=>{let e=(0,t.O)(),a=(0,r.GV)(h.wR),{currentData:s,isLoading:p}=(0,n.RV)({spaceId:Number(e)},{skip:!a}),m=(0,r.GV)(o.aB),{address:f=""}=(0,x.Ay)()||{},[j={}]=(0,u.A)(f),g=s?(0,i.Dd)(s.safes,m,j):[],v=(0,i.bC)(g),{orderBy:A}=(0,r.GV)(l.h3),S=(0,c.hz)(A);return{allSafes:(0,d.useMemo)(()=>{var e,a;return[...null!==(e=v.allMultiChainSafes)&&void 0!==e?e:[],...null!==(a=v.allSingleSafes)&&void 0!==a?a:[]].sort(S)},[v.allMultiChainSafes,v.allSingleSafes,S]),isLoading:p}}},12806:(e,a,s)=>{"use strict";s.d(a,{A:()=>_});var n=s(6029),t=s(55729),i=s(97186),r=s(31634),l=s(85235),c=s(88082),d=s.n(c),o=s(47737),h=s(48230),u=s.n(h),x=s(72830);let p=()=>(0,n.jsx)(l.azJ,{className:d().content,children:(0,n.jsx)(l.azJ,{textAlign:"center",className:d().contentWrapper,children:(0,n.jsxs)(l.azJ,{className:d().contentInner,children:[(0,n.jsx)(l.o5u,{fontWeight:700,mb:2,children:"You don’t have permissions to this page"}),(0,n.jsx)(l.o5u,{color:"text.secondary",mb:2,children:"Sorry, you don’t have permissions to view this page, as your wallet is not a member of the space. Try to sign in with a different wallet or go back to the overview."}),(0,n.jsx)(u(),{href:x.S.welcome.spaces,passHref:!0,children:(0,n.jsx)(o.A,{variant:"outlined",children:"Back to overview"})})]})})});var m=s(62426);let f=()=>(0,n.jsx)(m.azJ,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:(0,n.jsx)(m.PaH,{"aria-label":"Loading content"})});var j=s(57187),g=s(36733),v=s(1122),A=s(90951),S=s(35908),b=s(30697),y=s(12002),C=s(73349);let _=e=>{let{spaceId:a,children:s}=e,l=(0,j.jL)(),c=(0,j.GV)(g.wR),{currentData:d}=(0,A.h4)(void 0,{skip:!c}),{currentData:o,error:h,isLoading:u}=(0,v.Wr)({id:Number(a)},{skip:!c}),x=(0,b.eZ)(y.Gv.SPACES);(0,C.A)();let m=null==o?void 0:o.members.some(e=>e.user.id===(null==d?void 0:d.id)&&e.status===S.F.DECLINED);return((0,t.useEffect)(()=>{l((0,g.Ax)(a))},[l,a]),x)?u?(0,n.jsx)(f,{}):c?(0,r.Tk)(h)||m?(0,n.jsx)(p,{}):s:(0,n.jsx)(i.A,{}):null}},14663:e=>{e.exports={safeRow:"styles_safeRow__jQySn",safeItem:"styles_safeItem__vij70",search:"styles_search__NAAyu",selectWrapper:"styles_selectWrapper__N8CBM",accordion:"styles_accordion__fmX4B"}},34121:(e,a,s)=>{"use strict";s.d(a,{BJc:()=>n.BJc,azJ:()=>n.azJ,o5u:()=>n.o5u,tu9:()=>n.tu9});var n=s(78726)},62426:(e,a,s)=>{"use strict";s.d(a,{PaH:()=>n.PaH,azJ:()=>n.azJ});var n=s(78726)},88082:e=>{e.exports={content:"styles_content__22emV",contentWrapper:"styles_contentWrapper__WlUhQ",contentInner:"styles_contentInner__iALXa",iconBG:"styles_iconBG__Gmca_",image:"styles_image__S4T8i",chainIndicator:"styles_chainIndicator__QOXJW",chainIndicatorColor:"styles_chainIndicatorColor__eAxPt"}},97186:(e,a,s)=>{"use strict";s.d(a,{A:()=>c});var n=s(6029),t=s(85235),i=s(88082),r=s.n(i),l=s(54464);let c=()=>(0,n.jsx)(t.azJ,{className:r().content,children:(0,n.jsx)(t.azJ,{textAlign:"center",className:r().contentWrapper,children:(0,n.jsxs)(t.azJ,{className:r().contentInner,children:[(0,n.jsx)(t.o5u,{fontWeight:700,mb:2,children:"Sign in to see content"}),(0,n.jsx)(t.o5u,{color:"text.secondary",mb:2,children:"To view and interact with spaces, you need to sign in with the wallet, that is a member of the space. Sign in to continue."}),(0,n.jsx)(l.A,{})]})})})},97511:(e,a,s)=>{"use strict";s.d(a,{A:()=>v});var n=s(6029),t=s(34121),i=s(1122),r=s(94313),l=s(94561),c=s.n(l),d=s(60627),o=s(36733),h=s(57187),u=s(11973),x=s(54932),p=s(84942),m=s(43241),f=s(4876),j=s(90951),g=s(97488);let v=()=>{var e;let a=(0,g.D)(),s=(0,h.GV)(o.wR),l=(0,d.O)(),{currentData:v}=(0,j.h4)(),{currentData:A}=(0,i.Wr)({id:Number(l)},{skip:!s||!l}),S=null==A?void 0:null===(e=A.members.find(e=>e.user.id===(null==v?void 0:v.id)))||void 0===e?void 0:e.invitedBy;return A?(0,n.jsx)(t.tu9,{sx:{p:2,mb:4,backgroundColor:a?"info.background":"info.light"},children:(0,n.jsxs)(t.azJ,{className:c().previewInviteContent,children:[(0,n.jsx)(r.A,{name:A.name,size:"medium"}),(0,n.jsxs)(t.o5u,{variant:"body1",color:"text.primary",flexGrow:1,children:["You were invited to join ",(0,n.jsx)("strong",{children:A.name}),S&&(0,n.jsxs)(n.Fragment,{children:[" ","by",(0,n.jsx)(t.o5u,{component:"span",variant:"body1",fontWeight:700,color:"primary.main",position:"relative",top:"4px",ml:"6px",display:"inline-block",sx:{"> div":{gap:"4px"}},children:(0,n.jsx)(f.A,{address:S,avatarSize:20,showName:!1,showPrefix:!1,copyPrefix:!1})})]})]}),(0,n.jsxs)(t.BJc,{direction:"row",spacing:1,children:[(0,n.jsx)(p.A,{...x.D.ACCEPT_INVITE,label:x.N.preview_banner,children:(0,n.jsx)(u.A,{space:A})}),(0,n.jsx)(p.A,{...x.D.DECLINE_INVITE,label:x.N.preview_banner,children:(0,n.jsx)(m.A,{space:A})})]})]})}):null}}}]);
//# sourceMappingURL=5810-8b586e166d4b9d2a.js.map