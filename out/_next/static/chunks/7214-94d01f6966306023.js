(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7214],{13484:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(6029);a(55729);var n=a(32676);let r=e=>{let{name:t,value:a}=e;return(0,s.jsxs)(s.Fragment,{children:[t&&(0,s.jsx)(n.xA9,{item:!0,xs:3,children:(0,s.jsx)(n.o5u,{variant:"body2",children:t})}),(0,s.jsx)(n.xA9,{item:!0,xs:t?9:12,children:a})]})}},47214:(e,t,a)=>{"use strict";a.d(t,{dz:()=>et,GT:()=>ea,Ay:()=>es});var s=a(6029),n=a(4876),r=a(66416),i=a(10500),o=a(11353),l=a(24334),c=a(7639),d=a(10996),h=a(32294),x=a(87137),u=a(52442);let m=async(e,t,a,s)=>{let n=!0,r=a.map(t=>({rpcUrl:(null==e?void 0:e[t.chainId])||(0,h.C$)(t.rpcUri),chainId:t.chainId}));for(let e of a){var i;let a;let o=null===(i=r.find(t=>e.chainId===t.chainId))||void 0===i?void 0:i.rpcUrl;if(!o)throw Error("No RPC available for  ".concat(e.chainName));let m=(0,h.OC)(e,o);if(!m)throw Error("Could not initiate RPC");if(a=e.chainId===u.A.zksync||e.chainId===u.A.lens?await (0,l.n)(o,{safeAccountConfig:t.safeAccountConfig,saltNonce:t.saltNonce},e,t.safeVersion):await (0,x.$2)(t,m),s.some(e=>(0,d.xU)(e,a))||await (0,c.gN)(a,m)){n=!1;break}}return n?t.saltNonce:m(e,{...t,saltNonce:(Number(t.saltNonce)+1).toString()},a,s)};var j=a(86252),w=a.n(j),y=a(60089),f=a.n(y),v=a(92178),g=a(48426),A=a(13484),p=a(17358),N=a(28056),k=a(32988),I=a.n(k),_=a(30697),b=a(94677),S=a(78726),E=a(24187),C=a.n(E),P=a(49088);let F=e=>{let{totalFee:t,canRelay:a,isMultiChain:n,payMethod:r,setPayMethod:i}=e,o=(0,_._J)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.o5u,{variant:"h4",fontWeight:"bold",children:"Before we continue..."}),n&&(0,s.jsxs)(p.A,{level:"info",children:["You will need to ",(0,s.jsx)("b",{children:"activate your account"})," separately on each network. Make sure you have funds on your wallet to pay the network fee."]}),(0,s.jsxs)(S.B8B,{children:[n&&(0,s.jsxs)(S.ckQ,{disableGutters:!0,children:[(0,s.jsx)(S.LaP,{className:C().listItem,children:(0,s.jsx)(b.A,{fontSize:"small",color:"inherit"})}),(0,s.jsx)(S.o5u,{variant:"body2",children:"Start exploring the accounts now, and activate them later to start making transactions"})]}),(0,s.jsxs)(S.ckQ,{disableGutters:!0,children:[(0,s.jsx)(S.LaP,{className:C().listItem,children:(0,s.jsx)(b.A,{fontSize:"small",color:"inherit"})}),(0,s.jsx)(S.o5u,{variant:"body2",children:"There will be a one-time activation fee"})]}),!n&&(0,s.jsxs)(S.ckQ,{disableGutters:!0,children:[(0,s.jsx)(S.LaP,{className:C().listItem,children:(0,s.jsx)(b.A,{fontSize:"small",color:"inherit"})}),(0,s.jsx)(S.o5u,{variant:"body2",children:"If you choose to pay later, the fee will be included with the first transaction you make."})]}),(0,s.jsxs)(S.ckQ,{disableGutters:!0,children:[(0,s.jsx)(S.LaP,{className:C().listItem,children:(0,s.jsx)(b.A,{fontSize:"small",color:"inherit"})}),(0,s.jsx)(S.o5u,{variant:"body2",children:"Safe doesn't profit from the fees."})]})]}),!n&&(0,s.jsx)(S.MJN,{fullWidth:!0,children:(0,s.jsxs)(S.z6M,{row:!0,value:r,onChange:(e,t)=>{i(t)},className:C().radioGroup,children:[(0,s.jsx)(S.ip9,{"data-testid":"pay-now-execution-method",sx:{flex:1},value:P.I.PayNow,className:I()(C().radioContainer,{[C().active]:r===P.I.PayNow}),label:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.o5u,{className:C().radioTitle,children:"Pay now"}),(0,s.jsx)(S.o5u,{className:C().radioSubtitle,variant:"body2",color:"text.secondary",children:a?"Sponsored free transaction":(0,s.jsxs)(s.Fragment,{children:["≈ ",t," ",null==o?void 0:o.nativeCurrency.symbol]})})]}),control:(0,s.jsx)(S.sxL,{})}),(0,s.jsx)(S.ip9,{"data-testid":"connected-wallet-execution-method",sx:{flex:1},value:P.I.PayLater,className:I()(C().radioContainer,{[C().active]:r===P.I.PayLater}),label:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.o5u,{className:C().radioTitle,children:"Pay later"}),(0,s.jsx)(S.o5u,{className:C().radioSubtitle,variant:"body2",color:"text.secondary",children:"with the first transaction"})]}),control:(0,s.jsx)(S.sxL,{})})]})})]})};var G=a(6305),z=a(45129),L=a(24007),M=a(58426),T=a(88683),J=a(85205),R=a(32813),$=a(79651),U=a(57187),Z=a(3640),O=a(45650),V=a(89099),W=a(55729),X=a(75073),Y=a(69629),B=a(52921),D=a(78311),H=a.n(D),Q=a(73484),K=a(72830),q=a(67793),ee=a(12002);let et=e=>{let{totalFee:t,chain:a,isWaived:n,inline:r=!1}=e;return(0,s.jsx)(S.azJ,{className:I()(w().networkFee,{[w().networkFeeInline]:r}),children:(0,s.jsx)(S.o5u,{className:I()({[w().strikethrough]:n}),children:(0,s.jsxs)("b",{children:["≈ ",t," ",null==a?void 0:a.nativeCurrency.symbol]})})})},ea=e=>{let{name:t,owners:a,threshold:r,networks:o}=e;return(0,s.jsxs)(S.xA9,{container:!0,spacing:3,children:[(0,s.jsx)(A.A,{name:o.length>1?"Networks":"Network",value:(0,s.jsx)(S.m_M,{title:(0,s.jsx)(S.azJ,{children:o.map(e=>(0,s.jsx)(S.azJ,{sx:{p:"4px 0px"},children:(0,s.jsx)(X.A,{chainId:e.chainId})},e.chainId))}),arrow:!0,children:(0,s.jsx)(S.azJ,{"data-testid":"network-list",sx:{display:"inline-block"},children:(0,s.jsx)(i.A,{networks:o})})})}),t&&(0,s.jsx)(A.A,{name:"Name",value:(0,s.jsx)(S.o5u,{"data-testid":"review-step-safe-name",children:t})}),(0,s.jsx)(A.A,{name:"Signers",value:(0,s.jsx)(S.azJ,{"data-testid":"review-step-owner-info",className:w().ownersArray,children:a.map((e,t)=>(0,s.jsx)(n.A,{address:e.address,name:e.name||e.ens,shortAddress:!1,showPrefix:!1,showName:!0,hasExplorer:!0,showCopyButton:!0},t))})}),(0,s.jsx)(A.A,{name:"Threshold",value:(0,s.jsxs)(S.o5u,{"data-testid":"review-step-threshold",children:[r," out of ",a.length," ",a.length>1?"signers":"signer"]})})]})},es=e=>{let{data:t,onSubmit:a,onBack:n,setStep:i}=e,d=(0,z.A)();(0,g.A)(i,t.networks);let j=(0,_._J)(),y=(0,T.Ay)(),k=(0,U.jL)(),I=(0,V.useRouter)(),[b]=(0,o.Ay)(),E=(0,U.GV)(Q._G),[C,X]=(0,W.useState)(P.I.PayLater),[D,es]=(0,W.useState)(N.S.RELAY),[en,er]=(0,W.useState)(!1),[ei,eo]=(0,W.useState)(),el=(0,_.eZ)(ee.Gv.COUNTERFACTUAL),ec=j&&(0,ee.jI)(j,ee.Gv.EIP1559),ed=(0,W.useMemo)(()=>t.owners.map(e=>e.address),[t.owners]),[eh]=(0,L.x6)(ed),ex=t.networks.length>1,eu=(0,Z.v)(eh),em=eu&&D===N.S.RELAY,ej=(0,W.useMemo)(()=>j?(0,l.bo)(t.safeVersion,{owners:t.owners.map(e=>e.address),threshold:t.threshold,paymentReceiver:t.paymentReceiver},j):void 0,[j,t.owners,t.safeVersion,t.threshold,t.paymentReceiver]),ew=(0,W.useMemo)(()=>ej?{...ej,saltNonce:Date.now().toString()}:void 0,[ej]),{gasLimit:ey}=(0,v.Z)(ew,t.safeVersion),ef=null==b?void 0:b.maxFeePerGas,ev=null==b?void 0:b.maxPriorityFeePerGas,eg=(0,M.A)({gasLimit:ey,maxFeePerGas:ef}),eA=(0,o.$c)(ef,ey,j),ep=(0,B.Ay)(),eN=(0,W.useMemo)(()=>H()(null==ep?void 0:ep.map(e=>e.address)),[ep]),ek=(0,U.GV)(Q._G),eI=async()=>{try{let e;if(!y||!j||!ej)return;er(!0);let a=void 0!==t.saltNonce?t.saltNonce.toString():await m(ek,{...ej,saltNonce:"0"},t.networks,eN),s={...ej,saltNonce:a},n=E[j.chainId],i=(0,h.OC)(j,n);if(!i)return;for(let r of(e=j.chainId===u.A.zksync||j.chainId===u.A.lens?await (0,l.n)(n||(0,h.C$)(j.rpcUri),{safeAccountConfig:s.safeAccountConfig,saltNonce:a},j,s.safeVersion):await (0,x.$2)(s,i),t.networks))await e_(r,s,e);k((0,q.v)(t.networks.map(e=>e.chainId),e,t.name,t.owners,t.threshold)),(0,R.T5)(j.chainId),el&&C===P.I.PayLater&&(await (null==I?void 0:I.push({pathname:K.S.home,query:{safe:"".concat(t.networks[0].shortName,":").concat(e)}})),(0,r.p5)(r.Zf.AWAITING_EXECUTION,{groupKey:G.Xh,safeAddress:e,networks:t.networks}))}catch(e){console.error(e),eo("Error creating the Safe Account. Please try again later.")}finally{er(!1)}},e_=async(e,s,n)=>{if(y){(0,R.T5)(e.chainId);try{if(el&&C===P.I.PayLater){(0,R.cs)(n),(0,J.sx)({...J.kg.PROCEED_WITH_TX,label:"counterfactual",category:J.kN}),(0,G.M$)(e.chainId,n,s,t.name,k,C),(0,J.sx)({...J.$t.CREATED_SAFE,label:"counterfactual"});return}let i=ec?{maxFeePerGas:null==ef?void 0:ef.toString(),maxPriorityFeePerGas:null==ev?void 0:ev.toString(),gasLimit:null==ey?void 0:ey.toString()}:{gasPrice:null==ef?void 0:ef.toString(),gasLimit:null==ey?void 0:ey.toString()},o=async(i,o)=>{(0,G.M$)(e.chainId,n,s,t.name,k,C),i&&(0,r.p5)(r.Zf.RELAYING,{groupKey:G.Xh,taskId:i,safeAddress:n}),o&&(0,r.p5)(r.Zf.PROCESSING,{groupKey:G.Xh,txHash:o,safeAddress:n}),(0,J.sx)(J.$t.SUBMIT_CREATE_SAFE),(0,J.sx)({...J.kg.PROCEED_WITH_TX,label:"deployment",category:J.kN}),a(t)};if(em){let t=await (0,l.ST)(e,s);o(t)}else await (0,l.sZ)(y.provider,s,t.safeVersion,e,i,e=>{o(void 0,e)},!0)}catch(t){let e=(0,$.z)(t);eo((0,c.jG)(e)?"User rejected signing.":"Error creating the Safe Account. Please try again later."),(0,c.jG)(e)&&(0,J.sx)(J.$t.REJECT_CREATE_SAFE)}er(!1)}},eb=d&&C===P.I.PayNow&&!em&&!ex||d&&!el&&!ex,eS=eb||en;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.azJ,{"data-testid":"safe-setup-overview",className:f().row,children:(0,s.jsx)(ea,{name:t.name,owners:t.owners,threshold:t.threshold,networks:t.networks})}),el&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.cGx,{}),(0,s.jsxs)(S.azJ,{"data-testid":"pay-now-later-message-box",className:f().row,children:[(0,s.jsx)(F,{totalFee:eA,isMultiChain:ex,canRelay:eu,payMethod:C,setPayMethod:X}),eu&&C===P.I.PayNow&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(S.xA9,{container:!0,spacing:3,sx:{pt:2},children:(0,s.jsx)(A.A,{value:(0,s.jsx)(N.Z,{executionMethod:D,setExecutionMethod:es,relays:eh})})})}),eb&&(0,s.jsx)(S.azJ,{sx:{"&:not(:empty)":{mt:3}},children:(0,s.jsx)(Y.A,{action:"create a Safe Account"})}),C===P.I.PayNow&&(0,s.jsx)(S.xA9,{item:!0,children:(0,s.jsxs)(S.o5u,{component:"div",sx:{mt:2},children:["You will have to confirm a transaction and pay an estimated fee of"," ",(0,s.jsx)(et,{totalFee:eA,isWaived:em,chain:j,inline:!0})," with your connected wallet"]})})]})]}),!el&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.cGx,{}),(0,s.jsxs)(S.azJ,{className:f().row,sx:{display:"flex",flexDirection:"column",gap:3},children:[eu&&(0,s.jsx)(S.xA9,{container:!0,spacing:3,children:(0,s.jsx)(A.A,{name:"Execution method",value:(0,s.jsx)(N.Z,{executionMethod:D,setExecutionMethod:es,relays:eh})})}),(0,s.jsx)(S.xA9,{"data-testid":"network-fee-section",container:!0,spacing:3,children:(0,s.jsx)(A.A,{name:"Est. network fee",value:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(et,{totalFee:eA,isWaived:em,chain:j}),!em&&(0,s.jsx)(S.o5u,{variant:"body2",sx:{color:"text.secondary",mt:1},children:"You will have to confirm a transaction with your connected wallet."})]})})}),eb&&(0,s.jsx)(Y.A,{action:"create a Safe Account"}),!eg&&!em&&(0,s.jsx)(p.A,{children:"Your connected wallet doesn't have enough funds to execute this transaction"})]})]}),(0,s.jsx)(S.cGx,{}),(0,s.jsxs)(S.azJ,{className:f().row,children:[ei&&(0,s.jsx)(p.A,{className:w().errorMessage,children:ei}),(0,s.jsxs)(S.azJ,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:3},children:[(0,s.jsx)(S.$nd,{"data-testid":"back-btn",variant:"outlined",size:"small",onClick:()=>{n(t)},startIcon:(0,s.jsx)(O.A,{fontSize:"small"}),children:"Back"}),(0,s.jsx)(S.$nd,{"data-testid":"review-step-next-btn",onClick:eI,variant:"contained",size:"stretched",disabled:eS,children:en?(0,s.jsx)(S.PaH,{size:18}):"Create account"})]})]})]})}},48426:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(55729),n=a(88683),r=a(30697);let i=(e,t)=>{let a=(0,n.Ay)(),i=(0,r._J)();(0,s.useEffect)(()=>{if(!a||1===t.length&&(null==i?void 0:i.chainId)!==t[0].chainId){e(0);return}},[null==i?void 0:i.chainId,t,e,a])}},60089:e=>{e.exports={row:"styles_row__UGXjL"}},86252:e=>{e.exports={ownersArray:"styles_ownersArray__Lwugg",strikethrough:"styles_strikethrough__dsfcO",errorMessage:"styles_errorMessage__EgiJf",networkFee:"styles_networkFee__s25eL",networkFeeInline:"styles_networkFeeInline__o4u72"}},92178:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var s=a(32294),n=a(88683),r=a(8694),i=a(30697),o=a(24334);let l=(e,t)=>{let a=(0,s.vH)(),l=(0,i._J)(),c=(0,n.Ay)(),[d,h,x]=(0,r.A)(()=>{if((null==c?void 0:c.address)&&l&&a&&e)return(0,o.a_)(l,a,c.address,e,t)},[null==c?void 0:c.address,l,a,e,t]);return{gasLimit:d,gasLimitError:h,gasLimitLoading:x}}}}]);
//# sourceMappingURL=7214-94d01f6966306023.js.map