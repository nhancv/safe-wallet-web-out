(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8167],{8167:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>V});var n=s(6029),i=s(78726),a=s(66862),d=s.n(a),o=s(4876);let l=(0,s(93944).A)((0,n.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2"}),"Circle");var r=s(79338),c=s(81099);let u=e=>{let{isLoading:t,safeAddress:s,children:a}=e,o=t?r.A:l,u=t?"border":"primary";return(0,n.jsx)(i.DSl,{className:d().label,icon:(0,n.jsx)(i.Ahz,{component:o,className:d().icon,color:u,fontSize:"small"}),children:(0,n.jsxs)(i.azJ,{display:"flex",alignItems:"center",gap:2,color:u,children:[(0,n.jsx)(i.azJ,{flexShrink:0,children:s&&!t?(0,n.jsx)(c.A,{address:s,size:32}):(0,n.jsx)(i.EAD,{variant:"circular",width:"2.3em",height:"2.3em"})}),a]})})};var v=s(28729),h=s(15887);let x=e=>{let{status:t,txHash:s}=e,{safeAddress:a}=(0,v.A)(),l=t===h.IG.PROCESSING||t===h.IG.INDEXING||void 0===t,r=t===h.IG.INDEXING||void 0===t,c=void 0===t;return(0,n.jsxs)(i.C1Z,{orientation:"vertical",nonLinear:!0,connector:(0,n.jsx)(i.OTO,{className:d().connector}),children:[(0,n.jsx)(i.pnw,{children:(0,n.jsx)(u,{isLoading:!l,safeAddress:a,children:(0,n.jsxs)(i.azJ,{children:[(0,n.jsx)(i.o5u,{variant:"body2",fontWeight:"700",children:"Your transaction"}),s&&(0,n.jsx)(o.A,{address:s,hasExplorer:!0,showCopyButton:!0,showName:!1,shortAddress:!1,showAvatar:!1})]})})}),(0,n.jsx)(i.pnw,{children:(0,n.jsx)(u,{isLoading:!r,safeAddress:a,children:(0,n.jsx)(i.azJ,{children:(0,n.jsx)(i.o5u,{variant:"body2",fontWeight:"700",children:r?"Processed":"Processing"})})})}),(0,n.jsx)(i.pnw,{children:(0,n.jsx)(u,{isLoading:!c,safeAddress:a,children:(0,n.jsx)(i.o5u,{variant:"body2",fontWeight:"700",children:c?"Indexed":"Indexing"})})}),(0,n.jsx)(i.pnw,{children:(0,n.jsx)(u,{isLoading:!c,safeAddress:a,children:(0,n.jsx)(i.o5u,{variant:"body2",fontWeight:"700",children:"Transaction is executed"})})})]})};var f=s(32988),j=s.n(f),m=s(48230),p=s.n(m),g=s(8421),w=s.n(g),S=s(57187),N=s(55729),y=s(30697),_=s(29338),b=s(81173),I=s(29459),D=s(85235),E=s(71985);let A=e=>{let{txId:t,pendingTx:s,willDeploySafe:i}=e;return(0,n.jsxs)(D.azJ,{px:3,mt:3,children:[(0,n.jsx)(D.o5u,{"data-testid":"transaction-status",variant:"h6",mt:2,fontWeight:700,children:i?"Nested Safe is now being created":"Transaction is now processing"}),(0,n.jsxs)(D.o5u,{variant:"body2",mb:3,children:[i?"Your Nested Safe":"The transaction"," was confirmed and is now being processed."]}),(0,n.jsx)(D.azJ,{children:s.status===h.IG.PROCESSING&&(0,n.jsx)(E.T,{txId:t,pendingTx:s,modalTrigger:"alertBox"})})]})},G=e=>{let{willDeploySafe:t}=e;return(0,n.jsxs)(D.azJ,{px:3,mt:3,children:[(0,n.jsxs)(D.o5u,{"data-testid":"transaction-status",variant:"h6",mt:2,fontWeight:700,children:[t?"Nested Safe":"Transaction"," was processed"]}),(0,n.jsx)(D.azJ,{className:j()(w().instructions,w().infoBg),children:(0,n.jsx)(D.o5u,{variant:"body2",children:" It is now being indexed."})})]})};var C=s(22510);let z=e=>{let{error:t,willDeploySafe:s}=e;return(0,n.jsxs)(D.azJ,{px:3,mt:3,children:[(0,n.jsx)(D.o5u,{"data-testid":"transaction-status",variant:"h6",mt:2,fontWeight:700,children:t?"Transaction failed":s?"Nested Safe was created":"Transaction was successful"}),t&&(0,n.jsx)(D.azJ,{className:j()(w().instructions,t?w().errorBg:w().infoBg),children:(0,n.jsx)(D.o5u,{variant:"body2",children:t?(0,C.c8)(t)?"Transaction timed out":t.message:""})})]})};var k=s(33494),J=s(55386),T=s(8227),B=s(87137),P=s(8694),R=s(32294);function W(e){return(null==e?void 0:e.method)==="createProxyWithNonce"}var O=s(72830),L=s(24107),H=s(84942);let V=e=>{let t,{txId:s,txHash:a}=e,[d,o]=(0,N.useState)(a),[l,r]=(0,N.useState)(),{setTxFlow:c}=(0,N.useContext)(b.P),u=(0,y._J)(),f=(0,S.GV)(e=>s?(0,h.OK)(e,s):void 0),{safeAddress:m}=(0,v.A)(),g=!s&&a?h.IG.INDEXING:null==f?void 0:f.status,D=f&&"txHash"in f?f.txHash:void 0,E=u&&s&&(0,J.v)(s,u,m),[C]=(0,T.A)(s),V=C&&(0,k.Jt)(C.txInfo),[F]=function(e){let t=(0,R.vH)();return(0,P.A)(()=>{var s,n,i,a,d,o,l,r,c,u,v,h;let x=null==e?void 0:e.txData;if(!t||!x)return;let f=(null==x?void 0:null===(s=x.dataDecoded)||void 0===s?void 0:s.method)==="multiSend",j=f?null==x?void 0:null===(o=x.dataDecoded)||void 0===o?void 0:null===(d=o.parameters)||void 0===d?void 0:null===(a=d[0])||void 0===a?void 0:null===(i=a.valueDecoded)||void 0===i?void 0:null===(n=i.find(e=>W(null==e?void 0:e.dataDecoded)))||void 0===n?void 0:n.dataDecoded:null==x?void 0:x.dataDecoded,m=f?null==x?void 0:null===(v=x.dataDecoded)||void 0===v?void 0:null===(u=v.parameters)||void 0===u?void 0:null===(c=u[0])||void 0===c?void 0:null===(r=c.valueDecoded)||void 0===r?void 0:null===(l=r.find(e=>W(null==e?void 0:e.dataDecoded)))||void 0===l?void 0:l.to:null==x?void 0:null===(h=x.to)||void 0===h?void 0:h.value;if(!j||!W(j)||!m)return;let p=function(e){var t,s,n,i,a,d;if((null==e?void 0:e.method)!=="createProxyWithNonce")return;let o=null==e?void 0:null===(s=e.parameters)||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.value,l=null==e?void 0:null===(i=e.parameters)||void 0===i?void 0:null===(n=i[1])||void 0===n?void 0:n.value,r=null==e?void 0:null===(d=e.parameters)||void 0===d?void 0:null===(a=d[2])||void 0===a?void 0:a.value;if("string"==typeof o&&"string"==typeof l&&"string"==typeof r)return{singleton:o,initializer:l,saltNonce:r}}(j);if(p)return(0,B.PH)(p,m,t)},[null==e?void 0:e.txData,t])}(C);(0,N.useEffect)(()=>{D&&o(D)},[D]),(0,N.useEffect)(()=>{let e=[_.hV.FAILED,_.hV.REVERTED].map(e=>(0,_.Vz)(e,e=>{e.txId===s&&f&&r(e.error)}));return()=>e.forEach(e=>e())},[s,f]);let X=(0,N.useCallback)(()=>{c(void 0)},[c]),U=void 0===g,$=l?I.U.ERROR:U?I.U.SUCCESS:I.U.PROCESSING;switch(g){case h.IG.PROCESSING:case h.IG.RELAYING:t=(0,n.jsx)(A,{txId:s,pendingTx:f,willDeploySafe:!!F});break;case h.IG.INDEXING:t=(0,n.jsx)(G,{willDeploySafe:!!F});break;default:t=(0,n.jsx)(z,{error:l,willDeploySafe:!!F})}return(0,n.jsxs)(i.mcf,{component:i.tu9,disableGutters:!0,sx:{textAlign:"center",maxWidth:"".concat(825,"px")},maxWidth:!1,children:[(0,n.jsxs)("div",{className:w().row,children:[(0,n.jsx)(I.A,{status:$}),t]}),!l&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.cGx,{}),(0,n.jsx)("div",{className:w().row,children:(0,n.jsx)(x,{status:g,txHash:d})})]}),(0,n.jsx)(i.cGx,{}),(0,n.jsxs)("div",{className:j()(w().row,w().buttons),children:[V&&(0,n.jsx)(i.$nd,{"data-testid":"finish-transaction-btn",variant:"outlined",size:"small",onClick:X,children:"Back to swaps"}),E&&(0,n.jsx)(p(),{...E,passHref:!0,target:"_blank",rel:"noreferrer",legacyBehavior:!0,children:(0,n.jsx)(i.$nd,{"data-testid":"view-transaction-btn",variant:V?"contained":"outlined",size:"small",onClick:X,children:"View transaction"})}),!V&&(F?(0,n.jsx)(H.A,{...L.a.OPEN_NESTED_SAFE,label:L.k.success_screen,children:(0,n.jsx)(p(),{href:{pathname:O.S.home,query:{safe:"".concat(null==u?void 0:u.shortName,":").concat(F)}},passHref:!0,legacyBehavior:!0,children:(0,n.jsx)(i.$nd,{"data-testid":"open-nested-safe-btn",variant:"contained",size:"small",onClick:X,disabled:!U,children:"Go to Nested Safe"})})}):(0,n.jsx)(i.$nd,{"data-testid":"finish-transaction-btn",variant:"contained",size:"small",onClick:X,children:"Finish"}))]})]})}},8421:e=>{e.exports={row:"styles_row__fXJ7w",buttons:"styles_buttons__bE8Aj",instructions:"styles_instructions__tSmyR",errorBg:"styles_errorBg__FMLGd",infoBg:"styles_infoBg__BhdGw"}},66862:e=>{e.exports={icon:"styles_icon__pLAhx",connector:"styles_connector__J6DS5",label:"styles_label__hIz7I"}},79338:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var n=s(93944),i=s(6029);let a=(0,n.A)((0,i.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"CircleOutlined")}}]);
//# sourceMappingURL=8167.6c76c8118d764ace.js.map