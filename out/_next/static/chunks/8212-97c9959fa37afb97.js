"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8212],{28212:(e,s,a)=>{a.d(s,{A:()=>ec});var r=a(6029),i=a(78726),n=a(87505),t=a(77194),d=a(55729),l=a(20379),o=a(50625),c=a(32988),m=a.n(c),x=a(29488),h=a(4876),g=a(97625),u=a(85937),j=a(3046),p=a(88683),v=a(73376),A=a(84942),f=a(95335),N=a(94077);let y=(e,s)=>(0,N.A)()&&e.confirmations.every(e=>{let{owner:a}=e;return a.value!==s});var C=a(81173),S=a(68340),I=a(18492);let w=e=>{let{msg:s,compact:a=!1}=e,i=(0,p.Ay)(),n=y(s,(null==i?void 0:i.address)||""),{setTxFlow:t}=(0,d.useContext)(C.P),l=e=>{e.stopPropagation(),t((0,r.jsx)(S.Bd,{...s,origin:s.origin||void 0}))};return(0,r.jsx)(I.A,{children:e=>(0,r.jsx)(v.m_M,{title:e&&!n?"You've already signed this message":"",children:(0,r.jsx)("span",{children:(0,r.jsx)(A.A,{...f.An.SIGN,children:(0,r.jsx)(v.$nd,{onClick:l,variant:n?"contained":"outlined",disabled:!e||!n,size:a?"small":"stretched",sx:a?{py:.8}:void 0,children:"Sign"})})})})})};var E=a(57212),M=a(49364),z=a.n(M),O=a(4417),b=a.n(O),D=a(6672),B=a.n(D),F=a(2934),J=a(16694),_=a(70350),k=a(47014);let T=e=>{let{msg:s}=e,a=(0,p.Ay)(),i="CONFIRMED"===s.status,c=(0,d.useMemo)(()=>{try{return(0,E.vB)(s.message)}catch(e){return""}},[s.message]),v=(0,E.nW)(s.message)?s.message.domain.verifyingContract:void 0;return(0,r.jsxs)("div",{className:z().container,children:[(0,r.jsxs)("div",{className:z().details,children:[(0,r.jsx)("div",{className:z().shareLink,children:(0,r.jsx)(k.A,{safeMessageHash:s.messageHash})}),(0,r.jsx)("div",{className:z().txData,children:(0,r.jsx)(g.d,{title:"Created by:",children:(0,r.jsx)(h.A,{address:s.proposedBy.value||"",name:s.proposedBy.name,customAvatar:s.proposedBy.logoUri||void 0,shortAddress:!1,showCopyButton:!0,hasExplorer:!0})})}),v&&(0,r.jsx)("div",{className:z().txData,children:(0,r.jsx)(g.d,{title:"Verifying contract:",children:(0,r.jsx)(_.A,{address:v,shortAddress:!1,showCopyButton:!0,hasExplorer:!0})})}),(0,r.jsx)("div",{className:z().txData,children:(0,r.jsx)(g.d,{title:(0,r.jsxs)(r.Fragment,{children:["Message ",(0,r.jsx)(J.A,{text:JSON.stringify(s.message,null,2)})]}),children:(0,r.jsx)(t.tH,{fallback:(0,r.jsx)("div",{children:"Error decoding message"}),children:(0,r.jsx)(F.O,{message:s.message})})})}),(0,r.jsxs)("div",{className:z().txSummary,children:[(0,r.jsx)(u.h,{title:"Created",children:(0,x.r6)(s.creationTimestamp)}),(0,r.jsx)(u.h,{title:"Last modified",children:(0,x.r6)(s.modifiedTimestamp)}),(0,r.jsx)(u.h,{title:"Message hash",children:(0,u.A)(s.messageHash,"hash")}),c&&(0,r.jsx)(u.h,{title:"SafeMessage",children:(0,u.A)(c,"hash")})]}),s.preparedSignature&&(0,r.jsx)("div",{className:m()(z().txSummary,z().multiSend),children:(0,r.jsx)(u.h,{title:"Prepared signature:",children:(0,u.A)(s.preparedSignature,"hash")})}),(0,r.jsx)("div",{className:z().multiSend,children:s.confirmations.map((e,s)=>(0,r.jsxs)(l.nD3,{variant:"elevation",defaultExpanded:e.owner.value===(null==a?void 0:a.address),children:[(0,r.jsx)(l.Xo_,{expandIcon:(0,r.jsx)(n.A,{}),children:(0,r.jsxs)("div",{className:b().summary,children:[(0,r.jsx)(o.A,{}),(0,r.jsx)(l.o5u,{children:"Confirmation ".concat(s+1)})]})}),(0,r.jsxs)(l.ZiS,{children:[(0,r.jsx)("div",{className:B().container,children:(0,r.jsx)(h.A,{address:e.owner.value||"",name:e.owner.name,customAvatar:e.owner.logoUri||void 0,shortAddress:!1,showCopyButton:!0,hasExplorer:!0})}),(0,r.jsx)(u.h,{title:"Signature:",children:(0,r.jsx)(h.A,{address:e.signature,showAvatar:!1,showCopyButton:!0})})]})]},e.signature))})]}),(0,r.jsxs)("div",{className:z().txSigners,children:[(0,r.jsx)(j.A,{msg:s}),a&&!i&&(0,r.jsx)(l.azJ,{display:"flex",alignItems:"center",justifyContent:"center",gap:1,mt:2,children:(0,r.jsx)(w,{msg:s})})]})]})};var H=a(12057),R=a(93400),G=a(36241),W=a(49159),P=a(1794),U=a(43740),X=a.n(U);let L="/images/transactions/custom.svg",V=e=>{if(null!=e.name)return e.name;if((0,E.nW)(e.message)){var s;return(null===(s=e.message.domain)||void 0===s?void 0:s.name)||""}let a=e.message.split("\n")[0],r=a.slice(0,20);return r.length<a.length&&(r+="â€¦"),r},Z=e=>{let{msg:s}=e;return(0,r.jsxs)(G.azJ,{className:X().txType,children:[s.logoUri?(0,r.jsx)(P.A,{src:s.logoUri||L,fallbackSrc:L,alt:"Message type",width:16,height:16}):(0,r.jsx)(G.Ahz,{component:W.A,viewBox:"0 0 32 32",fontSize:"small"}),V(s)]})};var q=a(57187),Y=a(11231);let $=e=>(0,q.GV)(s=>(0,Y.pM)(s,e)),K="CONFIRMING",Q="AWAITING_CONFIRMATIONS",ee="CONFIRMED",es={[K]:"Confirming",[Q]:"Awaiting confirmations",[ee]:"Confirmed",NEEDS_CONFIRMATION:"Needs confirmation"},ea=e=>{let s=$(e.messageHash),a=(0,p.Ay)();if(s)return es[K];let r=a&&e.confirmations.some(e=>{let{owner:s}=e;return s.value===a.address}),i=e.status===ee;return r&&!i?es[Q]:es[e.status]};var er=a(53936),ei=a(60822),en=a.n(ei);let et=(e,s)=>{switch(e){case"CONFIRMED":return s.success.main;case"NEEDS_CONFIRMATION":return s.warning.main;default:return s.text.primary}},ed=e=>{let{msg:s}=e,{confirmationsSubmitted:a,confirmationsRequired:i}=s,n=ea(s),t="CONFIRMED"===s.status,d=$(s.messageHash),l="";return(0,E.nW)(s.message)&&(l=s.message.primaryType),(0,r.jsxs)(H.azJ,{className:[en().gridContainer,en().message].join(" "),children:[(0,r.jsx)(H.azJ,{gridArea:"type",children:(0,r.jsx)(Z,{msg:s})}),(0,r.jsx)(H.azJ,{gridArea:"info",children:l||"Signature"}),(0,r.jsx)(H.azJ,{gridArea:"date",className:en().date,children:(0,r.jsx)(R.A,{value:s.modifiedTimestamp})}),(0,r.jsx)(H.azJ,{gridArea:"confirmations",children:i>0&&(0,r.jsx)(er.A,{submittedConfirmations:a,requiredConfirmations:i})}),(0,r.jsx)(H.azJ,{gridArea:"status",children:t||d?(0,r.jsxs)(H.o5u,{variant:"caption",fontWeight:"bold",display:"flex",alignItems:"center",gap:1,sx:{color:e=>{let{palette:a}=e;return et(s.status,a)}},children:[d&&(0,r.jsx)(H.PaH,{size:14,color:"inherit"}),n]}):(0,r.jsx)(w,{msg:s,compact:!0})})]})};var el=a(75758),eo=a.n(el);let ec=e=>{let{msg:s,expanded:a=!1}=e;return(0,r.jsxs)(i.nD3,{defaultExpanded:a,disableGutters:!0,elevation:0,className:eo().accordion,sx:{border:"none","&:before":{display:"none"}},children:[(0,r.jsx)(i.Xo_,{"data-testid":"message-item",expandIcon:(0,r.jsx)(n.A,{}),sx:{justifyContent:"flex-start",overflowX:"auto"},children:(0,r.jsx)(ed,{msg:s})}),(0,r.jsx)(i.ZiS,{sx:{padding:0},children:(0,r.jsx)(t.tH,{fallback:(0,r.jsx)(i.azJ,{sx:{p:2},children:"Failed to render message details"}),children:(0,r.jsx)(T,{msg:s})})})]})}}}]);
//# sourceMappingURL=8212-97c9959fa37afb97.js.map