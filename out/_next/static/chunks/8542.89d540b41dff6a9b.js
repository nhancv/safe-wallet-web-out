(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8542],{18542:(t,e,r)=>{"use strict";r.d(e,{REQUIRED_METHODS:()=>o8,default:()=>ac});var i,n,s=r(35978),o=r.n(s);r(87561),r(80985),r(66890),r(10897);var a=r(29218);function h(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}h("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),h("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{let e=function(t=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}((t=t.substring(1)).length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),({hex:a.Fo.base16,...a.Fo}),r(34736),r(26481);var c=r(29143),l=r(51642).Buffer;function u(t){let[e,r,i]=t.split(":");return{namespace:e,reference:r,address:i}}function p(t,e=[]){let r=[];return Object.keys(t).forEach(i=>{if(e.length&&!e.includes(i))return;let n=t[i];r.push(...n.accounts)}),r}let f={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};function d(){return"u">typeof c&&"u">typeof c.versions&&"u">typeof c.versions.node}function g(){return!ze()&&!!Ct()&&"ReactNative"===navigator.product}function y(t=[],e=[]){return[...new Set([...t,...e])]}function m(t){if(!Number.isSafeInteger(t)||t<0)throw Error("positive integer expected, got "+t)}function b(t,...e){if(!(t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name))throw Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw Error("Uint8Array expected of length "+e+", got length="+t.length)}function v(t){if("function"!=typeof t||"function"!=typeof t.create)throw Error("Hash should be wrapped by utils.wrapConstructor");m(t.outputLen),m(t.blockLen)}function w(t,e=!0){if(t.destroyed)throw Error("Hash instance has been destroyed");if(e&&t.finished)throw Error("Hash#digest() has already been called")}function E(t,e){b(t);let r=e.outputLen;if(t.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}let I=BigInt(0x100000000-1),P=BigInt(32),A=(t,e,r)=>t<<r|e>>>32-r,x=(t,e,r)=>e<<r|t>>>32-r,_=(t,e,r)=>e<<r-32|t>>>64-r,O=(t,e,r)=>t<<r-32|e>>>64-r,C="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function U(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function S(t,e){return t<<32-e|t>>>e}let j=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0];function N(t){for(let r=0;r<t.length;r++){var e;t[r]=(e=t[r])<<24&0xff000000|e<<8&0xff0000|e>>>8&65280|e>>>24&255}}function H(t){return"string"==typeof t&&(t=function(t){if("string"!=typeof t)throw Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}(t)),b(t),t}class D{clone(){return this._cloneInto()}}function T(t){let e=e=>t().update(H(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function L(t=32){if(C&&"function"==typeof C.getRandomValues)return C.getRandomValues(new Uint8Array(t));if(C&&"function"==typeof C.randomBytes)return C.randomBytes(t);throw Error("crypto.getRandomValues must be defined")}let B=[],R=[],$=[],k=BigInt(0),q=BigInt(1),M=BigInt(2),F=BigInt(7),z=BigInt(256),V=BigInt(113);for(let t=0,e=q,r=1,i=0;t<24;t++){[r,i]=[i,(2*r+3*i)%5],B.push(2*(5*i+r)),R.push((t+1)*(t+2)/2%64);let n=k;for(let t=0;t<7;t++)(e=(e<<q^(e>>F)*V)%z)&M&&(n^=q<<(q<<BigInt(t))-q);$.push(n)}let[G,J]=function(t,e=!1){let r=new Uint32Array(t.length),i=new Uint32Array(t.length);for(let n=0;n<t.length;n++){let{h:s,l:o}=function(t,e=!1){return e?{h:Number(t&I),l:Number(t>>P&I)}:{h:0|Number(t>>P&I),l:0|Number(t&I)}}(t[n],e);[r[n],i[n]]=[s,o]}return[r,i]}($,!0),Q=(t,e,r)=>r>32?_(t,e,r):A(t,e,r),X=(t,e,r)=>r>32?O(t,e,r):x(t,e,r);class W extends D{constructor(t,e,r,i=!1,n=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=i,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,m(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=function(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}(this.state)}keccak(){j||N(this.state32),function(t,e=24){let r=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let e=0;e<10;e++)r[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){let i=(e+8)%10,n=(e+2)%10,s=r[n],o=r[n+1],a=Q(s,o,1)^r[i],h=X(s,o,1)^r[i+1];for(let r=0;r<50;r+=10)t[e+r]^=a,t[e+r+1]^=h}let e=t[2],n=t[3];for(let r=0;r<24;r++){let i=R[r],s=Q(e,n,i),o=X(e,n,i),a=B[r];e=t[a],n=t[a+1],t[a]=s,t[a+1]=o}for(let e=0;e<50;e+=10){for(let i=0;i<10;i++)r[i]=t[e+i];for(let i=0;i<10;i++)t[e+i]^=~r[(i+2)%10]&r[(i+4)%10]}t[0]^=G[i],t[1]^=J[i]}r.fill(0)}(this.state32,this.rounds),j||N(this.state32),this.posOut=0,this.pos=0}update(t){w(this);let{blockLen:e,state:r}=this,i=(t=H(t)).length;for(let n=0;n<i;){let s=Math.min(e-this.pos,i-n);for(let e=0;e<s;e++)r[this.pos++]^=t[n++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:e,pos:r,blockLen:i}=this;t[r]^=e,(128&e)!=0&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){w(this,!1),b(t),this.finish();let e=this.state,{blockLen:r}=this;for(let i=0,n=t.length;i<n;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,n-i);t.set(e.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return t}xofInto(t){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return m(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(E(t,this),this.finished)throw Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:e,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return t||(t=new W(e,r,i,s,n)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=n,t.suffix=r,t.outputLen=i,t.enableXOF=s,t.destroyed=this.destroyed,t}}let Z=T(()=>new W(136,1,32));function Y(t){let e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+l.from(Z(r)).toString("hex")}async function tt(t,e,r,i,n,s){let o=function(t){let[e,r]=t.split(":");return{namespace:e,reference:r}}(i);if(!o.namespace||!o.reference)throw Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${i}`);try{let o="0x1626ba7e",a=r.substring(2),h=Y(e).substring(2),c=o+h+"00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000041"+a,l=await fetch(`${s||"https://rpc.walletconnect.org/v1"}/?chainId=${i}&projectId=${n}`,{method:"POST",body:JSON.stringify({id:Date.now()+Math.floor(1e3*Math.random()),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:c},"latest"]})}),{result:u}=await l.json();return!!u&&u.slice(0,o.length).toLowerCase()===o.toLowerCase()}catch(t){return console.error("isValidEip1271Signature: ",t),!1}}var te=Object.defineProperty,tr=Object.defineProperties,ti=Object.getOwnPropertyDescriptors,tn=Object.getOwnPropertySymbols,ts=Object.prototype.hasOwnProperty,to=Object.prototype.propertyIsEnumerable,ta=(t,e,r)=>e in t?te(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;let th=t=>t?.split(":"),tc=t=>{let e=t&&th(t);if(e)return t.includes("did:pkh:")?e[3]:e[1]},tl=t=>{let e=t&&th(t);if(e)return e.pop()};function tu(t){if(!t)throw Error("No recap provided, value is undefined");if(!t.att)throw Error("No `att` property found");let e=Object.keys(t.att);if(!(null!=e&&e.length))throw Error("No resources found in `att` property");e.forEach(e=>{let r=t.att[e];if(Array.isArray(r)||"object"!=typeof r)throw Error(`Resource must be an object: ${e}`);if(!Object.keys(r).length)throw Error(`Resource object is empty: ${e}`);Object.keys(r).forEach(t=>{let e=r[t];if(!Array.isArray(e))throw Error(`Ability limits ${t} must be an array of objects, found: ${e}`);if(!e.length)throw Error(`Value of ${t} is empty array, must be an array with objects`);e.forEach(e=>{if("object"!=typeof e)throw Error(`Ability limits (${t}) must be an array of objects, found: ${e}`)})})})}function tp(t){if(!Number.isSafeInteger(t)||t<0)throw Error("positive integer expected, got "+t)}function tf(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function td(t,...e){if(!tf(t))throw Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw Error("Uint8Array expected of length "+e+", got length="+t.length)}function tg(t,e=!0){if(t.destroyed)throw Error("Hash instance has been destroyed");if(e&&t.finished)throw Error("Hash#digest() has already been called")}function ty(t){if("boolean"!=typeof t)throw Error(`boolean expected, not ${t}`)}let tm=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),tb=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);if(68!==new Uint8Array(new Uint32Array([0x11223344]).buffer)[0])throw Error("Non little-endian hardware is not supported");function tv(t){if("string"==typeof t)t=function(t){if("string"!=typeof t)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}(t);else if(tf(t))t=tI(t);else throw Error("Uint8Array expected, got "+typeof t);return t}function tw(t,e,r=!0){if(void 0===e)return new Uint8Array(t);if(e.length!==t)throw Error("invalid output length, expected "+t+", got: "+e.length);if(r&&e.byteOffset%4!=0)throw Error("invalid output, must be aligned");return e}function tE(t,e,r,i){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,i);let n=BigInt(32),s=BigInt(0xffffffff),o=Number(r>>n&s),a=Number(r&s),h=4*!!i,c=4*!i;t.setUint32(e+h,o,i),t.setUint32(e+c,a,i)}function tI(t){return Uint8Array.from(t)}function tP(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}let tA=t=>Uint8Array.from(t.split("").map(t=>t.charCodeAt(0))),tx=tA("expand 16-byte k"),t_=tA("expand 32-byte k"),tO=tm(tx),tC=tm(t_);function tU(t,e){return t<<e|t>>>32-e}function tS(t){return t.byteOffset%4==0}let tj=0x100000000-1,tN=new Uint32Array,tH=(t,e)=>255&t[e++]|(255&t[e++])<<8;class tD{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,td(t=tv(t),32);let e=tH(t,0),r=tH(t,2),i=tH(t,4),n=tH(t,6),s=tH(t,8),o=tH(t,10),a=tH(t,12),h=tH(t,14);this.r[0]=8191&e,this.r[1]=(e>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|n<<9)&8191,this.r[4]=(n>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|o<<2)&8191,this.r[7]=(o>>>11|a<<5)&8065,this.r[8]=(a>>>8|h<<8)&8191,this.r[9]=h>>>5&127;for(let e=0;e<8;e++)this.pad[e]=tH(t,16+2*e)}process(t,e,r=!1){let{h:i,r:n}=this,s=n[0],o=n[1],a=n[2],h=n[3],c=n[4],l=n[5],u=n[6],p=n[7],f=n[8],d=n[9],g=tH(t,e+0),y=tH(t,e+2),m=tH(t,e+4),b=tH(t,e+6),v=tH(t,e+8),w=tH(t,e+10),E=tH(t,e+12),I=tH(t,e+14),P=i[0]+(8191&g),A=i[1]+((g>>>13|y<<3)&8191),x=i[2]+((y>>>10|m<<6)&8191),_=i[3]+((m>>>7|b<<9)&8191),O=i[4]+((b>>>4|v<<12)&8191),C=i[5]+(v>>>1&8191),U=i[6]+((v>>>14|w<<2)&8191),S=i[7]+((w>>>11|E<<5)&8191),j=i[8]+((E>>>8|I<<8)&8191),N=i[9]+(I>>>5|2048*!r),H=0,D=0+P*s+5*d*A+5*f*x+5*p*_+5*u*O;H=D>>>13,D&=8191,D+=5*l*C+5*c*U+5*h*S+5*a*j+5*o*N,H+=D>>>13,D&=8191;let T=H+P*o+A*s+5*d*x+5*f*_+5*p*O;H=T>>>13,T&=8191,T+=5*u*C+5*l*U+5*c*S+5*h*j+5*a*N,H+=T>>>13,T&=8191;let L=H+P*a+A*o+x*s+5*d*_+5*f*O;H=L>>>13,L&=8191,L+=5*p*C+5*u*U+5*l*S+5*c*j+5*h*N,H+=L>>>13,L&=8191;let B=H+P*h+A*a+x*o+_*s+5*d*O;H=B>>>13,B&=8191,B+=5*f*C+5*p*U+5*u*S+5*l*j+5*c*N,H+=B>>>13,B&=8191;let R=H+P*c+A*h+x*a+_*o+O*s;H=R>>>13,R&=8191,R+=5*d*C+5*f*U+5*p*S+5*u*j+5*l*N,H+=R>>>13,R&=8191;let $=H+P*l+A*c+x*h+_*a+O*o;H=$>>>13,$&=8191,$+=C*s+5*d*U+5*f*S+5*p*j+5*u*N,H+=$>>>13,$&=8191;let k=H+P*u+A*l+x*c+_*h+O*a;H=k>>>13,k&=8191,k+=C*o+U*s+5*d*S+5*f*j+5*p*N,H+=k>>>13,k&=8191;let q=H+P*p+A*u+x*l+_*c+O*h;H=q>>>13,q&=8191,q+=C*a+U*o+S*s+5*d*j+5*f*N,H+=q>>>13,q&=8191;let M=H+P*f+A*p+x*u+_*l+O*c;H=M>>>13,M&=8191,M+=C*h+U*a+S*o+j*s+5*d*N,H+=M>>>13,M&=8191;let F=H+P*d+A*f+x*p+_*u+O*l;H=F>>>13,F&=8191,F+=C*c+U*h+S*a+j*o+N*s,H+=F>>>13,F&=8191,D=8191&(H=(H=(H<<2)+H|0)+D|0),H>>>=13,T+=H,i[0]=D,i[1]=T,i[2]=L,i[3]=B,i[4]=R,i[5]=$,i[6]=k,i[7]=q,i[8]=M,i[9]=F}finalize(){let{h:t,pad:e}=this,r=new Uint16Array(10),i=t[1]>>>13;t[1]&=8191;for(let e=2;e<10;e++)t[e]+=i,i=t[e]>>>13,t[e]&=8191;t[0]+=5*i,i=t[0]>>>13,t[0]&=8191,t[1]+=i,i=t[1]>>>13,t[1]&=8191,t[2]+=i,r[0]=t[0]+5,i=r[0]>>>13,r[0]&=8191;for(let e=1;e<10;e++)r[e]=t[e]+i,i=r[e]>>>13,r[e]&=8191;r[9]-=8192;let n=(1^i)-1;for(let t=0;t<10;t++)r[t]&=n;n=~n;for(let e=0;e<10;e++)t[e]=t[e]&n|r[e];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let s=t[0]+e[0];t[0]=65535&s;for(let r=1;r<8;r++)s=(t[r]+e[r]|0)+(s>>>16)|0,t[r]=65535&s;tP(r)}update(t){tg(this);let{buffer:e,blockLen:r}=this,i=(t=tv(t)).length;for(let n=0;n<i;){let s=Math.min(r-this.pos,i-n);if(s===r){for(;r<=i-n;n+=r)this.process(t,n);continue}e.set(t.subarray(n,n+s),this.pos),this.pos+=s,n+=s,this.pos===r&&(this.process(e,0,!1),this.pos=0)}return this}destroy(){tP(this.h,this.r,this.buffer,this.pad)}digestInto(t){tg(this),function(t,e){td(t);let r=e.outputLen;if(t.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}(t,this),this.finished=!0;let{buffer:e,h:r}=this,{pos:i}=this;if(i){for(e[i++]=1;i<16;i++)e[i]=0;this.process(e,0,!0)}this.finalize();let n=0;for(let e=0;e<8;e++)t[n++]=r[e]>>>0,t[n++]=r[e]>>>8;return t}digest(){let{buffer:t,outputLen:e}=this;this.digestInto(t);let r=t.slice(0,e);return this.destroy(),r}}let tT=function(t){let e=(e,r)=>t(r).update(tv(e)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=e=>t(e),e}(t=>new tD(t)),tL=function(t,e){let{allowShortKeys:r,extendNonceFn:i,counterLength:n,counterRight:s,rounds:o}=function(t,e){if(null==e||"object"!=typeof e)throw Error("options must be defined");return Object.assign(t,e)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if("function"!=typeof t)throw Error("core must be a function");return tp(n),tp(o),ty(s),ty(r),(e,a,h,c,l=0)=>{td(e),td(a),td(h);let u=h.length;if(void 0===c&&(c=new Uint8Array(u)),td(c),tp(l),l<0||l>=tj)throw Error("arx: counter overflow");if(c.length<u)throw Error(`arx: output (${c.length}) is shorter than data (${u})`);let p=[],f=e.length,d,g;if(32===f)p.push(d=tI(e)),g=tC;else if(16===f&&r)(d=new Uint8Array(32)).set(e),d.set(e,16),g=tO,p.push(d);else throw Error(`arx: invalid 32-byte key, got length=${f}`);tS(a)||p.push(a=tI(a));let y=tm(d);if(i){if(24!==a.length)throw Error("arx: extended nonce must be 24 bytes");i(g,y,tm(a.subarray(0,16)),y),a=a.subarray(16)}let m=16-n;if(m!==a.length)throw Error(`arx: nonce must be ${m} or 16 bytes`);if(12!==m){let t=new Uint8Array(12);t.set(a,s?0:12-a.length),a=t,p.push(a)}return function(t,e,r,i,n,s,o,a){let h=n.length,c=new Uint8Array(64),l=tm(c),u=tS(n)&&tS(s),p=u?tm(n):tN,f=u?tm(s):tN;for(let d=0;d<h;o++){if(t(e,r,i,l,o,a),o>=tj)throw Error("arx: counter overflow");let g=Math.min(64,h-d);if(u&&64===g){let t=d/4;if(d%4!=0)throw Error("arx: invalid block position");for(let e=0,r;e<16;e++)f[r=t+e]=p[r]^l[e];d+=64;continue}for(let t=0,e;t<g;t++)s[e=d+t]=n[e]^c[t];d+=g}}(t,g,y,tm(a),h,c,l,o),tP(...p),c}}(function(t,e,r,i,n,s=20){let o=t[0],a=t[1],h=t[2],c=t[3],l=e[0],u=e[1],p=e[2],f=e[3],d=e[4],g=e[5],y=e[6],m=e[7],b=r[0],v=r[1],w=r[2],E=o,I=a,P=h,A=c,x=l,_=u,O=p,C=f,U=d,S=g,j=y,N=m,H=n,D=b,T=v,L=w;for(let t=0;t<s;t+=2)U=U+(H=tU(H^(E=E+x|0),16))|0,E=E+(x=tU(x^U,12))|0,U=U+(H=tU(H^E,8))|0,x=tU(x^U,7),S=S+(D=tU(D^(I=I+_|0),16))|0,I=I+(_=tU(_^S,12))|0,S=S+(D=tU(D^I,8))|0,_=tU(_^S,7),j=j+(T=tU(T^(P=P+O|0),16))|0,P=P+(O=tU(O^j,12))|0,j=j+(T=tU(T^P,8))|0,O=tU(O^j,7),N=N+(L=tU(L^(A=A+C|0),16))|0,A=A+(C=tU(C^N,12))|0,N=N+(L=tU(L^A,8))|0,C=tU(C^N,7),j=j+(L=tU(L^(E=E+_|0),16))|0,E=E+(_=tU(_^j,12))|0,j=j+(L=tU(L^E,8))|0,_=tU(_^j,7),N=N+(H=tU(H^(I=I+O|0),16))|0,I=I+(O=tU(O^N,12))|0,N=N+(H=tU(H^I,8))|0,O=tU(O^N,7),U=U+(D=tU(D^(P=P+C|0),16))|0,P=P+(C=tU(C^U,12))|0,U=U+(D=tU(D^P,8))|0,C=tU(C^U,7),S=S+(T=tU(T^(A=A+x|0),16))|0,A=A+(x=tU(x^S,12))|0,S=S+(T=tU(T^A,8))|0,x=tU(x^S,7);let B=0;i[B++]=o+E|0,i[B++]=a+I|0,i[B++]=h+P|0,i[B++]=c+A|0,i[B++]=l+x|0,i[B++]=u+_|0,i[B++]=p+O|0,i[B++]=f+C|0,i[B++]=d+U|0,i[B++]=g+S|0,i[B++]=y+j|0,i[B++]=m+N|0,i[B++]=n+H|0,i[B++]=b+D|0,i[B++]=v+T|0,i[B++]=w+L|0},{counterRight:!1,counterLength:4,allowShortKeys:!1}),tB=new Uint8Array(16),tR=(t,e)=>{t.update(e);let r=e.length%16;r&&t.update(tB.subarray(r))},t$=new Uint8Array(32);function tk(t,e,r,i,n){let s=t(e,r,t$),o=tT.create(s);n&&tR(o,n),tR(o,i);let a=new Uint8Array(16),h=tb(a);tE(h,0,BigInt(n?n.length:0),!0),tE(h,8,BigInt(i.length),!0),o.update(a);let c=o.digest();return tP(s,a),c}((t,e)=>{function r(i,...n){if(td(i),void 0!==t.nonceLength){let e=n[0];if(!e)throw Error("nonce / iv required");t.varSizeNonce?td(e):td(e,t.nonceLength)}let s=t.tagLength;s&&void 0!==n[1]&&td(n[1]);let o=e(i,...n),a=(t,e)=>{if(void 0!==e){if(2!==t)throw Error("cipher output not supported");td(e)}},h=!1;return{encrypt(t,e){if(h)throw Error("cannot encrypt() twice with same key + nonce");return h=!0,td(t),a(o.encrypt.length,e),o.encrypt(t,e)},decrypt(t,e){if(td(t),s&&t.length<s)throw Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,e),o.decrypt(t,e)}}}return Object.assign(r,t)})({blockSize:64,nonceLength:12,tagLength:16},(t=>(e,r,i)=>({encrypt(n,s){let o=n.length;(s=tw(o+16,s,!1)).set(n);let a=s.subarray(0,-16);t(e,r,a,a,1);let h=tk(t,e,r,a,i);return s.set(h,o),tP(h),s},decrypt(n,s){s=tw(n.length-16,s,!1);let o=n.subarray(0,-16),a=n.subarray(-16),h=tk(t,e,r,o,i);if(!function(t,e){if(t.length!==e.length)return!1;let r=0;for(let i=0;i<t.length;i++)r|=t[i]^e[i];return 0===r}(a,h))throw Error("invalid tag");return s.set(n.subarray(0,-16)),t(e,r,s,s,1),tP(h),s}}))(tL));class tq extends D{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,v(t);let r=H(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,n=new Uint8Array(i);n.set(r.length>i?t.create().update(r).digest():r);for(let t=0;t<n.length;t++)n[t]^=54;this.iHash.update(n),this.oHash=t.create();for(let t=0;t<n.length;t++)n[t]^=106;this.oHash.update(n),n.fill(0)}update(t){return w(this),this.iHash.update(t),this}digestInto(t){w(this),b(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:e,iHash:r,finished:i,destroyed:n,blockLen:s,outputLen:o}=this;return t.finished=i,t.destroyed=n,t.blockLen=s,t.outputLen=o,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let tM=(t,e,r)=>new tq(t,e).update(r).digest();tM.create=(t,e)=>new tq(t,e);let tF=new Uint8Array([0]),tz=new Uint8Array;class tV extends D{constructor(t,e,r,i){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=U(this.buffer)}update(t){w(this);let{view:e,buffer:r,blockLen:i}=this,n=(t=H(t)).length;for(let s=0;s<n;){let o=Math.min(i-this.pos,n-s);if(o===i){let e=U(t);for(;i<=n-s;s+=i)this.process(e,s);continue}r.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){w(this),E(t,this),this.finished=!0;let{buffer:e,view:r,blockLen:i,isLE:n}=this,{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let t=s;t<i;t++)e[t]=0;(function(t,e,r,i){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,i);let n=BigInt(32),s=BigInt(0xffffffff),o=Number(r>>n&s),a=Number(r&s),h=4*!!i,c=4*!i;t.setUint32(e+h,o,i),t.setUint32(e+c,a,i)})(r,i-8,BigInt(8*this.length),n),this.process(r,0);let o=U(t),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let h=a/4,c=this.get();if(h>c.length)throw Error("_sha2: outputLen bigger than state");for(let t=0;t<h;t++)o.setUint32(4*t,c[t],n)}digest(){let{buffer:t,outputLen:e}=this;this.digestInto(t);let r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:e,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return t.length=i,t.pos=o,t.finished=n,t.destroyed=s,i%e&&t.buffer.set(r),t}}let tG=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),tJ=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),tQ=new Uint32Array(64);class tK extends tV{constructor(){super(64,32,8,!1),this.A=0|tJ[0],this.B=0|tJ[1],this.C=0|tJ[2],this.D=0|tJ[3],this.E=0|tJ[4],this.F=0|tJ[5],this.G=0|tJ[6],this.H=0|tJ[7]}get(){let{A:t,B:e,C:r,D:i,E:n,F:s,G:o,H:a}=this;return[t,e,r,i,n,s,o,a]}set(t,e,r,i,n,s,o,a){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|o,this.H=0|a}process(t,e){for(let r=0;r<16;r++,e+=4)tQ[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){let e=tQ[t-15],r=tQ[t-2],i=S(e,7)^S(e,18)^e>>>3,n=S(r,17)^S(r,19)^r>>>10;tQ[t]=n+tQ[t-7]+i+tQ[t-16]|0}let{A:r,B:i,C:n,D:s,E:o,F:a,G:h,H:c}=this;for(let t=0;t<64;t++){var l,u,p,f;let e=c+(S(o,6)^S(o,11)^S(o,25))+((l=o)&a^~l&h)+tG[t]+tQ[t]|0,d=(S(r,2)^S(r,13)^S(r,22))+((u=r)&(p=i)^u&(f=n)^p&f)|0;c=h,h=a,a=o,o=s+e|0,s=n,n=i,i=r,r=e+d|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,h=h+this.G|0,c=c+this.H|0,this.set(r,i,n,s,o,a,h,c)}roundClean(){tQ.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}T(()=>new tK);let tX=BigInt(0);function tW(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function tZ(t){if(!tW(t))throw Error("Uint8Array expected")}let tY=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),t0={_0:48,_9:57,A:65,F:70,a:97,f:102};function t1(t){return t>=t0._0&&t<=t0._9?t-t0._0:t>=t0.A&&t<=t0.F?t-(t0.A-10):t>=t0.a&&t<=t0.f?t-(t0.a-10):void 0}function t2(t){if("string"!=typeof t)throw Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw Error("hex string expected, got unpadded hex of length "+e);let i=new Uint8Array(r);for(let e=0,n=0;e<r;e++,n+=2){let r=t1(t.charCodeAt(n)),s=t1(t.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(t[n]+t[n+1])+'" at index '+n);i[e]=16*r+s}return i}function t8(t){return tZ(t),function(t){if("string"!=typeof t)throw Error("hex string expected, got "+typeof t);return""===t?tX:BigInt("0x"+t)}(function(t){tZ(t);let e="";for(let r=0;r<t.length;r++)e+=tY[t[r]];return e}(Uint8Array.from(t).reverse()))}function t5(t,e,r){let i;if("string"==typeof e)try{i=t2(e)}catch(e){throw Error(t+" must be hex string or Uint8Array, cause: "+e)}else if(tW(e))i=Uint8Array.from(e);else throw Error(t+" must be hex string or Uint8Array");let n=i.length;if("number"==typeof r&&n!==r)throw Error(t+" of length "+r+" expected, got "+n);return i}let t3=t=>"bigint"==typeof t&&tX<=t;function t6(t,e,r,i){if(!(t3(e)&&t3(r)&&t3(i))||!(r<=e)||!(e<i))throw Error("expected valid "+t+": "+r+" <= n < "+i+", got "+e)}let t4={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||tW(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)},t9=BigInt(0),t7=BigInt(1);function et(t,e){let r=t%e;return r>=t9?r:e+r}function ee(t,e,r){let i=t;for(;e-- >t9;)i*=i,i%=r;return i}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);let er=BigInt(0),ei=BigInt(1),en=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);let es=BigInt(1),eo=BigInt(2),ea=BigInt(3),eh=BigInt(5);BigInt(8),function(t){let e=(function(t,e,r={}){let i=(e,r,i)=>{let n=t4[r];if("function"!=typeof n)throw Error("invalid validator function");let s=t[e];if(!(i&&void 0===s)&&!n(s,t))throw Error("param "+String(e)+" is invalid. Expected "+r+", got "+s)};for(let[t,r]of Object.entries(e))i(t,r,!1);for(let[t,e]of Object.entries(r))i(t,e,!0)}(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})),{P:r}=e,i=t=>et(t,r),n=e.montgomeryBits,s=Math.ceil(n/8),o=e.nByteLength,a=e.adjustScalarBytes||(t=>t),h=e.powPminus2||(t=>(function(t,e,r){if(e<t9)throw Error("invalid exponent, negatives unsupported");if(r<=t9)throw Error("invalid modulus");if(r===t7)return t9;let i=t7;for(;e>t9;)e&t7&&(i=i*t%r),t=t*t%r,e>>=t7;return i})(t,r-BigInt(2),r));function c(t,e,r){let n=i(t*(e-r));return[e=i(e-n),r=i(r+n)]}let l=(e.a-BigInt(2))/BigInt(4);function u(t){var e;return t2((e=i(t)).toString(16).padStart(2*s,"0")).reverse()}function p(t,e){let p=function(t,e){t6("u",t,er,r),t6("scalar",e,er,r);let s=ei,o=er,a=t,u=ei,p=er,f;for(let r=BigInt(n-1);r>=er;r--){let n=e>>r&ei;p^=n,s=(f=c(p,s,a))[0],a=f[1],o=(f=c(p,o,u))[0],u=f[1],p=n;let h=s+o,d=i(h*h),g=s-o,y=i(g*g),m=d-y,b=a+u,v=i((a-u)*h),w=i(b*g),E=v+w,I=v-w;a=i(E*E),u=i(t*i(I*I)),s=i(d*y),o=i(m*(d+i(l*m)))}return s=(f=c(p,s,a))[0],a=f[1],o=(f=c(p,o,u))[0],u=f[1],i(s*h(o))}(function(t){let e=t5("u coordinate",t,s);return 32===o&&(e[31]&=127),t8(e)}(e),function(t){let e=t5("scalar",t),r=e.length;if(r!==s&&r!==o)throw Error("invalid scalar, expected "+s+" or "+o+" bytes, got "+r);return t8(a(e))}(t));if(p===er)throw Error("invalid private or public key received");return u(p)}let f=u(e.Gu);function d(t){return p(t,f)}}({P:en,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{let{pow_p_5_8:e,b2:r}=function(t){let e=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=t*t%en*t%en,o=ee(s,eo,en)*s%en,a=ee(o,es,en)*t%en,h=ee(a,eh,en)*a%en,c=ee(h,e,en)*h%en,l=ee(c,r,en)*c%en,u=ee(l,i,en)*l%en,p=ee(u,n,en)*u%en,f=ee(p,n,en)*u%en,d=ee(f,e,en)*h%en;return{pow_p_5_8:ee(d,eo,en)*t%en,b2:s}}(t);return et(ee(e,ea,en)*r,en)},adjustScalarBytes:function(t){return t[0]&=248,t[31]&=127,t[31]|=64,t},randomBytes:L});let ec="base10",el="base64pad";function eu(t){return Number(K(t,ec))}var ep=Object.defineProperty,ef=Object.defineProperties,ed=Object.getOwnPropertyDescriptors,eg=Object.getOwnPropertySymbols,ey=Object.prototype.hasOwnProperty,em=Object.prototype.propertyIsEnumerable,eb=(t,e,r)=>e in t?ep(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ev=(t,e)=>{for(var r in e||(e={}))ey.call(e,r)&&eb(t,r,e[r]);if(eg)for(var r of eg(e))em.call(e,r)&&eb(t,r,e[r]);return t},ew=(t,e)=>ef(t,ed(e));function eE(t){return t.includes(":")}let eI={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},eP={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function eA(t,e){let{message:r,code:i}=eI[t];return{message:e?`${r} ${e}`:r,code:i}}function ex(t,e){return!!Array.isArray(t)&&(!("u">typeof e)||!t.length||t.every(e))}function e_(t){return typeof t>"u"}function eO(t,e){return!!(e&&e_(t))||"string"==typeof t&&!!t.trim().length}function eC(t){let e=!0;return ex(t)?t.length&&(e=t.every(t=>eO(t,!1))):e=!1,e}var eU=r(92970);function eS(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}eS("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),eS("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{let e=function(t=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}((t=t.substring(1)).length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),{hex:a.Fo.base16,...a.Fo};var ej=r(29143),eN=r(51642).Buffer;function eH(t){let[e,r]=t.split(":");return{namespace:e,reference:r}}function eD(t){let[e,r,i]=t.split(":");return{namespace:e,reference:r,address:i}}let eT={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};function eL(){return"u">typeof ej&&"u">typeof ej.versions&&"u">typeof ej.versions.node}function eB(){return!ze()&&!!Ct()&&"ReactNative"===navigator.product}function eR(t=[],e=[]){return[...new Set([...t,...e])]}function e$(t){if(!Number.isSafeInteger(t)||t<0)throw Error("positive integer expected, got "+t)}function ek(t,...e){if(!(t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name))throw Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw Error("Uint8Array expected of length "+e+", got length="+t.length)}function eq(t){if("function"!=typeof t||"function"!=typeof t.create)throw Error("Hash should be wrapped by utils.wrapConstructor");e$(t.outputLen),e$(t.blockLen)}function eM(t,e=!0){if(t.destroyed)throw Error("Hash instance has been destroyed");if(e&&t.finished)throw Error("Hash#digest() has already been called")}function eF(t,e){ek(t);let r=e.outputLen;if(t.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}let ez=BigInt(0x100000000-1),eV=BigInt(32),eG=(t,e,r)=>t<<r|e>>>32-r,eJ=(t,e,r)=>e<<r|t>>>32-r,eQ=(t,e,r)=>e<<r-32|t>>>64-r,eK=(t,e,r)=>t<<r-32|e>>>64-r,eX="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function eW(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function eZ(t,e){return t<<32-e|t>>>e}let eY=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0];function e0(t){for(let r=0;r<t.length;r++){var e;t[r]=(e=t[r])<<24&0xff000000|e<<8&0xff0000|e>>>8&65280|e>>>24&255}}function e1(t){return"string"==typeof t&&(t=function(t){if("string"!=typeof t)throw Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}(t)),ek(t),t}class e2{clone(){return this._cloneInto()}}function e8(t){let e=e=>t().update(e1(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function e5(t=32){if(eX&&"function"==typeof eX.getRandomValues)return eX.getRandomValues(new Uint8Array(t));if(eX&&"function"==typeof eX.randomBytes)return eX.randomBytes(t);throw Error("crypto.getRandomValues must be defined")}let e3=[],e6=[],e4=[],e9=BigInt(0),e7=BigInt(1),rt=BigInt(2),re=BigInt(7),rr=BigInt(256),ri=BigInt(113);for(let t=0,e=e7,r=1,i=0;t<24;t++){[r,i]=[i,(2*r+3*i)%5],e3.push(2*(5*i+r)),e6.push((t+1)*(t+2)/2%64);let n=e9;for(let t=0;t<7;t++)(e=(e<<e7^(e>>re)*ri)%rr)&rt&&(n^=e7<<(e7<<BigInt(t))-e7);e4.push(n)}let[rn,rs]=function(t,e=!1){let r=new Uint32Array(t.length),i=new Uint32Array(t.length);for(let n=0;n<t.length;n++){let{h:s,l:o}=function(t,e=!1){return e?{h:Number(t&ez),l:Number(t>>eV&ez)}:{h:0|Number(t>>eV&ez),l:0|Number(t&ez)}}(t[n],e);[r[n],i[n]]=[s,o]}return[r,i]}(e4,!0),ro=(t,e,r)=>r>32?eQ(t,e,r):eG(t,e,r),ra=(t,e,r)=>r>32?eK(t,e,r):eJ(t,e,r);class rh extends e2{constructor(t,e,r,i=!1,n=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=i,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,e$(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=function(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}(this.state)}keccak(){eY||e0(this.state32),function(t,e=24){let r=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let e=0;e<10;e++)r[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){let i=(e+8)%10,n=(e+2)%10,s=r[n],o=r[n+1],a=ro(s,o,1)^r[i],h=ra(s,o,1)^r[i+1];for(let r=0;r<50;r+=10)t[e+r]^=a,t[e+r+1]^=h}let e=t[2],n=t[3];for(let r=0;r<24;r++){let i=e6[r],s=ro(e,n,i),o=ra(e,n,i),a=e3[r];e=t[a],n=t[a+1],t[a]=s,t[a+1]=o}for(let e=0;e<50;e+=10){for(let i=0;i<10;i++)r[i]=t[e+i];for(let i=0;i<10;i++)t[e+i]^=~r[(i+2)%10]&r[(i+4)%10]}t[0]^=rn[i],t[1]^=rs[i]}r.fill(0)}(this.state32,this.rounds),eY||e0(this.state32),this.posOut=0,this.pos=0}update(t){eM(this);let{blockLen:e,state:r}=this,i=(t=e1(t)).length;for(let n=0;n<i;){let s=Math.min(e-this.pos,i-n);for(let e=0;e<s;e++)r[this.pos++]^=t[n++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:e,pos:r,blockLen:i}=this;t[r]^=e,(128&e)!=0&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){eM(this,!1),ek(t),this.finish();let e=this.state,{blockLen:r}=this;for(let i=0,n=t.length;i<n;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,n-i);t.set(e.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return t}xofInto(t){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return e$(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(eF(t,this),this.finished)throw Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:e,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return t||(t=new rh(e,r,i,s,n)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=n,t.suffix=r,t.outputLen=i,t.enableXOF=s,t.destroyed=this.destroyed,t}}let rc=e8(()=>new rh(136,1,32));function rl(t){let e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+eN.from(rc(r)).toString("hex")}async function ru(t,e,r,i,n,s){let o=eH(i);if(!o.namespace||!o.reference)throw Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${i}`);try{let o="0x1626ba7e",a=r.substring(2),h=rl(e).substring(2),c=o+h+"00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000041"+a,l=await fetch(`${s||"https://rpc.walletconnect.org/v1"}/?chainId=${i}&projectId=${n}`,{method:"POST",body:JSON.stringify({id:Date.now()+Math.floor(1e3*Math.random()),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:c},"latest"]})}),{result:u}=await l.json();return!!u&&u.slice(0,o.length).toLowerCase()===o.toLowerCase()}catch(t){return console.error("isValidEip1271Signature: ",t),!1}}var rp=Object.defineProperty,rf=Object.defineProperties,rd=Object.getOwnPropertyDescriptors,rg=Object.getOwnPropertySymbols,ry=Object.prototype.hasOwnProperty,rm=Object.prototype.propertyIsEnumerable,rb=(t,e,r)=>e in t?rp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;let rv=t=>t?.split(":"),rw=t=>{let e=t&&rv(t);if(e)return t.includes("did:pkh:")?e[3]:e[1]},rE=t=>{let e=t&&rv(t);if(e)return e.pop()};function rI(t){if(!t)throw Error("No recap provided, value is undefined");if(!t.att)throw Error("No `att` property found");let e=Object.keys(t.att);if(!(null!=e&&e.length))throw Error("No resources found in `att` property");e.forEach(e=>{let r=t.att[e];if(Array.isArray(r)||"object"!=typeof r)throw Error(`Resource must be an object: ${e}`);if(!Object.keys(r).length)throw Error(`Resource object is empty: ${e}`);Object.keys(r).forEach(t=>{let e=r[t];if(!Array.isArray(e))throw Error(`Ability limits ${t} must be an array of objects, found: ${e}`);if(!e.length)throw Error(`Value of ${t} is empty array, must be an array with objects`);e.forEach(e=>{if("object"!=typeof e)throw Error(`Ability limits (${t}) must be an array of objects, found: ${e}`)})})})}function rP(t){if(!Number.isSafeInteger(t)||t<0)throw Error("positive integer expected, got "+t)}function rA(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function rx(t,...e){if(!rA(t))throw Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw Error("Uint8Array expected of length "+e+", got length="+t.length)}function r_(t,e=!0){if(t.destroyed)throw Error("Hash instance has been destroyed");if(e&&t.finished)throw Error("Hash#digest() has already been called")}function rO(t){if("boolean"!=typeof t)throw Error(`boolean expected, not ${t}`)}let rC=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),rU=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);if(68!==new Uint8Array(new Uint32Array([0x11223344]).buffer)[0])throw Error("Non little-endian hardware is not supported");function rS(t){if("string"==typeof t)t=function(t){if("string"!=typeof t)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}(t);else if(rA(t))t=rH(t);else throw Error("Uint8Array expected, got "+typeof t);return t}function rj(t,e,r=!0){if(void 0===e)return new Uint8Array(t);if(e.length!==t)throw Error("invalid output length, expected "+t+", got: "+e.length);if(r&&e.byteOffset%4!=0)throw Error("invalid output, must be aligned");return e}function rN(t,e,r,i){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,i);let n=BigInt(32),s=BigInt(0xffffffff),o=Number(r>>n&s),a=Number(r&s),h=4*!!i,c=4*!i;t.setUint32(e+h,o,i),t.setUint32(e+c,a,i)}function rH(t){return Uint8Array.from(t)}function rD(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}let rT=t=>Uint8Array.from(t.split("").map(t=>t.charCodeAt(0))),rL=rT("expand 16-byte k"),rB=rT("expand 32-byte k"),rR=rC(rL),r$=rC(rB);function rk(t,e){return t<<e|t>>>32-e}function rq(t){return t.byteOffset%4==0}let rM=0x100000000-1,rF=new Uint32Array,rz=(t,e)=>255&t[e++]|(255&t[e++])<<8;class rV{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,rx(t=rS(t),32);let e=rz(t,0),r=rz(t,2),i=rz(t,4),n=rz(t,6),s=rz(t,8),o=rz(t,10),a=rz(t,12),h=rz(t,14);this.r[0]=8191&e,this.r[1]=(e>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|n<<9)&8191,this.r[4]=(n>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|o<<2)&8191,this.r[7]=(o>>>11|a<<5)&8065,this.r[8]=(a>>>8|h<<8)&8191,this.r[9]=h>>>5&127;for(let e=0;e<8;e++)this.pad[e]=rz(t,16+2*e)}process(t,e,r=!1){let{h:i,r:n}=this,s=n[0],o=n[1],a=n[2],h=n[3],c=n[4],l=n[5],u=n[6],p=n[7],f=n[8],d=n[9],g=rz(t,e+0),y=rz(t,e+2),m=rz(t,e+4),b=rz(t,e+6),v=rz(t,e+8),w=rz(t,e+10),E=rz(t,e+12),I=rz(t,e+14),P=i[0]+(8191&g),A=i[1]+((g>>>13|y<<3)&8191),x=i[2]+((y>>>10|m<<6)&8191),_=i[3]+((m>>>7|b<<9)&8191),O=i[4]+((b>>>4|v<<12)&8191),C=i[5]+(v>>>1&8191),U=i[6]+((v>>>14|w<<2)&8191),S=i[7]+((w>>>11|E<<5)&8191),j=i[8]+((E>>>8|I<<8)&8191),N=i[9]+(I>>>5|2048*!r),H=0,D=0+P*s+5*d*A+5*f*x+5*p*_+5*u*O;H=D>>>13,D&=8191,D+=5*l*C+5*c*U+5*h*S+5*a*j+5*o*N,H+=D>>>13,D&=8191;let T=H+P*o+A*s+5*d*x+5*f*_+5*p*O;H=T>>>13,T&=8191,T+=5*u*C+5*l*U+5*c*S+5*h*j+5*a*N,H+=T>>>13,T&=8191;let L=H+P*a+A*o+x*s+5*d*_+5*f*O;H=L>>>13,L&=8191,L+=5*p*C+5*u*U+5*l*S+5*c*j+5*h*N,H+=L>>>13,L&=8191;let B=H+P*h+A*a+x*o+_*s+5*d*O;H=B>>>13,B&=8191,B+=5*f*C+5*p*U+5*u*S+5*l*j+5*c*N,H+=B>>>13,B&=8191;let R=H+P*c+A*h+x*a+_*o+O*s;H=R>>>13,R&=8191,R+=5*d*C+5*f*U+5*p*S+5*u*j+5*l*N,H+=R>>>13,R&=8191;let $=H+P*l+A*c+x*h+_*a+O*o;H=$>>>13,$&=8191,$+=C*s+5*d*U+5*f*S+5*p*j+5*u*N,H+=$>>>13,$&=8191;let k=H+P*u+A*l+x*c+_*h+O*a;H=k>>>13,k&=8191,k+=C*o+U*s+5*d*S+5*f*j+5*p*N,H+=k>>>13,k&=8191;let q=H+P*p+A*u+x*l+_*c+O*h;H=q>>>13,q&=8191,q+=C*a+U*o+S*s+5*d*j+5*f*N,H+=q>>>13,q&=8191;let M=H+P*f+A*p+x*u+_*l+O*c;H=M>>>13,M&=8191,M+=C*h+U*a+S*o+j*s+5*d*N,H+=M>>>13,M&=8191;let F=H+P*d+A*f+x*p+_*u+O*l;H=F>>>13,F&=8191,F+=C*c+U*h+S*a+j*o+N*s,H+=F>>>13,F&=8191,D=8191&(H=(H=(H<<2)+H|0)+D|0),H>>>=13,T+=H,i[0]=D,i[1]=T,i[2]=L,i[3]=B,i[4]=R,i[5]=$,i[6]=k,i[7]=q,i[8]=M,i[9]=F}finalize(){let{h:t,pad:e}=this,r=new Uint16Array(10),i=t[1]>>>13;t[1]&=8191;for(let e=2;e<10;e++)t[e]+=i,i=t[e]>>>13,t[e]&=8191;t[0]+=5*i,i=t[0]>>>13,t[0]&=8191,t[1]+=i,i=t[1]>>>13,t[1]&=8191,t[2]+=i,r[0]=t[0]+5,i=r[0]>>>13,r[0]&=8191;for(let e=1;e<10;e++)r[e]=t[e]+i,i=r[e]>>>13,r[e]&=8191;r[9]-=8192;let n=(1^i)-1;for(let t=0;t<10;t++)r[t]&=n;n=~n;for(let e=0;e<10;e++)t[e]=t[e]&n|r[e];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let s=t[0]+e[0];t[0]=65535&s;for(let r=1;r<8;r++)s=(t[r]+e[r]|0)+(s>>>16)|0,t[r]=65535&s;rD(r)}update(t){r_(this);let{buffer:e,blockLen:r}=this,i=(t=rS(t)).length;for(let n=0;n<i;){let s=Math.min(r-this.pos,i-n);if(s===r){for(;r<=i-n;n+=r)this.process(t,n);continue}e.set(t.subarray(n,n+s),this.pos),this.pos+=s,n+=s,this.pos===r&&(this.process(e,0,!1),this.pos=0)}return this}destroy(){rD(this.h,this.r,this.buffer,this.pad)}digestInto(t){r_(this),function(t,e){rx(t);let r=e.outputLen;if(t.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}(t,this),this.finished=!0;let{buffer:e,h:r}=this,{pos:i}=this;if(i){for(e[i++]=1;i<16;i++)e[i]=0;this.process(e,0,!0)}this.finalize();let n=0;for(let e=0;e<8;e++)t[n++]=r[e]>>>0,t[n++]=r[e]>>>8;return t}digest(){let{buffer:t,outputLen:e}=this;this.digestInto(t);let r=t.slice(0,e);return this.destroy(),r}}let rG=function(t){let e=(e,r)=>t(r).update(rS(e)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=e=>t(e),e}(t=>new rV(t)),rJ=function(t,e){let{allowShortKeys:r,extendNonceFn:i,counterLength:n,counterRight:s,rounds:o}=function(t,e){if(null==e||"object"!=typeof e)throw Error("options must be defined");return Object.assign(t,e)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if("function"!=typeof t)throw Error("core must be a function");return rP(n),rP(o),rO(s),rO(r),(e,a,h,c,l=0)=>{rx(e),rx(a),rx(h);let u=h.length;if(void 0===c&&(c=new Uint8Array(u)),rx(c),rP(l),l<0||l>=rM)throw Error("arx: counter overflow");if(c.length<u)throw Error(`arx: output (${c.length}) is shorter than data (${u})`);let p=[],f=e.length,d,g;if(32===f)p.push(d=rH(e)),g=r$;else if(16===f&&r)(d=new Uint8Array(32)).set(e),d.set(e,16),g=rR,p.push(d);else throw Error(`arx: invalid 32-byte key, got length=${f}`);rq(a)||p.push(a=rH(a));let y=rC(d);if(i){if(24!==a.length)throw Error("arx: extended nonce must be 24 bytes");i(g,y,rC(a.subarray(0,16)),y),a=a.subarray(16)}let m=16-n;if(m!==a.length)throw Error(`arx: nonce must be ${m} or 16 bytes`);if(12!==m){let t=new Uint8Array(12);t.set(a,s?0:12-a.length),a=t,p.push(a)}return function(t,e,r,i,n,s,o,a){let h=n.length,c=new Uint8Array(64),l=rC(c),u=rq(n)&&rq(s),p=u?rC(n):rF,f=u?rC(s):rF;for(let d=0;d<h;o++){if(t(e,r,i,l,o,a),o>=rM)throw Error("arx: counter overflow");let g=Math.min(64,h-d);if(u&&64===g){let t=d/4;if(d%4!=0)throw Error("arx: invalid block position");for(let e=0,r;e<16;e++)f[r=t+e]=p[r]^l[e];d+=64;continue}for(let t=0,e;t<g;t++)s[e=d+t]=n[e]^c[t];d+=g}}(t,g,y,rC(a),h,c,l,o),rD(...p),c}}(function(t,e,r,i,n,s=20){let o=t[0],a=t[1],h=t[2],c=t[3],l=e[0],u=e[1],p=e[2],f=e[3],d=e[4],g=e[5],y=e[6],m=e[7],b=r[0],v=r[1],w=r[2],E=o,I=a,P=h,A=c,x=l,_=u,O=p,C=f,U=d,S=g,j=y,N=m,H=n,D=b,T=v,L=w;for(let t=0;t<s;t+=2)U=U+(H=rk(H^(E=E+x|0),16))|0,E=E+(x=rk(x^U,12))|0,U=U+(H=rk(H^E,8))|0,x=rk(x^U,7),S=S+(D=rk(D^(I=I+_|0),16))|0,I=I+(_=rk(_^S,12))|0,S=S+(D=rk(D^I,8))|0,_=rk(_^S,7),j=j+(T=rk(T^(P=P+O|0),16))|0,P=P+(O=rk(O^j,12))|0,j=j+(T=rk(T^P,8))|0,O=rk(O^j,7),N=N+(L=rk(L^(A=A+C|0),16))|0,A=A+(C=rk(C^N,12))|0,N=N+(L=rk(L^A,8))|0,C=rk(C^N,7),j=j+(L=rk(L^(E=E+_|0),16))|0,E=E+(_=rk(_^j,12))|0,j=j+(L=rk(L^E,8))|0,_=rk(_^j,7),N=N+(H=rk(H^(I=I+O|0),16))|0,I=I+(O=rk(O^N,12))|0,N=N+(H=rk(H^I,8))|0,O=rk(O^N,7),U=U+(D=rk(D^(P=P+C|0),16))|0,P=P+(C=rk(C^U,12))|0,U=U+(D=rk(D^P,8))|0,C=rk(C^U,7),S=S+(T=rk(T^(A=A+x|0),16))|0,A=A+(x=rk(x^S,12))|0,S=S+(T=rk(T^A,8))|0,x=rk(x^S,7);let B=0;i[B++]=o+E|0,i[B++]=a+I|0,i[B++]=h+P|0,i[B++]=c+A|0,i[B++]=l+x|0,i[B++]=u+_|0,i[B++]=p+O|0,i[B++]=f+C|0,i[B++]=d+U|0,i[B++]=g+S|0,i[B++]=y+j|0,i[B++]=m+N|0,i[B++]=n+H|0,i[B++]=b+D|0,i[B++]=v+T|0,i[B++]=w+L|0},{counterRight:!1,counterLength:4,allowShortKeys:!1}),rQ=new Uint8Array(16),rK=(t,e)=>{t.update(e);let r=e.length%16;r&&t.update(rQ.subarray(r))},rX=new Uint8Array(32);function rW(t,e,r,i,n){let s=t(e,r,rX),o=rG.create(s);n&&rK(o,n),rK(o,i);let a=new Uint8Array(16),h=rU(a);rN(h,0,BigInt(n?n.length:0),!0),rN(h,8,BigInt(i.length),!0),o.update(a);let c=o.digest();return rD(s,a),c}((t,e)=>{function r(i,...n){if(rx(i),void 0!==t.nonceLength){let e=n[0];if(!e)throw Error("nonce / iv required");t.varSizeNonce?rx(e):rx(e,t.nonceLength)}let s=t.tagLength;s&&void 0!==n[1]&&rx(n[1]);let o=e(i,...n),a=(t,e)=>{if(void 0!==e){if(2!==t)throw Error("cipher output not supported");rx(e)}},h=!1;return{encrypt(t,e){if(h)throw Error("cannot encrypt() twice with same key + nonce");return h=!0,rx(t),a(o.encrypt.length,e),o.encrypt(t,e)},decrypt(t,e){if(rx(t),s&&t.length<s)throw Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,e),o.decrypt(t,e)}}}return Object.assign(r,t)})({blockSize:64,nonceLength:12,tagLength:16},(t=>(e,r,i)=>({encrypt(n,s){let o=n.length;(s=rj(o+16,s,!1)).set(n);let a=s.subarray(0,-16);t(e,r,a,a,1);let h=rW(t,e,r,a,i);return s.set(h,o),rD(h),s},decrypt(n,s){s=rj(n.length-16,s,!1);let o=n.subarray(0,-16),a=n.subarray(-16),h=rW(t,e,r,o,i);if(!function(t,e){if(t.length!==e.length)return!1;let r=0;for(let i=0;i<t.length;i++)r|=t[i]^e[i];return 0===r}(a,h))throw Error("invalid tag");return s.set(n.subarray(0,-16)),t(e,r,s,s,1),rD(h),s}}))(rJ));class rZ extends e2{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,eq(t);let r=e1(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,n=new Uint8Array(i);n.set(r.length>i?t.create().update(r).digest():r);for(let t=0;t<n.length;t++)n[t]^=54;this.iHash.update(n),this.oHash=t.create();for(let t=0;t<n.length;t++)n[t]^=106;this.oHash.update(n),n.fill(0)}update(t){return eM(this),this.iHash.update(t),this}digestInto(t){eM(this),ek(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:e,iHash:r,finished:i,destroyed:n,blockLen:s,outputLen:o}=this;return t.finished=i,t.destroyed=n,t.blockLen=s,t.outputLen=o,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let rY=(t,e,r)=>new rZ(t,e).update(r).digest();rY.create=(t,e)=>new rZ(t,e);let r0=new Uint8Array([0]),r1=new Uint8Array;class r2 extends e2{constructor(t,e,r,i){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=eW(this.buffer)}update(t){eM(this);let{view:e,buffer:r,blockLen:i}=this,n=(t=e1(t)).length;for(let s=0;s<n;){let o=Math.min(i-this.pos,n-s);if(o===i){let e=eW(t);for(;i<=n-s;s+=i)this.process(e,s);continue}r.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){eM(this),eF(t,this),this.finished=!0;let{buffer:e,view:r,blockLen:i,isLE:n}=this,{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let t=s;t<i;t++)e[t]=0;(function(t,e,r,i){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,i);let n=BigInt(32),s=BigInt(0xffffffff),o=Number(r>>n&s),a=Number(r&s),h=4*!!i,c=4*!i;t.setUint32(e+h,o,i),t.setUint32(e+c,a,i)})(r,i-8,BigInt(8*this.length),n),this.process(r,0);let o=eW(t),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let h=a/4,c=this.get();if(h>c.length)throw Error("_sha2: outputLen bigger than state");for(let t=0;t<h;t++)o.setUint32(4*t,c[t],n)}digest(){let{buffer:t,outputLen:e}=this;this.digestInto(t);let r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:e,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return t.length=i,t.pos=o,t.finished=n,t.destroyed=s,i%e&&t.buffer.set(r),t}}let r8=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),r5=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),r3=new Uint32Array(64);class r6 extends r2{constructor(){super(64,32,8,!1),this.A=0|r5[0],this.B=0|r5[1],this.C=0|r5[2],this.D=0|r5[3],this.E=0|r5[4],this.F=0|r5[5],this.G=0|r5[6],this.H=0|r5[7]}get(){let{A:t,B:e,C:r,D:i,E:n,F:s,G:o,H:a}=this;return[t,e,r,i,n,s,o,a]}set(t,e,r,i,n,s,o,a){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|o,this.H=0|a}process(t,e){for(let r=0;r<16;r++,e+=4)r3[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){let e=r3[t-15],r=r3[t-2],i=eZ(e,7)^eZ(e,18)^e>>>3,n=eZ(r,17)^eZ(r,19)^r>>>10;r3[t]=n+r3[t-7]+i+r3[t-16]|0}let{A:r,B:i,C:n,D:s,E:o,F:a,G:h,H:c}=this;for(let t=0;t<64;t++){var l,u,p,f;let e=c+(eZ(o,6)^eZ(o,11)^eZ(o,25))+((l=o)&a^~l&h)+r8[t]+r3[t]|0,d=(eZ(r,2)^eZ(r,13)^eZ(r,22))+((u=r)&(p=i)^u&(f=n)^p&f)|0;c=h,h=a,a=o,o=s+e|0,s=n,n=i,i=r,r=e+d|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,h=h+this.G|0,c=c+this.H|0,this.set(r,i,n,s,o,a,h,c)}roundClean(){r3.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}e8(()=>new r6);let r4=BigInt(0);function r9(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function r7(t){if(!r9(t))throw Error("Uint8Array expected")}let it=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),ie={_0:48,_9:57,A:65,F:70,a:97,f:102};function ir(t){return t>=ie._0&&t<=ie._9?t-ie._0:t>=ie.A&&t<=ie.F?t-(ie.A-10):t>=ie.a&&t<=ie.f?t-(ie.a-10):void 0}function ii(t){if("string"!=typeof t)throw Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw Error("hex string expected, got unpadded hex of length "+e);let i=new Uint8Array(r);for(let e=0,n=0;e<r;e++,n+=2){let r=ir(t.charCodeAt(n)),s=ir(t.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(t[n]+t[n+1])+'" at index '+n);i[e]=16*r+s}return i}function is(t){return r7(t),function(t){if("string"!=typeof t)throw Error("hex string expected, got "+typeof t);return""===t?r4:BigInt("0x"+t)}(function(t){r7(t);let e="";for(let r=0;r<t.length;r++)e+=it[t[r]];return e}(Uint8Array.from(t).reverse()))}function io(t,e,r){let i;if("string"==typeof e)try{i=ii(e)}catch(e){throw Error(t+" must be hex string or Uint8Array, cause: "+e)}else if(r9(e))i=Uint8Array.from(e);else throw Error(t+" must be hex string or Uint8Array");let n=i.length;if("number"==typeof r&&n!==r)throw Error(t+" of length "+r+" expected, got "+n);return i}let ia=t=>"bigint"==typeof t&&r4<=t;function ih(t,e,r,i){if(!(ia(e)&&ia(r)&&ia(i))||!(r<=e)||!(e<i))throw Error("expected valid "+t+": "+r+" <= n < "+i+", got "+e)}let ic={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||r9(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)},il=BigInt(0),iu=BigInt(1);function ip(t,e){let r=t%e;return r>=il?r:e+r}function id(t,e,r){let i=t;for(;e-- >il;)i*=i,i%=r;return i}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);let ig=BigInt(0),iy=BigInt(1),im=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);let ib=BigInt(1),iv=BigInt(2),iw=BigInt(3),iE=BigInt(5);BigInt(8),function(t){let e=(function(t,e,r={}){let i=(e,r,i)=>{let n=ic[r];if("function"!=typeof n)throw Error("invalid validator function");let s=t[e];if(!(i&&void 0===s)&&!n(s,t))throw Error("param "+String(e)+" is invalid. Expected "+r+", got "+s)};for(let[t,r]of Object.entries(e))i(t,r,!1);for(let[t,e]of Object.entries(r))i(t,e,!0)}(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})),{P:r}=e,i=t=>ip(t,r),n=e.montgomeryBits,s=Math.ceil(n/8),o=e.nByteLength,a=e.adjustScalarBytes||(t=>t),h=e.powPminus2||(t=>(function(t,e,r){if(e<il)throw Error("invalid exponent, negatives unsupported");if(r<=il)throw Error("invalid modulus");if(r===iu)return il;let i=iu;for(;e>il;)e&iu&&(i=i*t%r),t=t*t%r,e>>=iu;return i})(t,r-BigInt(2),r));function c(t,e,r){let n=i(t*(e-r));return[e=i(e-n),r=i(r+n)]}let l=(e.a-BigInt(2))/BigInt(4);function u(t){var e;return ii((e=i(t)).toString(16).padStart(2*s,"0")).reverse()}function p(t,e){let p=function(t,e){ih("u",t,ig,r),ih("scalar",e,ig,r);let s=iy,o=ig,a=t,u=iy,p=ig,f;for(let r=BigInt(n-1);r>=ig;r--){let n=e>>r&iy;p^=n,s=(f=c(p,s,a))[0],a=f[1],o=(f=c(p,o,u))[0],u=f[1],p=n;let h=s+o,d=i(h*h),g=s-o,y=i(g*g),m=d-y,b=a+u,v=i((a-u)*h),w=i(b*g),E=v+w,I=v-w;a=i(E*E),u=i(t*i(I*I)),s=i(d*y),o=i(m*(d+i(l*m)))}return s=(f=c(p,s,a))[0],a=f[1],o=(f=c(p,o,u))[0],u=f[1],i(s*h(o))}(function(t){let e=io("u coordinate",t,s);return 32===o&&(e[31]&=127),is(e)}(e),function(t){let e=io("scalar",t),r=e.length;if(r!==s&&r!==o)throw Error("invalid scalar, expected "+s+" or "+o+" bytes, got "+r);return is(a(e))}(t));if(p===ig)throw Error("invalid private or public key received");return u(p)}let f=u(e.Gu);function d(t){return p(t,f)}}({P:im,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{let{pow_p_5_8:e,b2:r}=function(t){let e=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=t*t%im*t%im,o=id(s,iv,im)*s%im,a=id(o,ib,im)*t%im,h=id(a,iE,im)*a%im,c=id(h,e,im)*h%im,l=id(c,r,im)*c%im,u=id(l,i,im)*l%im,p=id(u,n,im)*u%im,f=id(p,n,im)*u%im,d=id(f,e,im)*h%im;return{pow_p_5_8:id(d,iv,im)*t%im,b2:s}}(t);return ip(id(e,iw,im)*r,im)},adjustScalarBytes:function(t){return t[0]&=248,t[31]&=127,t[31]|=64,t},randomBytes:e5});let iI="base10",iP="base64pad";function iA(t){return Number(K(t,iI))}var ix=Object.defineProperty,i_=Object.defineProperties,iO=Object.getOwnPropertyDescriptors,iC=Object.getOwnPropertySymbols,iU=Object.prototype.hasOwnProperty,iS=Object.prototype.propertyIsEnumerable,ij=(t,e,r)=>e in t?ix(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,iN=(t,e)=>{for(var r in e||(e={}))iU.call(e,r)&&ij(t,r,e[r]);if(iC)for(var r of iC(e))iS.call(e,r)&&ij(t,r,e[r]);return t},iH=(t,e)=>i_(t,iO(e));function iD(t){return t.includes(":")}function iT(t){return iD(t)?t.split(":")[0]:t}let iL={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},iB={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function iR(t,e){let{message:r,code:i}=iL[t];return{message:e?`${r} ${e}`:r,code:i}}function i$(t,e){return!!Array.isArray(t)&&(!("u">typeof e)||!t.length||t.every(e))}function ik(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function iq(t){return typeof t>"u"}function iM(t,e){return!!(e&&iq(t))||"string"==typeof t&&!!t.trim().length}function iF(t){let e=!0;return i$(t)?t.length&&(e=t.every(t=>iM(t,!1))):e=!1,e}var iz=r(56975),iV=r(63160),iG=r.n(iV),iJ=r(41035),iQ=r(32034),iK=Object.defineProperty,iX=Object.defineProperties,iW=Object.getOwnPropertyDescriptors,iZ=Object.getOwnPropertySymbols,iY=Object.prototype.hasOwnProperty,i0=Object.prototype.propertyIsEnumerable,i1=(t,e,r)=>e in t?iK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,i2=(t,e)=>{for(var r in e||(e={}))iY.call(e,r)&&i1(t,r,e[r]);if(iZ)for(var r of iZ(e))i0.call(e,r)&&i1(t,r,e[r]);return t},i8=(t,e)=>iX(t,iW(e));let i5={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class i3{constructor(t,e=!1){if(this.url=t,this.disableProviderPing=e,this.events=new s.EventEmitter,this.isAvailable=!1,this.registering=!1,!(0,iQ.isHttpUrl)(t))throw Error(`Provided URL is not compatible with HTTP connection: ${t}`);this.url=t,this.disableProviderPing=e}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}off(t,e){this.events.off(t,e)}removeListener(t,e){this.events.removeListener(t,e)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable)throw Error("Connection already closed");this.onClose()}async send(t){this.isAvailable||await this.register();try{let e=(0,iJ.h)(t),r=await (await iG()(this.url,i8(i2({},i5),{body:e}))).json();this.onPayload({data:r})}catch(e){this.onError(t.id,e)}}async register(t=this.url){if(!(0,iQ.isHttpUrl)(t))throw Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(this.registering){let t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((t,e)=>{this.events.once("register_error",t=>{this.resetMaxListeners(),e(t)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return e(Error("HTTP connection is missing or invalid"));t()})})}this.url=t,this.registering=!0;try{if(!this.disableProviderPing){let e=(0,iJ.h)({id:1,jsonrpc:"2.0",method:"test",params:[]});await iG()(t,i8(i2({},i5),{body:e}))}this.onOpen()}catch(e){let t=this.parseError(e);throw this.events.emit("register_error",t),this.onClose(),t}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(t){if(typeof t.data>"u")return;let e="string"==typeof t.data?(0,iJ.j)(t.data):t.data;this.events.emit("payload",e)}onError(t,e){let r=this.parseError(e),i=r.message||r.toString(),n=(0,iQ.formatJsonRpcError)(t,i);this.events.emit("payload",n)}parseError(t,e=this.url){return(0,iQ.parseConnectionError)(t,e,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}var i6=r(84214);let i4="error",i9="wc@2:universal_provider:",i7="https://rpc.walletconnect.org/v1/",nt="generic",ne=`${i7}bundler`,nr={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var ni="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof r.g?r.g:"u">typeof self?self:{},nn=function(t,e){return t===e||t!=t&&e!=e},ns=function(t,e){for(var r=t.length;r--;)if(nn(t[r][0],e))return r;return -1},no=Array.prototype.splice;function na(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}na.prototype.clear=function(){this.__data__=[],this.size=0},na.prototype.delete=function(t){var e=this.__data__,r=ns(e,t);return!(r<0)&&(r==e.length-1?e.pop():no.call(e,r,1),--this.size,!0)},na.prototype.get=function(t){var e=this.__data__,r=ns(e,t);return r<0?void 0:e[r][1]},na.prototype.has=function(t){return ns(this.__data__,t)>-1},na.prototype.set=function(t,e){var r=this.__data__,i=ns(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this};var nh="object"==typeof ni&&ni&&ni.Object===Object&&ni,nc="object"==typeof self&&self&&self.Object===Object&&self,nl=nh||nc||Function("return this")(),nu=nl.Symbol,np=Object.prototype,nf=np.hasOwnProperty,nd=np.toString,ng=nu?nu.toStringTag:void 0,ny=Object.prototype.toString,nm=function(t){var e=nf.call(t,ng),r=t[ng];try{t[ng]=void 0;var i=!0}catch{}var n=nd.call(t);return i&&(e?t[ng]=r:delete t[ng]),n},nb=nu?nu.toStringTag:void 0,nv=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":nb&&nb in Object(t)?nm(t):ny.call(t)},nw=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},nE=function(t){if(!nw(t))return!1;var e=nv(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},nI=nl["__core-js_shared__"],nP=function(){var t=/[^.]+$/.exec(nI&&nI.keys&&nI.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),nA=Function.prototype.toString,nx=function(t){if(null!=t){try{return nA.call(t)}catch{}try{return t+""}catch{}}return""},n_=/^\[object .+?Constructor\]$/,nO=Object.prototype,nC=Function.prototype.toString,nU=nO.hasOwnProperty,nS=RegExp("^"+nC.call(nU).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nj=function(t){return!!nw(t)&&(!nP||!(nP in t))&&(nE(t)?nS:n_).test(nx(t))},nN=function(t,e){var r=t?.[e];return nj(r)?r:void 0},nH=nN(nl,"Map"),nD=nN(Object,"create"),nT=Object.prototype.hasOwnProperty,nL=Object.prototype.hasOwnProperty;function nB(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}nB.prototype.clear=function(){this.__data__=nD?nD(null):{},this.size=0},nB.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=+!!e,e},nB.prototype.get=function(t){var e=this.__data__;if(nD){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return nT.call(e,t)?e[t]:void 0},nB.prototype.has=function(t){var e=this.__data__;return nD?void 0!==e[t]:nL.call(e,t)},nB.prototype.set=function(t,e){var r=this.__data__;return this.size+=+!this.has(t),r[t]=nD&&void 0===e?"__lodash_hash_undefined__":e,this};var nR=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t},n$=function(t,e){var r=t.__data__;return nR(e)?r["string"==typeof e?"string":"hash"]:r.map};function nk(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function nq(t){var e=this.__data__=new na(t);this.size=e.size}nk.prototype.clear=function(){this.size=0,this.__data__={hash:new nB,map:new(nH||na),string:new nB}},nk.prototype.delete=function(t){var e=n$(this,t).delete(t);return this.size-=+!!e,e},nk.prototype.get=function(t){return n$(this,t).get(t)},nk.prototype.has=function(t){return n$(this,t).has(t)},nk.prototype.set=function(t,e){var r=n$(this,t),i=r.size;return r.set(t,e),this.size+=+(r.size!=i),this},nq.prototype.clear=function(){this.__data__=new na,this.size=0},nq.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},nq.prototype.get=function(t){return this.__data__.get(t)},nq.prototype.has=function(t){return this.__data__.has(t)},nq.prototype.set=function(t,e){var r=this.__data__;if(r instanceof na){var i=r.__data__;if(!nH||i.length<199)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new nk(i)}return r.set(t,e),this.size=r.size,this};var nM=function(){try{var t=nN(Object,"defineProperty");return t({},"",{}),t}catch{}}(),nF=function(t,e,r){"__proto__"==e&&nM?nM(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},nz=function(t,e,r){(void 0===r||nn(t[e],r))&&(void 0!==r||e in t)||nF(t,e,r)},nV={exports:{}};!function(t,e){var r=e&&!e.nodeType&&e,i=r&&t&&!t.nodeType&&t,n=i&&i.exports===r?nl.Buffer:void 0,s=n?n.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,i=s?s(r):new t.constructor(r);return t.copy(i),i}}(nV,nV.exports);var nG=nl.Uint8Array,nJ=function(t){var e=new t.constructor(t.byteLength);return new nG(e).set(new nG(t)),e},nQ=Object.create,nK=function(){function t(){}return function(e){if(!nw(e))return{};if(nQ)return nQ(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),nX=(i=Object.getPrototypeOf,n=Object,function(t){return i(n(t))}),nW=Object.prototype,nZ=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||nW)},nY=function(t){return null!=t&&"object"==typeof t},n0=function(t){return nY(t)&&"[object Arguments]"==nv(t)},n1=Object.prototype,n2=n1.hasOwnProperty,n8=n1.propertyIsEnumerable,n5=n0(function(){return arguments}())?n0:function(t){return nY(t)&&n2.call(t,"callee")&&!n8.call(t,"callee")},n3=Array.isArray,n6=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=0x1fffffffffffff},n4=function(t){return null!=t&&n6(t.length)&&!nE(t)},n9={exports:{}},n7=function(){return!1};!function(t,e){var r=e&&!e.nodeType&&e,i=r&&t&&!t.nodeType&&t,n=i&&i.exports===r?nl.Buffer:void 0;t.exports=(n?n.isBuffer:void 0)||n7}(n9,n9.exports);var st=Object.prototype,se=Function.prototype.toString,sr=st.hasOwnProperty,si=se.call(Object),sn={};sn["[object Float32Array]"]=sn["[object Float64Array]"]=sn["[object Int8Array]"]=sn["[object Int16Array]"]=sn["[object Int32Array]"]=sn["[object Uint8Array]"]=sn["[object Uint8ClampedArray]"]=sn["[object Uint16Array]"]=sn["[object Uint32Array]"]=!0,sn["[object Arguments]"]=sn["[object Array]"]=sn["[object ArrayBuffer]"]=sn["[object Boolean]"]=sn["[object DataView]"]=sn["[object Date]"]=sn["[object Error]"]=sn["[object Function]"]=sn["[object Map]"]=sn["[object Number]"]=sn["[object Object]"]=sn["[object RegExp]"]=sn["[object Set]"]=sn["[object String]"]=sn["[object WeakMap]"]=!1;var ss={exports:{}};!function(t,e){var r=e&&!e.nodeType&&e,i=r&&t&&!t.nodeType&&t,n=i&&i.exports===r&&nh.process;t.exports=function(){try{return i&&i.require&&i.require("util").types||n&&n.binding&&n.binding("util")}catch{}}()}(ss,ss.exports);var so=ss.exports,sa=so&&so.isTypedArray,sh=sa?function(t){return sa(t)}:function(t){return nY(t)&&n6(t.length)&&!!sn[nv(t)]},sc=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},sl=Object.prototype.hasOwnProperty,su=function(t,e,r){var i=t[e];sl.call(t,e)&&nn(i,r)&&(void 0!==r||e in t)||nF(t,e,r)},sp=/^(?:0|[1-9]\d*)$/,sf=function(t,e){var r=typeof t;return!!(e=e??0x1fffffffffffff)&&("number"==r||"symbol"!=r&&sp.test(t))&&t>-1&&t%1==0&&t<e},sd=function(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i},sg=n9.exports,sy=Object.prototype.hasOwnProperty,sm=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},sb=Object.prototype.hasOwnProperty,sv=function(t,e){var r=n3(t),i=!r&&n5(t),n=!r&&!i&&sg(t),s=!r&&!i&&!n&&sh(t),o=r||i||n||s,a=o?sd(t.length,String):[],h=a.length;for(var c in t)(e||sy.call(t,c))&&!(o&&("length"==c||n&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||sf(c,h)))&&a.push(c);return a},sw=function(t){if(!nw(t))return sm(t);var e=nZ(t),r=[];for(var i in t)"constructor"==i&&(e||!sb.call(t,i))||r.push(i);return r},sE=function(t){return n4(t)?sv(t,!0):sw(t)},sI=function(t,e,r,i){var n=!r;r||(r={});for(var s=-1,o=e.length;++s<o;){var a=e[s],h=i?i(r[a],t[a],a,r,t):void 0;void 0===h&&(h=t[a]),n?nF(r,a,h):su(r,a,h)}return r},sP=nV.exports,sA=function(t,e){var r=e?nJ(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)},sx=function(t,e){var r=-1,i=t.length;for(e||(e=Array(i));++r<i;)e[r]=t[r];return e},s_=n9.exports,sO=function(t){if(!nY(t)||"[object Object]"!=nv(t))return!1;var e=nX(t);if(null===e)return!0;var r=sr.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&se.call(r)==si},sC=function(t,e,r){for(var i=-1,n=Object(t),s=r(t),o=s.length;o--;){var a=s[++i];if(!1===e(n[a],a,n))break}return t},sU=function(t,e,r,i,n,s,o){var a=sc(t,r),h=sc(e,r),c=o.get(h);if(c){nz(t,r,c);return}var l=s?s(a,h,r+"",t,e,o):void 0,u=void 0===l;if(u){var p=n3(h),f=!p&&s_(h),d=!p&&!f&&sh(h);l=h,p||f||d?n3(a)?l=a:nY(a)&&n4(a)?l=sx(a):f?(u=!1,l=sP(h,!0)):d?(u=!1,l=sA(h,!0)):l=[]:sO(h)||n5(h)?(l=a,n5(a)?l=sI(a,sE(a)):(!nw(a)||nE(a))&&(l="function"!=typeof h.constructor||nZ(h)?{}:nK(nX(h)))):u=!1}u&&(o.set(h,l),n(l,h,i,s,o),o.delete(h)),nz(t,r,l)},sS=function(t){return t},sj=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)},sN=Math.max,sH=Date.now,sD=function(t){var e=0,r=0;return function(){var i=sH(),n=16-(i-r);if(r=i,n>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(nM?function(t,e){return nM(t,"toString",{configurable:!0,enumerable:!1,value:function(){return e},writable:!0})}:sS),sT=function(t,e){var r;return sD((r=sN(void 0===(r=e)?t.length-1:r,0),function(){for(var e=arguments,i=-1,n=sN(e.length-r,0),s=Array(n);++i<n;)s[i]=e[r+i];i=-1;for(var o=Array(r+1);++i<r;)o[i]=e[i];return o[r]=sS(s),sj(t,this,o)}),t+"")},sL=function(t,e,r){if(!nw(r))return!1;var i=typeof e;return("number"==i?!!(n4(r)&&sf(e,r.length)):"string"==i&&e in r)&&nn(r[e],t)},sB=function t(e,r,i,n,s){e!==r&&sC(r,function(o,a){if(s||(s=new nq),nw(o))sU(e,r,a,i,t,n,s);else{var h=n?n(sc(e,a),o,a+"",e,r,s):void 0;void 0===h&&(h=o),nz(e,a,h)}},sE)},sR=function(t){return sT(function(e,r){var i=-1,n=r.length,s=n>1?r[n-1]:void 0,o=n>2?r[2]:void 0;for(s=t.length>3&&"function"==typeof s?(n--,s):void 0,o&&sL(r[0],r[1],o)&&(s=n<3?void 0:s,n=1),e=Object(e);++i<n;){var a=r[i];a&&t(e,a,i,s)}return e})}(function(t,e,r){sB(t,e,r)}),s$=Object.defineProperty,sk=Object.defineProperties,sq=Object.getOwnPropertyDescriptors,sM=Object.getOwnPropertySymbols,sF=Object.prototype.hasOwnProperty,sz=Object.prototype.propertyIsEnumerable,sV=(t,e,r)=>e in t?s$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,sG=(t,e)=>{for(var r in e||(e={}))sF.call(e,r)&&sV(t,r,e[r]);if(sM)for(var r of sM(e))sz.call(e,r)&&sV(t,r,e[r]);return t},sJ=(t,e)=>sk(t,sq(e));function sQ(t,e,r){var i;let n=eH(t);return(null==(i=e.rpcMap)?void 0:i[n.reference])||`${i7}?chainId=${n.namespace}:${n.reference}&projectId=${r}`}function sK(t){return t.includes(":")?t.split(":")[1]:t}function sX(t){return t.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function sW(t={},e={}){return sR(sZ(t),sZ(e))}function sZ(t){var e,r,i,n;let s={};if(!ik(t))return s;for(let[o,a]of Object.entries(t)){let t=iD(o)?[o]:a.chains,h=a.methods||[],c=a.events||[],l=a.rpcMap||{},u=iT(o);s[u]=sJ(sG(sG({},s[u]),a),{chains:eR(t,null==(e=s[u])?void 0:e.chains),methods:eR(h,null==(r=s[u])?void 0:r.methods),events:eR(c,null==(i=s[u])?void 0:i.events),rpcMap:sG(sG({},l),null==(n=s[u])?void 0:n.rpcMap)})}return s}function sY(t){return t.includes(":")?t.split(":")[2]:t}function s0(t){let e={};for(let[r,i]of Object.entries(t)){let t=i.methods||[],n=i.events||[],s=i.accounts||[],o=iD(r)?[r]:i.chains?i.chains:sX(i.accounts);e[r]={chains:o,methods:t,events:n,accounts:s}}return e}function s1(t){return"number"==typeof t?t:t.includes("0x")?parseInt(t,16):isNaN(Number(t=t.includes(":")?t.split(":")[1]:t))?t:Number(t)}let s2={},s8=t=>s2[t],s5=(t,e)=>{s2[t]=e};var s3=Object.defineProperty,s6=(t,e,r)=>e in t?s3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,s4=(t,e,r)=>s6(t,"symbol"!=typeof e?e+"":e,r);class s9{constructor(t){s4(this,"name","polkadot"),s4(this,"client"),s4(this,"httpProviders"),s4(this,"events"),s4(this,"namespace"),s4(this,"chainId"),this.namespace=t.namespace,this.events=s8("events"),this.client=s8("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(nr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getAccounts(){let t=this.namespace.accounts;return t&&t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(e=>{var r;let i=sK(e);t[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[e])}),t}getHttpProvider(){let t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){let r=this.createHttpProvider(t,e);r&&(this.httpProviders[t]=r)}createHttpProvider(t,e){let r=e||sQ(t,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${t}`);return new i6.F(new i3(r,s8("disableProviderPing")))}}var s7=Object.defineProperty,ot=Object.defineProperties,oe=Object.getOwnPropertyDescriptors,or=Object.getOwnPropertySymbols,oi=Object.prototype.hasOwnProperty,on=Object.prototype.propertyIsEnumerable,os=(t,e,r)=>e in t?s7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,oo=(t,e)=>{for(var r in e||(e={}))oi.call(e,r)&&os(t,r,e[r]);if(or)for(var r of or(e))on.call(e,r)&&os(t,r,e[r]);return t},oa=(t,e)=>ot(t,oe(e)),oh=(t,e,r)=>os(t,"symbol"!=typeof e?e+"":e,r);class oc{constructor(t){oh(this,"name","eip155"),oh(this,"client"),oh(this,"chainId"),oh(this,"namespace"),oh(this,"httpProviders"),oh(this,"events"),this.namespace=t.namespace,this.events=s8("events"),this.client=s8("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){switch(t.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(t);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(t);case"wallet_getCallsStatus":return await this.getCallStatus(t)}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(parseInt(t),e),this.chainId=parseInt(t),this.events.emit(nr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,e){let r=e||sQ(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${t}`);return new i6.F(new i3(r,s8("disableProviderPing")))}setHttpProvider(t,e){let r=this.createHttpProvider(t,e);r&&(this.httpProviders[t]=r)}createHttpProviders(){let t={};return this.namespace.chains.forEach(e=>{var r;let i=parseInt(sK(e));t[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[e])}),t}getAccounts(){let t=this.namespace.accounts;return t?[...new Set(t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){let t=this.chainId,e=this.httpProviders[t];if(typeof e>"u")throw Error(`JSON-RPC provider for ${t} not found`);return e}async handleSwitchChain(t){var e,r;let i=t.request.params?null==(e=t.request.params[0])?void 0:e.chainId:"0x0",n=parseInt(i=i.startsWith("0x")?i:`0x${i}`,16);if(this.isChainApproved(n))this.setDefaultChain(`${n}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:i}]},chainId:null==(r=this.namespace.chains)?void 0:r[0]}),this.setDefaultChain(`${n}`);else throw Error(`Failed to switch to chain 'eip155:${n}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}async getCapabilities(t){var e,r,i;let n=null==(r=null==(e=t.request)?void 0:e.params)?void 0:r[0];if(!n)throw Error("Missing address parameter in `wallet_getCapabilities` request");let s=this.client.session.get(t.topic),o=(null==(i=s?.sessionProperties)?void 0:i.capabilities)||{};if(null!=o&&o[n])return o?.[n];let a=await this.client.request(t);try{await this.client.session.update(t.topic,{sessionProperties:oa(oo({},s.sessionProperties||{}),{capabilities:oa(oo({},o||{}),{[n]:a})})})}catch(t){console.warn("Failed to update session with capabilities",t)}return a}async getCallStatus(t){var e,r;let i=this.client.session.get(t.topic),n=null==(e=i.sessionProperties)?void 0:e.bundler_name;if(n){let e=this.getBundlerUrl(t.chainId,n);try{return await this.getUserOperationReceipt(e,t)}catch(t){console.warn("Failed to fetch call status from bundler",t,e)}}let s=null==(r=i.sessionProperties)?void 0:r.bundler_url;if(s)try{return await this.getUserOperationReceipt(s,t)}catch(t){console.warn("Failed to fetch call status from custom bundler",t,s)}if(this.namespace.methods.includes(t.request.method))return await this.client.request(t);throw Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(t,e){var r;let i=new URL(t),n=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,iQ.formatJsonRpcRequest)("eth_getUserOperationReceipt",[null==(r=e.request.params)?void 0:r[0]]))});if(!n.ok)throw Error(`Failed to fetch user operation receipt - ${n.status}`);return await n.json()}getBundlerUrl(t,e){return`${ne}?projectId=${this.client.core.projectId}&chainId=${t}&bundler=${e}`}}var ol=Object.defineProperty,ou=(t,e,r)=>e in t?ol(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,op=(t,e,r)=>ou(t,"symbol"!=typeof e?e+"":e,r);class of{constructor(t){op(this,"name","solana"),op(this,"client"),op(this,"httpProviders"),op(this,"events"),op(this,"namespace"),op(this,"chainId"),this.namespace=t.namespace,this.events=s8("events"),this.client=s8("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(nr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}getAccounts(){let t=this.namespace.accounts;return t?[...new Set(t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(e=>{var r;let i=sK(e);t[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[e])}),t}getHttpProvider(){let t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){let r=this.createHttpProvider(t,e);r&&(this.httpProviders[t]=r)}createHttpProvider(t,e){let r=e||sQ(t,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${t}`);return new i6.F(new i3(r,s8("disableProviderPing")))}}var od=Object.defineProperty,og=(t,e,r)=>e in t?od(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,oy=(t,e,r)=>og(t,"symbol"!=typeof e?e+"":e,r);class om{constructor(t){oy(this,"name","cosmos"),oy(this,"client"),oy(this,"httpProviders"),oy(this,"events"),oy(this,"namespace"),oy(this,"chainId"),this.namespace=t.namespace,this.events=s8("events"),this.client=s8("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(nr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let t=this.namespace.accounts;return t?[...new Set(t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(e=>{var r;let i=sK(e);t[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[e])}),t}getHttpProvider(){let t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){let r=this.createHttpProvider(t,e);r&&(this.httpProviders[t]=r)}createHttpProvider(t,e){let r=e||sQ(t,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${t}`);return new i6.F(new i3(r,s8("disableProviderPing")))}}var ob=Object.defineProperty,ov=(t,e,r)=>e in t?ob(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ow=(t,e,r)=>ov(t,"symbol"!=typeof e?e+"":e,r);class oE{constructor(t){ow(this,"name","algorand"),ow(this,"client"),ow(this,"httpProviders"),ow(this,"events"),ow(this,"namespace"),ow(this,"chainId"),this.namespace=t.namespace,this.events=s8("events"),this.client=s8("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){if(!this.httpProviders[t]){let r=e||sQ(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.chainId=t,this.events.emit(nr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}getAccounts(){let t=this.namespace.accounts;return t?[...new Set(t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(e=>{var r;t[e]=this.createHttpProvider(e,null==(r=this.namespace.rpcMap)?void 0:r[e])}),t}getHttpProvider(){let t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){let r=this.createHttpProvider(t,e);r&&(this.httpProviders[t]=r)}createHttpProvider(t,e){let r=e||sQ(t,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new i6.F(new i3(r,s8("disableProviderPing")))}}var oI=Object.defineProperty,oP=(t,e,r)=>e in t?oI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,oA=(t,e,r)=>oP(t,"symbol"!=typeof e?e+"":e,r);class ox{constructor(t){oA(this,"name","cip34"),oA(this,"client"),oA(this,"httpProviders"),oA(this,"events"),oA(this,"namespace"),oA(this,"chainId"),this.namespace=t.namespace,this.events=s8("events"),this.client=s8("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(nr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let t=this.namespace.accounts;return t?[...new Set(t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(e=>{let r=this.getCardanoRPCUrl(e),i=sK(e);t[i]=this.createHttpProvider(i,r)}),t}getHttpProvider(){let t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw Error(`JSON-RPC provider for ${t} not found`);return e}getCardanoRPCUrl(t){let e=this.namespace.rpcMap;if(e)return e[t]}setHttpProvider(t,e){let r=this.createHttpProvider(t,e);r&&(this.httpProviders[t]=r)}createHttpProvider(t,e){let r=e||this.getCardanoRPCUrl(t);if(!r)throw Error(`No RPC url provided for chainId: ${t}`);return new i6.F(new i3(r,s8("disableProviderPing")))}}var o_=Object.defineProperty,oO=(t,e,r)=>e in t?o_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,oC=(t,e,r)=>oO(t,"symbol"!=typeof e?e+"":e,r);class oU{constructor(t){oC(this,"name","elrond"),oC(this,"client"),oC(this,"httpProviders"),oC(this,"events"),oC(this,"namespace"),oC(this,"chainId"),this.namespace=t.namespace,this.events=s8("events"),this.client=s8("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(nr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}getAccounts(){let t=this.namespace.accounts;return t?[...new Set(t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(e=>{var r;let i=sK(e);t[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[e])}),t}getHttpProvider(){let t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){let r=this.createHttpProvider(t,e);r&&(this.httpProviders[t]=r)}createHttpProvider(t,e){let r=e||sQ(t,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${t}`);return new i6.F(new i3(r,s8("disableProviderPing")))}}var oS=Object.defineProperty,oj=(t,e,r)=>e in t?oS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,oN=(t,e,r)=>oj(t,"symbol"!=typeof e?e+"":e,r);class oH{constructor(t){oN(this,"name","multiversx"),oN(this,"client"),oN(this,"httpProviders"),oN(this,"events"),oN(this,"namespace"),oN(this,"chainId"),this.namespace=t.namespace,this.events=s8("events"),this.client=s8("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(nr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}getAccounts(){let t=this.namespace.accounts;return t?[...new Set(t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(e=>{var r;let i=sK(e);t[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[e])}),t}getHttpProvider(){let t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){let r=this.createHttpProvider(t,e);r&&(this.httpProviders[t]=r)}createHttpProvider(t,e){let r=e||sQ(t,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${t}`);return new i6.F(new i3(r,s8("disableProviderPing")))}}var oD=Object.defineProperty,oT=(t,e,r)=>e in t?oD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,oL=(t,e,r)=>oT(t,"symbol"!=typeof e?e+"":e,r);class oB{constructor(t){oL(this,"name","near"),oL(this,"client"),oL(this,"httpProviders"),oL(this,"events"),oL(this,"namespace"),oL(this,"chainId"),this.namespace=t.namespace,this.events=s8("events"),this.client=s8("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){if(this.chainId=t,!this.httpProviders[t]){let r=e||sQ(`${this.name}:${t}`,this.namespace);if(!r)throw Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.events.emit(nr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let t=this.namespace.accounts;return t&&t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(e=>{var r;t[e]=this.createHttpProvider(e,null==(r=this.namespace.rpcMap)?void 0:r[e])}),t}getHttpProvider(){let t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){let r=this.createHttpProvider(t,e);r&&(this.httpProviders[t]=r)}createHttpProvider(t,e){let r=e||sQ(t,this.namespace);return typeof r>"u"?void 0:new i6.F(new i3(r,s8("disableProviderPing")))}}var oR=Object.defineProperty,o$=(t,e,r)=>e in t?oR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ok=(t,e,r)=>o$(t,"symbol"!=typeof e?e+"":e,r);class oq{constructor(t){ok(this,"name","tezos"),ok(this,"client"),ok(this,"httpProviders"),ok(this,"events"),ok(this,"namespace"),ok(this,"chainId"),this.namespace=t.namespace,this.events=s8("events"),this.client=s8("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){if(this.chainId=t,!this.httpProviders[t]){let r=e||sQ(`${this.name}:${t}`,this.namespace);if(!r)throw Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.events.emit(nr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let t=this.namespace.accounts;return t&&t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(e=>{t[e]=this.createHttpProvider(e)}),t}getHttpProvider(){let t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){let r=this.createHttpProvider(t,e);r&&(this.httpProviders[t]=r)}createHttpProvider(t,e){let r=e||sQ(t,this.namespace);return typeof r>"u"?void 0:new i6.F(new i3(r))}}var oM=Object.defineProperty,oF=(t,e,r)=>e in t?oM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,oz=(t,e,r)=>oF(t,"symbol"!=typeof e?e+"":e,r);class oV{constructor(t){oz(this,"name",nt),oz(this,"client"),oz(this,"httpProviders"),oz(this,"events"),oz(this,"namespace"),oz(this,"chainId"),this.namespace=t.namespace,this.events=s8("events"),this.client=s8("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(t.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(t.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(t.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(t.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider(t.chainId).request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(nr.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}getAccounts(){let t=this.namespace.accounts;return t?[...new Set(t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){var t,e;let r={};return null==(e=null==(t=this.namespace)?void 0:t.accounts)||e.forEach(t=>{let e=eH(t);r[`${e.namespace}:${e.reference}`]=this.createHttpProvider(t)}),r}getHttpProvider(t){let e=this.httpProviders[t];if(typeof e>"u")throw Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){let r=this.createHttpProvider(t,e);r&&(this.httpProviders[t]=r)}createHttpProvider(t,e){let r=e||sQ(t,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${t}`);return new i6.F(new i3(r,s8("disableProviderPing")))}}var oG=Object.defineProperty,oJ=Object.defineProperties,oQ=Object.getOwnPropertyDescriptors,oK=Object.getOwnPropertySymbols,oX=Object.prototype.hasOwnProperty,oW=Object.prototype.propertyIsEnumerable,oZ=(t,e,r)=>e in t?oG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,oY=(t,e)=>{for(var r in e||(e={}))oX.call(e,r)&&oZ(t,r,e[r]);if(oK)for(var r of oK(e))oW.call(e,r)&&oZ(t,r,e[r]);return t},o0=(t,e)=>oJ(t,oQ(e)),o1=(t,e,r)=>oZ(t,"symbol"!=typeof e?e+"":e,r);class o2{constructor(t){o1(this,"client"),o1(this,"namespaces"),o1(this,"optionalNamespaces"),o1(this,"sessionProperties"),o1(this,"events",new(o())),o1(this,"rpcProviders",{}),o1(this,"session"),o1(this,"providerOpts"),o1(this,"logger"),o1(this,"uri"),o1(this,"shouldAbortPairingAttempt",!1),o1(this,"maxPairingAttempts",10),o1(this,"disableProviderPing",!1),this.providerOpts=t,this.logger="u">typeof t?.logger&&"string"!=typeof t?.logger?t.logger:(0,iz.h6)((0,iz.iP)({level:t?.logger||i4})),this.disableProviderPing=t?.disableProviderPing||!1}static async init(t){let e=new o2(t);return await e.initialize(),e}async request(t,e,r){let[i,n]=this.validateChain(e);if(!this.session)throw Error("Please call connect() before request()");return await this.getProvider(i).request({request:oY({},t),chainId:`${i}:${n}`,topic:this.session.topic,expiry:r})}sendAsync(t,e,r,i){let n=new Date().getTime();this.request(t,r,i).then(t=>e(null,(0,iQ.formatJsonRpcResult)(n,t))).catch(t=>e(t,void 0))}async enable(){if(!this.client)throw Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(t=this.session)?void 0:t.topic,reason:iR("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}async authenticate(t,e){if(!this.client)throw Error("Sign Client not initialized");this.setNamespaces(t),await this.cleanupPendingPairings();let{uri:r,response:i}=await this.client.authenticate(t,e);r&&(this.uri=r,this.events.emit("display_uri",r));let n=await i();if(this.session=n.session,this.session){let t=s0(this.session.namespaces);this.namespaces=sW(this.namespaces,t),this.persist("namespaces",this.namespaces),this.onConnect()}return n}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}removeListener(t,e){this.events.removeListener(t,e)}off(t,e){this.events.off(t,e)}get isWalletConnect(){return!0}async pair(t){this.shouldAbortPairingAttempt=!1;let e=0;do{if(this.shouldAbortPairingAttempt)throw Error("Pairing aborted");if(e>=this.maxPairingAttempts)throw Error("Max auto pairing attempts reached");let{uri:r,approval:i}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});r&&(this.uri=r,this.events.emit("display_uri",r)),await i().then(t=>{this.session=t;let e=s0(t.namespaces);this.namespaces=sW(this.namespaces,e),this.persist("namespaces",this.namespaces)}).catch(t=>{if(t.message!==eU.L6)throw t;e++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(t,e){try{if(!this.session)return;let[r,i]=this.validateChain(t),n=this.getProvider(r);n.name===nt?n.setDefaultChain(`${r}:${i}`,e):n.setDefaultChain(i,e)}catch(t){if(!/Please call connect/.test(t.message))throw t}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");let e=this.client.pairing.getAll();if(i$(e)){for(let r of e)t.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${e.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){let t=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[t]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await eU.Ay.init({core:this.providerOpts.core,logger:this.providerOpts.logger||i4,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.org",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw Error("Sign Client not initialized");if(!this.session)throw Error("Session not initialized. Please call connect() before enable()");let t=[...new Set(Object.keys(this.session.namespaces).map(t=>iT(t)))];s5("client",this.client),s5("events",this.events),s5("disableProviderPing",this.disableProviderPing),t.forEach(t=>{if(!this.session)return;let e=function(t,e){let r=Object.keys(e.namespaces).filter(e=>e.includes(t));if(!r.length)return[];let i=[];return r.forEach(t=>{let r=e.namespaces[t].accounts;i.push(...r)}),i}(t,this.session),r=sX(e),i=o0(oY({},sW(this.namespaces,this.optionalNamespaces)[t]),{accounts:e,chains:r});switch(t){case"eip155":this.rpcProviders[t]=new oc({namespace:i});break;case"algorand":this.rpcProviders[t]=new oE({namespace:i});break;case"solana":this.rpcProviders[t]=new of({namespace:i});break;case"cosmos":this.rpcProviders[t]=new om({namespace:i});break;case"polkadot":this.rpcProviders[t]=new s9({namespace:i});break;case"cip34":this.rpcProviders[t]=new ox({namespace:i});break;case"elrond":this.rpcProviders[t]=new oU({namespace:i});break;case"multiversx":this.rpcProviders[t]=new oH({namespace:i});break;case"near":this.rpcProviders[t]=new oB({namespace:i});break;case"tezos":this.rpcProviders[t]=new oq({namespace:i});break;default:this.rpcProviders[nt]?this.rpcProviders[nt].updateNamespace(i):this.rpcProviders[nt]=new oV({namespace:i})}})}registerEventListeners(){if(typeof this.client>"u")throw Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{let{params:e}=t,{event:r}=e;if("accountsChanged"===r.name){let t=r.data;t&&i$(t)&&this.events.emit("accountsChanged",t.map(sY))}else if("chainChanged"===r.name){let t=e.chainId,r=e.event.data,i=iT(t),n=s1(t)!==s1(r)?`${i}:${s1(r)}`:t;this.onChainChanged(n)}else this.events.emit(r.name,r.data);this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:e})=>{var r;let{namespaces:i}=e,n=null==(r=this.client)?void 0:r.session.get(t);this.session=o0(oY({},n),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:e})}),this.client.on("session_delete",async t=>{await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",o0(oY({},iR("USER_DISCONNECTED")),{data:t.topic}))}),this.on(nr.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(t,!0)})}getProvider(t){return this.rpcProviders[t]||this.rpcProviders[nt]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var e;this.getProvider(t).updateNamespace(null==(e=this.session)?void 0:e.namespaces[t])})}setNamespaces(t){let{namespaces:e,optionalNamespaces:r,sessionProperties:i}=t;e&&Object.keys(e).length&&(this.namespaces=e),r&&Object.keys(r).length&&(this.optionalNamespaces=r),this.sessionProperties=i,this.persist("namespaces",e),this.persist("optionalNamespaces",r)}validateChain(t){let[e,r]=t?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[e,r];if(e&&!Object.keys(this.namespaces||{}).map(t=>iT(t)).includes(e))throw Error(`Namespace '${e}' is not configured. Please call connect() first with namespace config.`);if(e&&r)return[e,r];let i=iT(Object.keys(this.namespaces)[0]),n=this.rpcProviders[i].getDefaultChain();return[i,n]}async requestAccounts(){let[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}onChainChanged(t,e=!1){if(!this.namespaces)return;let[r,i]=this.validateChain(t);i&&(e||this.getProvider(r).setDefaultChain(i),this.namespaces[r]?this.namespaces[r].defaultChain=i:this.namespaces[`${r}:${i}`]?this.namespaces[`${r}:${i}`].defaultChain=i:this.namespaces[`${r}:${i}`]={defaultChain:i},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",i))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(t,e){this.client.core.storage.setItem(`${i9}/${t}`,e)}async getFromStore(t){return await this.client.core.storage.getItem(`${i9}/${t}`)}}let o8=["eth_sendTransaction","personal_sign"],o5=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],o3=["chainChanged","accountsChanged"],o6=["chainChanged","accountsChanged","message","disconnect","connect"];var o4=Object.defineProperty,o9=Object.defineProperties,o7=Object.getOwnPropertyDescriptors,at=Object.getOwnPropertySymbols,ae=Object.prototype.hasOwnProperty,ar=Object.prototype.propertyIsEnumerable,ai=(t,e,r)=>e in t?o4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,an=(t,e)=>{for(var r in e||(e={}))ae.call(e,r)&&ai(t,r,e[r]);if(at)for(var r of at(e))ar.call(e,r)&&ai(t,r,e[r]);return t},as=(t,e)=>o9(t,o7(e)),ao=(t,e,r)=>ai(t,"symbol"!=typeof e?e+"":e,r);function aa(t){return Number(t[0].split(":")[1])}function ah(t){return`0x${t.toString(16)}`}class ac{constructor(){ao(this,"events",new s.EventEmitter),ao(this,"namespace","eip155"),ao(this,"accounts",[]),ao(this,"signer"),ao(this,"chainId",1),ao(this,"modal"),ao(this,"rpc"),ao(this,"STORAGE_KEY","wc@2:ethereum_provider:"),ao(this,"on",(t,e)=>(this.events.on(t,e),this)),ao(this,"once",(t,e)=>(this.events.once(t,e),this)),ao(this,"removeListener",(t,e)=>(this.events.removeListener(t,e),this)),ao(this,"off",(t,e)=>(this.events.off(t,e),this)),ao(this,"parseAccount",t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t),this.signer={},this.rpc={}}static async init(t){let e=new ac;return await e.initialize(t),e}async request(t,e){return await this.signer.request(t,this.formatChainId(this.chainId),e)}sendAsync(t,e,r){this.signer.sendAsync(t,e,this.formatChainId(this.chainId),r)}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(t){if(!this.signer.client)throw Error("Provider not initialized. Call init() first");this.loadConnectOpts(t);let{required:e,optional:r}=function(t){let{chains:e,optionalChains:r,methods:i,optionalMethods:n,events:s,optionalEvents:o,rpcMap:a}=t;if(!ex(e))throw Error("Invalid chains");let h={chains:e,methods:i||o8,events:s||o3,rpcMap:an({},e.length?{[aa(e)]:a[aa(e)]}:{})},c=s?.filter(t=>!o3.includes(t)),l=i?.filter(t=>!o8.includes(t));if(!r&&!o&&!n&&!(null!=c&&c.length)&&!(null!=l&&l.length))return{required:e.length?h:void 0};let u={chains:[...new Set(c?.length&&l?.length||!r?h.chains.concat(r||[]):r)],methods:[...new Set(h.methods.concat(null!=n&&n.length?n:o5))],events:[...new Set(h.events.concat(null!=o&&o.length?o:o6))],rpcMap:a};return{required:e.length?h:void 0,optional:r.length?u:void 0}}(this.rpc);try{let i=await new Promise(async(i,n)=>{var s;this.rpc.showQrModal&&(null==(s=this.modal)||s.subscribeModal(t=>{t.open||this.signer.session||(this.signer.abortPairingAttempt(),n(Error("Connection request reset. Please try again.")))})),await this.signer.connect(as(an({namespaces:an({},e&&{[this.namespace]:e})},r&&{optionalNamespaces:{[this.namespace]:r}}),{pairingTopic:t?.pairingTopic})).then(t=>{i(t)}).catch(t=>{n(Error(t.message))})});if(!i)return;let n=p(i.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:n),this.setAccounts(n),this.events.emit("connect",{chainId:ah(this.chainId)})}catch(t){throw this.signer.logger.error(t),t}finally{this.modal&&this.modal.closeModal()}}async authenticate(t,e){if(!this.signer.client)throw Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:t?.chains});try{let r=await new Promise(async(r,i)=>{var n;this.rpc.showQrModal&&(null==(n=this.modal)||n.subscribeModal(t=>{t.open||this.signer.session||(this.signer.abortPairingAttempt(),i(Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(as(an({},t),{chains:this.rpc.chains}),e).then(t=>{r(t)}).catch(t=>{i(Error(t.message))})}),i=r.session;if(i){let t=p(i.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:t),this.setAccounts(t),this.events.emit("connect",{chainId:ah(this.chainId)})}return r}catch(t){throw this.signer.logger.error(t),t}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",t=>{let{params:e}=t,{event:r}=e;"accountsChanged"===r.name?(this.accounts=this.parseAccounts(r.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===r.name?this.setChainId(this.formatChainId(r.data)):this.events.emit(r.name,r.data),this.events.emit("session_event",t)}),this.signer.on("chainChanged",t=>{let e=parseInt(t);this.chainId=e,this.events.emit("chainChanged",ah(this.chainId)),this.persist()}),this.signer.on("session_update",t=>{this.events.emit("session_update",t)}),this.signer.on("session_delete",t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",as(an({},eA("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",t=>{var e,r;this.rpc.showQrModal&&(null==(e=this.modal)||e.closeModal(),null==(r=this.modal)||r.openModal({uri:t})),this.events.emit("display_uri",t)})}switchEthereumChain(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return"string"==typeof t&&t.startsWith(`${this.namespace}:`)}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){let e=t.filter(t=>this.isCompatibleChainId(t)).map(t=>this.parseChainId(t));e.length&&(this.chainId=e[0],this.events.emit("chainChanged",ah(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){let e=this.parseChainId(t);this.chainId=e,this.switchEthereumChain(e)}}parseAccountId(t){let[e,r,i]=t.split(":");return{chainId:`${e}:${r}`,address:i}}setAccounts(t){this.accounts=t.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var e,r;let i=null!=(e=t?.chains)?e:[],n=null!=(r=t?.optionalChains)?r:[],s=i.concat(n);if(!s.length)throw Error("No chains specified in either `chains` or `optionalChains`");let o=i.length?t?.methods||o8:[],a=i.length?t?.events||o3:[],h=t?.optionalMethods||[],c=t?.optionalEvents||[],l=t?.rpcMap||this.buildRpcMap(s,t.projectId),u=t?.qrModalOptions||void 0;return{chains:i?.map(t=>this.formatChainId(t)),optionalChains:n.map(t=>this.formatChainId(t)),methods:o,events:a,optionalMethods:h,optionalEvents:c,rpcMap:l,showQrModal:!!(null!=t&&t.showQrModal),qrModalOptions:u,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,e){let r={};return t.forEach(t=>{r[t]=this.getRpcUrl(t,e)}),r}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=this.rpc.chains.length?aa(this.rpc.chains):aa(this.rpc.optionalChains),this.signer=await o2.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:t.disableProviderPing,relayUrl:t.relayUrl,storage:t.storage,storageOptions:t.storageOptions,customStoragePrefix:t.customStoragePrefix,telemetryEnabled:t.telemetryEnabled,logger:t.logger}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{let{WalletConnectModal:e}=await r.e(9024).then(r.bind(r,99024));t=e}catch{throw Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(an({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(t){throw this.signer.logger.error(t),Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(t){if(!t)return;let{chains:e,optionalChains:r,rpcMap:i}=t;e&&ex(e)&&(this.rpc.chains=e.map(t=>this.formatChainId(t)),e.forEach(t=>{this.rpc.rpcMap[t]=i?.[t]||this.getRpcUrl(t)})),r&&ex(r)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=r?.map(t=>this.formatChainId(t)),r.forEach(t=>{this.rpc.rpcMap[t]=i?.[t]||this.getRpcUrl(t)}))}getRpcUrl(t,e){var r;return(null==(r=this.rpc.rpcMap)?void 0:r[t])||`https://rpc.walletconnect.org/v1/?chainId=eip155:${t}&projectId=${e||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{let t=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),e=this.session.namespaces[`${this.namespace}:${t}`]?this.session.namespaces[`${this.namespace}:${t}`]:this.session.namespaces[this.namespace];this.setChainIds(t?[this.formatChainId(t)]:e?.accounts),this.setAccounts(e?.accounts)}catch(t){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(t),await this.disconnect().catch(t=>this.signer.logger.warn(t))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return"string"==typeof t||t instanceof String?[this.parseAccount(t)]:t.map(t=>this.parseAccount(t))}}},63160:function(t,e){var r="undefined"!=typeof self?self:this,i=function(){function t(){this.fetch=!1,this.DOMException=r.DOMException}return t.prototype=r,new t}();(function(t){var e={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};if(e.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=ArrayBuffer.isView||function(t){return t&&r.indexOf(Object.prototype.toString.call(t))>-1};function s(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw TypeError("Invalid character in header field name");return t.toLowerCase()}function o(t){return"string"!=typeof t&&(t=String(t)),t}function a(t){var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(r[Symbol.iterator]=function(){return r}),r}function h(t){this.map={},t instanceof h?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function c(t){if(t.bodyUsed)return Promise.reject(TypeError("Already read"));t.bodyUsed=!0}function l(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function u(t){var e=new FileReader,r=l(e);return e.readAsArrayBuffer(t),r}function p(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t){if("string"==typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else{var r;e.arrayBuffer&&e.blob&&(r=t)&&DataView.prototype.isPrototypeOf(r)?(this._bodyArrayBuffer=p(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):e.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||n(t))?this._bodyArrayBuffer=p(t):this._bodyText=t=Object.prototype.toString.call(t)}}else this._bodyText="";!this.headers.get("content-type")&&("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=c(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")},this.arrayBuffer=function(){return this._bodyArrayBuffer?c(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(u)}),this.text=function(){var t,e,r,i=c(this);if(i)return i;if(this._bodyBlob)return t=this._bodyBlob,r=l(e=new FileReader),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=Array(e.length),i=0;i<e.length;i++)r[i]=String.fromCharCode(e[i]);return r.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},e.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(t,e){t=s(t),e=o(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},h.prototype.delete=function(t){delete this.map[s(t)]},h.prototype.get=function(t){return t=s(t),this.has(t)?this.map[t]:null},h.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},h.prototype.set=function(t,e){this.map[s(t)]=o(e)},h.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},h.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),a(t)},h.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),a(t)},h.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),a(t)},e.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);var d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(t,e){var r,i,n=(e=e||{}).body;if(t instanceof g){if(t.bodyUsed)throw TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new h(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new h(e.headers)),this.method=(i=(r=e.method||this.method||"GET").toUpperCase(),d.indexOf(i)>-1?i:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function y(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),i=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(n))}}),e}function m(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new h(e.headers),this.url=e.url||"",this._initBody(t)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},f.call(g.prototype),f.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},m.error=function(){var t=new m(null,{status:0,statusText:""});return t.type="error",t};var b=[301,302,303,307,308];m.redirect=function(t,e){if(-1===b.indexOf(e))throw RangeError("Invalid status code");return new m(null,{status:e,headers:{location:t}})},t.DOMException=i.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function v(r,i){return new Promise(function(n,s){var o=new g(r,i);if(o.signal&&o.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var t,e,r={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new h,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var r=t.split(":"),i=r.shift().trim();if(i){var n=r.join(":").trim();e.append(i,n)}}),e)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL"),n(new m("response"in a?a.response:a.responseText,r))},a.onerror=function(){s(TypeError("Network request failed"))},a.ontimeout=function(){s(TypeError("Network request failed"))},a.onabort=function(){s(new t.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&e.blob&&(a.responseType="blob"),o.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),o.signal&&(o.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",c)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})}v.polyfill=!0,i.fetch||(i.fetch=v,i.Headers=h,i.Request=g,i.Response=m),t.Headers=h,t.Request=g,t.Response=m,t.fetch=v,Object.defineProperty(t,"__esModule",{value:!0})})({}),i.fetch.ponyfill=!0,delete i.fetch.polyfill,(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e}}]);
//# sourceMappingURL=8542.89d540b41dff6a9b.js.map