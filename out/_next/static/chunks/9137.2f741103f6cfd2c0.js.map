{"version":3,"file":"static/chunks/9137.2f741103f6cfd2c0.js","mappings":"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","sources":["webpack://_N_E/./src/features/targetedOutreach/components/OutreachPopup/styles.module.css","webpack://_N_E/./src/components/common/Mui/index.tsx","webpack://_N_E/./src/features/targetedOutreach/constants.ts","webpack://_N_E/./src/features/targetedOutreach/hooks/useShowOutreachPopup.tsx","webpack://_N_E/./src/services/analytics/events/outreach.ts","webpack://_N_E/./src/features/targetedOutreach/components/OutreachPopup/OutreachPopup.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup\":\"styles_popup__b9sNp\",\"container\":\"styles_container__QJIu9\",\"close\":\"styles_close__nwa7K\",\"avatar\":\"styles_avatar__ojCtr\"};","export * from \"/app/apps/web/src/components/common/Mui/index.tsx\"","export const ACTIVE_OUTREACH = { id: 2, url: 'https://wn2n6ocviur.typeform.com/to/nlQlP7lU', targetAll: true }\n\nexport const OUTREACH_LS_KEY = 'outreachPopup'\nexport const OUTREACH_SS_KEY = 'outreachPopup_session'\n\nexport const HOUR_IN_MS = 60 * 60 * 1000\nexport const MAX_ASK_AGAIN_DELAY = HOUR_IN_MS * 24\n","import useIsSafeOwner from '@/hooks/useIsSafeOwner'\nimport { ACTIVE_OUTREACH, MAX_ASK_AGAIN_DELAY } from '@/features/targetedOutreach/constants'\nimport { useAppSelector } from '@/store'\nimport { selectCookieBanner } from '@/store/popupSlice'\nimport type { getSubmission } from '@safe-global/safe-client-gateway-sdk'\n\nconst useShowOutreachPopup = (\n  isDismissed: boolean | undefined,\n  askAgainLaterTimestamp: number | undefined,\n  submission: getSubmission | undefined,\n) => {\n  const cookiesPopup = useAppSelector(selectCookieBanner)\n  const isSigner = useIsSafeOwner()\n\n  const submissionHasLoaded = submission !== undefined\n  const isTargetedSafe = submissionHasLoaded && (ACTIVE_OUTREACH.targetAll || !!submission?.outreachId)\n  const hasCompletedSurvey = !!submission?.completionDate\n\n  if (cookiesPopup?.open || isDismissed || !isSigner || !isTargetedSafe || hasCompletedSurvey) {\n    return false\n  }\n\n  if (askAgainLaterTimestamp) {\n    return Date.now() - askAgainLaterTimestamp > MAX_ASK_AGAIN_DELAY\n  }\n\n  return true\n}\n\nexport default useShowOutreachPopup\n","const OUTREACH_CATEGORY = 'outreach'\n\nexport const OUTREACH_EVENTS = {\n  CLOSE_POPUP: {\n    action: 'Close outreach popup',\n    category: OUTREACH_CATEGORY,\n  },\n  ASK_AGAIN_LATER: {\n    action: 'Ask again later',\n    category: OUTREACH_CATEGORY,\n  },\n  OPEN_SURVEY: {\n    action: 'Open outreach survey',\n    category: OUTREACH_CATEGORY,\n  },\n}\n","import { useCreateSubmissionMutation, useGetSubmissionQuery } from '@/store/api/gateway'\nimport { skipToken } from '@reduxjs/toolkit/query'\nimport { useEffect, type ReactElement } from 'react'\nimport { Avatar, Box, Button, IconButton, Link, Paper, Stack, ThemeProvider, Typography } from '@mui/material'\nimport { Close } from '@mui/icons-material'\nimport type { Theme } from '@mui/material/styles'\nimport { useAppDispatch, useAppSelector } from '@/store'\nimport css from './styles.module.css'\nimport { closeOutreachBanner, openOutreachBanner, selectOutreachBanner } from '@/store/popupSlice'\nimport useLocalStorage, { useSessionStorage } from '@/services/local-storage/useLocalStorage'\nimport useShowOutreachPopup from '@/features/targetedOutreach/hooks/useShowOutreachPopup'\nimport { ACTIVE_OUTREACH, OUTREACH_LS_KEY, OUTREACH_SS_KEY } from '@/features/targetedOutreach/constants'\nimport Track from '@/components/common/Track'\nimport { OUTREACH_EVENTS } from '@/services/analytics/events/outreach'\nimport SafeThemeProvider from '@/components/theme/SafeThemeProvider'\nimport useChainId from '@/hooks/useChainId'\nimport useSafeAddress from '@/hooks/useSafeAddress'\nimport useWallet from '@/hooks/wallets/useWallet'\n\nconst OutreachPopup = (): ReactElement | null => {\n  const dispatch = useAppDispatch()\n  const outreachPopup = useAppSelector(selectOutreachBanner)\n  const [isClosed, setIsClosed] = useLocalStorage<boolean>(`${OUTREACH_LS_KEY}_v${ACTIVE_OUTREACH.id}`)\n  const currentChainId = useChainId()\n  const safeAddress = useSafeAddress()\n  const wallet = useWallet()\n  const [createSubmission] = useCreateSubmissionMutation()\n  const { data: submission } = useGetSubmissionQuery(\n    !wallet || !safeAddress\n      ? skipToken\n      : {\n          outreachId: ACTIVE_OUTREACH.id,\n          chainId: currentChainId,\n          safeAddress,\n          signerAddress: wallet?.address,\n        },\n  )\n\n  const outreachUrl = `${ACTIVE_OUTREACH.url}#safe_address=${safeAddress}&signer_address=${wallet?.address}&chain_id=${currentChainId}`\n\n  const [askAgainLaterTimestamp, setAskAgainLaterTimestamp] = useSessionStorage<number>(\n    `${OUTREACH_SS_KEY}_v${ACTIVE_OUTREACH.id}`,\n  )\n\n  const shouldOpen = useShowOutreachPopup(isClosed, askAgainLaterTimestamp, submission)\n\n  const handleClose = () => {\n    setIsClosed(true)\n    dispatch(closeOutreachBanner())\n  }\n\n  const handleAskAgainLater = () => {\n    setAskAgainLaterTimestamp(Date.now())\n    dispatch(closeOutreachBanner())\n  }\n\n  // Decide whether to show the popup.\n  useEffect(() => {\n    if (shouldOpen) {\n      dispatch(openOutreachBanner())\n    } else {\n      dispatch(closeOutreachBanner())\n    }\n  }, [dispatch, shouldOpen])\n\n  if (!outreachPopup.open) return null\n\n  const handleOpenSurvey = async () => {\n    if (wallet) {\n      await createSubmission({\n        outreachId: ACTIVE_OUTREACH.id,\n        chainId: currentChainId,\n        safeAddress,\n        signerAddress: wallet.address,\n      })\n    }\n    dispatch(closeOutreachBanner())\n  }\n\n  return (\n    // Enforce light theme for the popup\n    <SafeThemeProvider mode=\"light\">\n      {(safeTheme: Theme) => (\n        <ThemeProvider theme={safeTheme}>\n          <Box className={css.popup}>\n            <Paper className={css.container}>\n              <Stack gap={2}>\n                <Box display=\"flex\" alignItems=\"center\">\n                  <Avatar\n                    alt=\"Product marketing lead avatar\"\n                    src=\"/images/common/outreach-popup-avatar.png\"\n                    className={css.avatar}\n                  />\n                  <Box ml={1}>\n                    <Typography variant=\"body2\">Danilo Pereira</Typography>\n                    <Typography variant=\"body2\" color=\"primary.light\">\n                      Product Marketing Lead\n                    </Typography>\n                  </Box>\n                </Box>\n                <Typography variant=\"h4\" fontWeight={700}>\n                  Your voice matters!\n                  <br />\n                  Help us improve {'Safe{Wallet}'}.\n                </Typography>\n                <Typography>\n                  In 1 minute, tell us why you use {'Safe{Wallet}'}. Your input will help us create a better, smarter\n                  wallet experience for you!\n                </Typography>\n                <Track {...OUTREACH_EVENTS.OPEN_SURVEY}>\n                  <Link rel=\"noreferrer noopener\" target=\"_blank\" href={outreachUrl}>\n                    <Button fullWidth variant=\"contained\" onClick={handleOpenSurvey}>\n                      Get Involved\n                    </Button>\n                  </Link>\n                </Track>\n                <Track {...OUTREACH_EVENTS.ASK_AGAIN_LATER}>\n                  <Button fullWidth variant=\"text\" onClick={handleAskAgainLater}>\n                    Ask me later\n                  </Button>\n                </Track>\n                <Typography variant=\"body2\" color=\"primary.light\" mx=\"auto\">\n                  It&apos;ll only take 1 minute.\n                </Typography>\n              </Stack>\n              <Track {...OUTREACH_EVENTS.CLOSE_POPUP}>\n                <IconButton className={css.close} aria-label=\"close outreach popup\" onClick={handleClose}>\n                  <Close />\n                </IconButton>\n              </Track>\n            </Paper>\n          </Box>\n        </ThemeProvider>\n      )}\n    </SafeThemeProvider>\n  )\n}\nexport default OutreachPopup\n"],"names":["ACTIVE_OUTREACH","id","url","targetAll","isDismissed","askAgainLaterTimestamp","submission","cookiesPopup","useAppSelector","selectCookieBanner","useShowOutreachPopup","isSigner","useIsSafeOwner","isTargetedSafe","submissionHasLoaded","undefined","outreachId","hasCompletedSurvey","completionDate","open","Date","now","HOUR_IN_MS","MAX_ASK_AGAIN_DELAY","OUTREACH_CATEGORY","OUTREACH_EVENTS","CLOSE_POPUP","action","category","ASK_AGAIN_LATER","OPEN_SURVEY","dispatch","useAppDispatch","outreachPopup","selectOutreachBanner","isClosed","setIsClosed","useLocalStorage","OUTREACH_LS_KEY","currentChainId","useChainId","safeAddress","useSafeAddress","wallet","useWallet","createSubmission","useCreateSubmissionMutation","data","useGetSubmissionQuery","chainId","signerAddress","address","skipToken","outreachUrl","setAskAgainLaterTimestamp","useSessionStorage","OUTREACH_SS_KEY","shouldOpen","handleClose","closeOutreachBanner","handleAskAgainLater","useEffect","openOutreachBanner","handleOpenSurvey","SafeThemeProvider","mode","ThemeProvider","theme","safeTheme","Box","className","css","Paper","Stack","gap","display","alignItems","Avatar","alt","src","ml","Typography","variant","color","fontWeight","br","Track","Link","rel","target","href","Button","fullWidth","onClick","mx","IconButton","aria-label","Close"],"sourceRoot":"","ignoreList":[]}