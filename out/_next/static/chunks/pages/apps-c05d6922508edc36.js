(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3880],{20203:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Y});var s=a(6029),l=a(77328),i=a.n(l),r=a(89099),n=a(55729),p=a(36429),o=a.n(p),d=a(47679),c=a(6593),h=a(91082),u=a(82030),g=a(72830),x=a(64410),m=a(68284),f=a(19957),A=a(94810),y=a(13927),j=a(6003),b=a(83290),v=a(93256),S=a(66120),_=a(70946),C=a(67578),w=a(82260),L=a(11502),k=a(88713),z=a(35656),M=a(50554),E=a(48504),q=a(13616),P=a(12273),N=a(55650),R=a(93863),W=a.n(R);let I=e=>{let{onChangeQuery:t,onChangeFilterCategory:a,onChangeOptimizedWithBatch:l,selectedCategories:i,safeAppsList:r}=e,n=O(r);return(0,s.jsxs)(x.Ay,{container:!0,spacing:2,className:W().filterContainer,children:[(0,s.jsx)(x.Ay,{item:!0,xs:12,sm:12,md:6,lg:6,children:(0,s.jsx)(m.A,{id:"search-by-name",placeholder:"Search by name or category","aria-label":"Search Safe App by name",variant:"filled",hiddenLabel:!0,onChange:e=>{t(e.target.value)},InputProps:{startAdornment:(0,s.jsx)(f.A,{position:"start",children:(0,s.jsx)(A.A,{component:P.A,inheritViewBox:!0,color:"border"})}),disableUnderline:!0},fullWidth:!0,size:"small",sx:{"& > .MuiInputBase-root":{padding:"8px 16px"}}})}),(0,s.jsx)(x.Ay,{item:!0,xs:12,sm:6,md:3,lg:3,children:(0,s.jsxs)(k.A,{fullWidth:!0,children:[(0,s.jsx)(y.A,{id:"select-safe-app-category-label",shrink:!0,children:"Category"}),(0,s.jsx)(S.A,{labelId:"select-safe-app-category-label",id:"safe-app-category-selector",displayEmpty:!0,multiple:!0,value:i,onChange:e=>{a(e.target.value)},input:(0,s.jsx)(b.A,{label:"Category",fullWidth:!0,notched:!0,sx:{paddingRight:"18px"}}),renderValue:e=>0===e.length?"Select category":"".concat(e.length," categories selected"),fullWidth:!0,MenuProps:F,children:n.length>0?n.map(e=>(0,s.jsxs)(j.A,{sx:{padding:"0 6px 2px 6px",height:B},value:e.value,disableGutters:!0,children:[(0,s.jsx)(w.A,{disableRipple:!0,sx:{"& .MuiSvgIcon-root":{fontSize:24},padding:"3px"},checked:i.includes(e.value)}),(0,s.jsx)(v.A,{primary:e.label,primaryTypographyProps:{fontSize:14,paddingLeft:"5px"}})]},e.value)):(0,s.jsx)(j.A,{disabled:!0,sx:{padding:"0 6px 2px 6px",height:B},disableGutters:!0,children:(0,s.jsx)(v.A,{primary:"No categories defined",primaryTypographyProps:{fontSize:14,paddingLeft:"5px"}})})}),i.length>0&&(0,s.jsx)(M.A,{title:"clear selected categories",placement:"top",children:(0,s.jsx)(_.A,{onClick:()=>{a([])},sx:{position:"absolute",top:"16px",right:"28px"},color:"default",component:"label",size:"small",children:(0,s.jsx)(E.A,{fontSize:"small"})})})]})}),(0,s.jsx)(x.Ay,{item:!0,xs:12,sm:6,md:3,lg:3,children:(0,s.jsx)(M.A,{title:(0,s.jsx)("div",{style:{textAlign:"center"},children:"Merge multiple transactions into one to save time and gas fees inside apps offering this feature"}),children:(0,s.jsxs)(k.A,{variant:"standard",children:[(0,s.jsx)(L.A,{className:W().optimizedWithBatchLabel,children:"Optimized with"}),(0,s.jsx)(z.A,{control:(0,s.jsx)(w.A,{}),onChange:(e,t)=>{l(t)},label:(0,s.jsxs)(C.A,{display:"flex",alignItems:"center",gap:1,children:[(0,s.jsx)("span",{children:"Batch transactions"})," ",(0,s.jsx)(N.A,{})]})})]})})})]})},B=34,F={sx:{"& .MuiList-root":{padding:"9px 0"}},PaperProps:{style:{maxHeight:399,overflow:"scroll"}}},O=e=>(0,q.Xz)(e).map(e=>({label:e,value:e})),T=e=>{let{safeAppsList:t,selectedCategories:a,setSelectedCategories:s}=e,l=(0,r.useRouter)();return(0,n.useEffect)(()=>{if(!l.isReady)return;let e=O(t).map(e=>e.value),i=Array.isArray(l.query.categories)?l.query.categories[0]:l.query.categories;if(i&&0===a.length){let t=i.split(",");if(!t.every(t=>e.includes(t)))return;s(t)}},[l.isReady,l.query.categories,t,a.length,s]),{onSelectCategories:async e=>{let{categories:t,...a}=l.query;await l.push({pathname:l.pathname,query:0===e.length?a:{...l.query,categories:e.join(",")}},void 0,{shallow:!0}),s(e)}}},G=(e,t)=>(0,n.useMemo)(()=>t.length>0?e.filter(e=>t.some(t=>e.tags.includes(t))):e,[e,t]);var U=a(38767);let X=(e,t)=>{let a=(0,n.useMemo)(()=>new U.A(e,{keys:[{name:"name",weight:.99},{name:"description",weight:.5},{name:"tags",weight:.99}],threshold:.3,findAllMatches:!0}),[e]);return(0,n.useMemo)(()=>t?a.search(t).map(e=>e.item):e,[a,e,t])},H=(e,t)=>(0,n.useMemo)(()=>t?e.filter(e=>(0,q.UW)(e)):e,[e,t]);var V=a(21436),J=a(85205);let Q=e=>{let[t,a]=(0,n.useState)(""),[s,l]=(0,n.useState)([]),[i,r]=(0,n.useState)(!1),p=H(G(X(e,t),s),i),{onSelectCategories:o}=T({safeAppsList:e,selectedCategories:s,setSelectedCategories:l}),d=(0,V.A)(t,2e3);return(0,n.useEffect)(()=>{d&&(0,J.ai)({...J.Jz.SEARCH,label:d})},[d]),{query:t,setQuery:a,selectedCategories:s,setSelectedCategories:o,optimizedWithBatchFilter:i,setOptimizedWithBatchFilter:r,filteredApps:p}};var Z=a(30697),D=a(94937),K=a(12002);let Y=()=>{let e=(0,r.useRouter)(),{remoteSafeApps:t,remoteSafeAppsLoading:a,pinnedSafeApps:l,pinnedSafeAppIds:p}=(0,d.v)(),{filteredApps:x,query:m,setQuery:f,setSelectedCategories:A,setOptimizedWithBatchFilter:y,selectedCategories:j}=Q(t),b=x.length!==t.length,v=(0,Z.eZ)(K.Gv.SAFE_APPS),S=(0,n.useMemo)(()=>t.filter(e=>e.featured),[t]),_=(0,n.useMemo)(()=>t.filter(e=>!p.has(e.id)),[t,p]),C=(0,n.useCallback)(o()(f,300),[]);return((0,n.useEffect)(()=>{let t=e.query.appUrl;t&&e.push({pathname:g.S.apps.open,query:{safe:e.query.safe,appUrl:t}})},[e]),v)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i(),{children:(0,s.jsx)("title",{children:"".concat(D.Az," â€“ Safe Apps")})}),(0,s.jsx)(c.A,{}),(0,s.jsx)(h.A,{}),(0,s.jsxs)("main",{children:[(0,s.jsx)(I,{onChangeQuery:C,onChangeFilterCategory:A,onChangeOptimizedWithBatch:y,selectedCategories:j,safeAppsList:t}),!b&&l.length>0&&(0,s.jsx)(u.A,{title:"My pinned apps",safeAppsList:l,bookmarkedSafeAppsId:p,eventLabel:J.ls.apps_pinned}),!b&&S.length>0&&(0,s.jsx)(u.A,{title:"Featured apps",safeAppsList:S,bookmarkedSafeAppsId:p,eventLabel:J.ls.apps_featured}),(0,s.jsx)(u.A,{title:"All apps",isFiltered:b,safeAppsList:b?x:_,safeAppsListLoading:a,bookmarkedSafeAppsId:p,eventLabel:J.ls.apps_all,query:m,showNativeSwapsCard:!0})]})]}):(0,s.jsx)(s.Fragment,{})}},76515:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/apps",function(){return a(20203)}])},93863:e=>{e.exports={filterContainer:"styles_filterContainer__jzg51",optimizedWithBatchLabel:"styles_optimizedWithBatchLabel__RREdf"}}},e=>{var t=t=>e(e.s=t);e.O(0,[7118,8984,636,6593,8792],()=>t(76515)),_N_E=e.O()}]);
//# sourceMappingURL=apps-c05d6922508edc36.js.map