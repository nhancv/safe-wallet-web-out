(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3860,9422],{69480:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>P});var a=n(6029),s=n(77328),r=n.n(s),i=n(94937),o=n(57597),l=n(89099),c=n(88683),d=n(17985),h=n(61951),x=n(57059),m=n(47214),u=n(50670),f=n(33916),p=n(72830),v=n(85205),j=n(91064),S=n(55729),y=n(87137),w=n(32294),b=n(78726),A=n(88992),g=n(48426),N=n(45650),k=n(60089),_=n.n(k),z=n(84106),C=n(30697),B=n(8694),R=n(24334),T=n(4876),V=n(21128),I=n(7639),D=function(e){return e.safeVersion="safeVersion",e.saltNonce="saltNonce",e.paymentReceiver="paymentReceiver",e}(D||{});let E=e=>{var t,n,s,r;let{onSubmit:i,onBack:o,data:l,setStep:c}=e;(0,g.A)(c,l.networks);let d=(0,C._J)(),h=(0,w.vH)(),x=(0,A.mN)({mode:"onChange",defaultValues:l}),{handleSubmit:m,control:u,watch:f,formState:p,getValues:v,register:j}=x,k=f("safeVersion"),D=f("saltNonce"),E=f("paymentReceiver"),J=(0,S.useMemo)(()=>d?(0,R.bo)(k,{owners:l.owners.map(e=>e.address),threshold:l.threshold,paymentReceiver:E},d):void 0,[d,l.owners,l.threshold,k,E]),[W]=(0,B.A)(async()=>{if(!h||!J)return;let e={...J,saltNonce:D.toString()};return(0,y.$2)(e,h)},[h,J,D]),[P]=(0,B.A)(async()=>!!W&&await (0,I.gN)(W),[W]),H=!p.isValid||!!P,M=m(e=>{i(e)});return(0,a.jsx)("form",{"data-testid":"advanced-options-step-form",onSubmit:M,id:"create-safe-advanced-options-step-form",children:(0,a.jsx)(A.Op,{...x,children:(0,a.jsxs)(b.BJc,{spacing:2,children:[(0,a.jsxs)(b.azJ,{className:_().row,children:[(0,a.jsxs)(b.o5u,{variant:"h5",sx:{fontWeight:700,display:"inline-flex",alignItems:"center",gap:1},children:["Safe version",(0,a.jsx)(b.m_M,{title:"The threshold of a Safe Account specifies how many signers need to confirm a Safe Account transaction before it can be executed.",arrow:!0,placement:"top",children:(0,a.jsx)("span",{style:{display:"flex"},children:(0,a.jsx)(b.Ahz,{component:V.A,inheritViewBox:!0,color:"border",fontSize:"small"})})})]}),(0,a.jsx)(b.o5u,{variant:"body2",mb:2,children:"Changes the used master copy and fallback handler of the Safe."}),(0,a.jsx)(A.xI,{control:u,name:"safeVersion",render:e=>{let{field:t}=e;return(0,a.jsxs)(b.A_L,{select:!0,...t,label:"Safe version",children:[(0,a.jsx)(b.Drp,{value:"1.4.1",children:"1.4.1 (latest)"}),(0,a.jsx)(b.Drp,{value:"1.3.0",children:"1.3.0"})]})}}),(0,a.jsxs)(b.o5u,{variant:"h5",sx:{fontWeight:700,display:"inline-flex",alignItems:"center",gap:1,mt:4,width:1},children:["Salt nonce",(0,a.jsx)(b.m_M,{title:"The salt nonce changes the predicted Safe address. It can be used to re-create a Safe from another chain or to create a specific Safe address",arrow:!0,placement:"top",children:(0,a.jsx)("span",{style:{display:"flex"},children:(0,a.jsx)(b.Ahz,{component:V.A,inheritViewBox:!0,color:"border",fontSize:"small"})})})]}),(0,a.jsx)(b.o5u,{variant:"body2",mb:2,children:"Impacts the derived Safe address"}),(0,a.jsx)(z.A,{...j("saltNonce",{validate:async e=>isNaN(e)?"Salt nonce must be a number":e<0?"Salt nonce must be positive":void 0,required:!0}),fullWidth:!0,label:"Salt nonce",error:!!p.errors.saltNonce||!!P,helperText:null!==(s=null===(t=p.errors.saltNonce)||void 0===t?void 0:t.message)&&void 0!==s?s:P?"The Safe is already deployed. Use a different salt nonce.":void 0}),(0,a.jsxs)(b.o5u,{variant:"h5",sx:{fontWeight:700,display:"inline-flex",alignItems:"center",gap:1,mt:4,width:1},children:["Payment receiver",(0,a.jsx)(b.m_M,{title:"The payment receiver changes the predicted Safe address.",arrow:!0,placement:"top",children:(0,a.jsx)("span",{style:{display:"flex"},children:(0,a.jsx)(b.Ahz,{component:V.A,inheritViewBox:!0,color:"border",fontSize:"small"})})})]}),(0,a.jsx)(b.o5u,{variant:"body2",sx:{mb:2},children:"Impacts the derived Safe address"}),(0,a.jsx)(b.A_L,{...j("paymentReceiver",{required:!0}),label:"Payment receiver",error:!!p.errors.paymentReceiver||!!P,helperText:null!==(r=null===(n=p.errors.paymentReceiver)||void 0===n?void 0:n.message)&&void 0!==r?r:P?"The Safe is already deployed. Use a different payment receiver.":void 0,fullWidth:!0})]}),(0,a.jsx)(b.cGx,{}),(0,a.jsxs)(b.azJ,{className:_().row,children:[(0,a.jsx)(b.o5u,{variant:"h4",sx:{fontWeight:700,mb:1},children:"New Safe address"}),W?(0,a.jsx)(T.A,{address:W,hasExplorer:!0,showCopyButton:!0}):(0,a.jsx)(b.EAD,{})]}),(0,a.jsx)(b.cGx,{}),(0,a.jsx)(b.azJ,{className:_().row,children:(0,a.jsxs)(b.azJ,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:3},children:[(0,a.jsx)(b.$nd,{"data-testid":"back-btn",variant:"outlined",size:"small",onClick:()=>{o(v())},startIcon:(0,a.jsx)(N.A,{fontSize:"small"}),children:"Back"}),(0,a.jsx)(b.$nd,{"data-testid":"next-btn",type:"submit",variant:"contained",size:"stretched",disabled:H,children:"Next"})]})})]})})})};var J=n(12002);let W=()=>{let e=(0,l.useRouter)(),t=(0,c.Ay)(),n=(0,C._J)(),[s,r]=(0,S.useState)(""),[y,w]=(0,S.useState)(),[b,A]=(0,S.useState)(0),g=[{title:"Select network and name of your Safe Account",subtitle:"Select the network on which to create your Safe Account",render:(e,t,n,s)=>(0,a.jsx)(h.A,{isAdvancedFlow:!0,setSafeName:r,data:e,onSubmit:t,onBack:n,setStep:s,setOverviewNetworks:()=>{},setDynamicHint:()=>{}})},{title:"Signers and confirmations",subtitle:"Set the signer wallets of your Safe Account and how many need to confirm to execute a valid transaction.",render:(e,t,n,s)=>(0,a.jsx)(x.A,{setDynamicHint:w,data:e,onSubmit:t,onBack:n,setStep:s})},{title:"Advanced settings",subtitle:"Choose the Safe version and optionally a specific salt nonce",render:(e,t,n,s)=>(0,a.jsx)(E,{data:e,onSubmit:t,onBack:n,setStep:s})},{title:"Review",subtitle:"You're about to create a new Safe Account and will have to confirm the transaction with your connected wallet.",render:(e,t,n,s)=>(0,a.jsx)(m.Ay,{data:e,onSubmit:t,onBack:n,setStep:s})},{title:"",subtitle:"",render:(e,t,n,s,r,i)=>(0,a.jsx)(u.I,{data:e,onSubmit:t,onBack:n,setStep:s,setProgressColor:r,setStepData:i})}],N={name:"",networks:[],owners:[],threshold:1,saltNonce:0,safeVersion:(0,J.Tw)(n),paymentReceiver:i.e7};return(0,a.jsx)(o.mcf,{children:(0,a.jsxs)(o.xA9,{container:!0,columnSpacing:3,sx:{justifyContent:"center",mt:[2,null,7]},children:[(0,a.jsx)(o.xA9,{item:!0,xs:12,children:(0,a.jsx)(o.o5u,{variant:"h2",sx:{pb:2},children:"Create new Safe Account"})}),(0,a.jsx)(o.xA9,{item:!0,xs:12,md:8,sx:{order:[1,null,0]},children:(0,a.jsx)(f.m,{initialData:N,initialStep:0,onClose:()=>{e.push(p.S.welcome.index)},steps:g,eventCategory:v.kN,setWidgetStep:A})}),(0,a.jsx)(o.xA9,{item:!0,xs:12,md:4,sx:{mb:[3,null,0],order:[0,null,1]},children:(0,a.jsxs)(o.xA9,{container:!0,spacing:3,children:[b<2&&(0,a.jsx)(d.A,{safeName:s,networks:[]}),(null==t?void 0:t.address)&&(0,a.jsx)(j.A,{dynamicHint:y})]})})]})})},P=()=>(0,a.jsxs)("main",{children:[(0,a.jsx)(r(),{children:(0,a.jsx)("title",{children:"".concat(i.Az," â€“ Advanced Safe creation")})}),(0,a.jsx)(W,{})]})},97364:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/new-safe/advanced-create",function(){return n(69480)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[7214,9383,636,6593,8792],()=>t(97364)),_N_E=e.O()}]);
//# sourceMappingURL=advanced-create-c607094d8e110d30.js.map