(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5514],{14253:(e,t,s)=>{"use strict";s.d(t,{Sc0:()=>r.Sc0,gE_:()=>r.gE_,ip9:()=>r.ip9,o5u:()=>r.o5u,tu9:()=>r.tu9,xA9:()=>r.xA9});var r=s(78726)},16135:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/safe-apps",function(){return s(81713)}])},20063:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(6029),n=s(78726);let a=e=>{let{label:t,checked:s,onChange:a,name:l}=e;return(0,r.jsx)(n.ip9,{sx:e=>{let{palette:t}=e;return{flex:1,".MuiIconButton-root:not(.Mui-checked)":{color:t.text.disabled}}},control:(0,r.jsx)(n.Sc0,{checked:s,onChange:a,name:l}),label:t})}},37401:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var r=s(6029);s(55729);var n=s(48230),a=s.n(n),l=s(78726),i=s(89099),o=s(42893),c=s.n(o);let d=e=>{let{tabs:t}=e,s=(0,i.useRouter)(),n=Math.max(0,t.map(e=>e.href).indexOf(s.pathname)),o=s.query.safe?{safe:s.query.safe}:void 0;return(0,r.jsx)(l.tUM,{value:n,variant:"scrollable",allowScrollButtonsMobile:!0,className:c().tabs,children:t.map((e,t)=>(0,r.jsx)(l.ozo,{href:{pathname:e.href,query:o},component:a(),tabIndex:0,className:c().tab,label:(0,r.jsx)(l.o5u,{variant:"body2",fontWeight:700,color:n===t?"primary":"primary.light",className:c().label,children:e.label})},e.href))})}},42893:e=>{e.exports={tabs:"styles_tabs__8AoqD",tab:"styles_tab__WjqMe",label:"styles_label__D53iN"}},47679:(e,t,s)=>{"use strict";s.d(t,{v:()=>g});var r=s(55729),n=s(38991),a=s(26397),l=s(56466),i=s(50293);let o=e=>"".concat("customSafeApps","-").concat(e),c=()=>{let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!1),c=(0,i.Ay)(),d=(0,r.useCallback)(e=>{t(e);let s=o(c);a.A.setItem(s,e.map(e=>({url:e.url})))},[c]);return(0,r.useEffect)(()=>{(async()=>{n(!0);let e=o(c),s=a.A.getItem(e)||[];t((await Promise.allSettled(s.map(e=>(0,l.yo)(e.url,c)))).filter(e=>"fulfilled"===e.status).map(e=>e.value)),n(!1)})()},[c]),{customSafeApps:e,loading:s,updateCustomSafeApps:d}};var d=s(57187),u=s(31536);let m=()=>{let e=(0,i.Ay)(),t=(0,d.GV)(t=>(0,u.Pc)(t,e)),s=(0,r.useMemo)(()=>new Set(t),[t]),n=(0,d.jL)();return{pinnedSafeAppIds:s,updatePinnedSafeApps:(0,r.useCallback)(t=>{n((0,u.HX)({pinned:Array.from(t),chainId:e}))},[n,e])}};var p=s(93222),x=s(77308);let h=(e,t)=>(0,r.useMemo)(()=>{if(!e.length)return[];let s=e.filter(e=>e.featured),r=(0,x.K1)(t);return[...new Set(s.concat(r,t))].slice(0,5)},[e]);var f=s(85205);let g=()=>{let[e=[],t,s]=(0,n.d)(),{customSafeApps:a,loading:l,updateCustomSafeApps:i}=c(),{pinnedSafeAppIds:o,updatePinnedSafeApps:d}=m(),{removePermissions:u}=(0,p.Jl)(),{removePermissions:x}=(0,p.M3)(),g=(0,r.useMemo)(()=>e.concat(a).sort((e,t)=>e.name.localeCompare(t.name)),[e,a]),v=(0,r.useMemo)(()=>e.filter(e=>o.has(e.id)),[e,o]),b=h(g,v),j=(0,r.useCallback)(e=>{i([...a,e])},[i,a]),A=(0,r.useCallback)(e=>{i(a.filter(t=>t.id!==e));let t=a.find(t=>t.id===e);t&&(u(t.url),x(t.url))},[i,a,u,x]);return{allSafeApps:g,rankedSafeApps:b,remoteSafeApps:e,remoteSafeAppsLoading:s||!(e||t),remoteSafeAppsError:t,pinnedSafeApps:v,pinnedSafeAppIds:o,togglePin:(e,t)=>{var s;let r=o.has(e),n=new Set(o),a=null===(s=g.find(t=>t.id===e))||void 0===s?void 0:s.name;r?(n.delete(e),(0,f.ai)({...f.Jz.UNPIN,label:t},a)):(n.add(e),(0,f.ai)({...f.Jz.PIN,label:t},a)),d(n)},customSafeApps:a,customSafeAppsLoading:l,addCustomApp:j,removeCustomApp:A}}},56466:(e,t,s)=>{"use strict";s.d(t,{yo:()=>c});var r=s(66852),n=s(54926);let a=e=>{let t=e.find(e=>{var t;return(null==e?void 0:null===(t=e.sizes)||void 0===t?void 0:t.includes("any"))||(null==e?void 0:e.type)==="image/svg+xml"});if(t)return t.src;for(let t of e)for(let e of t.sizes.split(" "))if(Number(e.split("x")[0])>=128)return t.src;return e[0].src||""},l=(e,t)=>{let{icons:s=[],iconPath:n=""}=t,l=s.length?a(s):n;return l.startsWith("https://")?l:"".concat(e).concat((0,r.cW)(l)?"":"/").concat(l)},i=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,s=(0,r.Ud)(e),n=(0,r.Kj)(s),a="".concat(n,"/manifest.json"),l=new AbortController,i=setTimeout(()=>l.abort(),t),o=await fetch(a,{signal:l.signal});if(clearTimeout(i),!o.ok)throw Error("Failed to fetch manifest from ".concat(a));return o.json()},o=e=>null!=e&&"object"==typeof e&&"name"in e&&"description"in e&&("icons"in e||"iconPath"in e),c=async(e,t)=>{let s=(0,r.Ud)(e),a=(0,r.Kj)(s),c=await i(e);if(!o(c))throw Error("Invalid Safe App manifest");let d=l(a,c);return{id:Math.round(1e9*Math.random()+1e6),url:a,originalUrl:e,name:c.name,description:c.description,accessControl:{type:n.SafeAppAccessPolicyTypes.NoRestrictions},tags:[],features:[],socialProfiles:[],developerWebsite:"",chainIds:[t],iconUrl:d,safeAppsPermissions:c.safe_apps_permissions||[]}}},78437:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var r=s(6029),n=s(85235),a=s(32988),l=s.n(a),i=s(97114),o=s.n(i);let c=e=>{let{title:t,action:s,noBorder:a}=e;return(0,r.jsxs)(n.azJ,{className:l()(o().container,{[o().border]:!a}),children:[(0,r.jsx)(n.o5u,{variant:"h3",className:o().title,children:t}),s]})}},81713:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var r=s(6029),n=s(77328),a=s.n(n),l=s(47679),i=s(93222),o=s(55729),c=s(47276),d=s(78726),u=s(20063),m=s(10240);let p=()=>{let{allSafeApps:e}=(0,l.v)(),{permissions:t,updatePermission:s,removePermissions:n,isUserRestricted:a}=(0,i.Jl)(),{permissions:p,updatePermission:x,removePermissions:h}=(0,i.M3)(),f=(0,o.useMemo)(()=>Array.from(new Set(Object.keys(p).concat(Object.keys(t)))),[t,p]),g=(e,t,r)=>s(e,[{capability:t,selected:r}]),v=(e,t,s)=>x(e,[{feature:t,selected:s}]),b=(0,o.useCallback)((e,r)=>{var n,a;(null===(n=t[e])||void 0===n?void 0:n.length)&&s(e,t[e].map(e=>{let{parentCapability:t}=e;return{capability:t,selected:r}})),(null===(a=p[e])||void 0===a?void 0:a.length)&&x(e,p[e].map(e=>{let{feature:t}=e;return{feature:t,selected:r}}))},[p,t,x,s]),j=(0,o.useCallback)((e,t)=>{e.preventDefault(),b(t,!0)},[b]),A=(0,o.useCallback)((e,t)=>{e.preventDefault(),b(t,!1)},[b]),_=(0,o.useCallback)((e,t)=>{e.preventDefault(),n(t),h(t)},[h,n]),y=(0,o.useMemo)(()=>e.reduce((e,t)=>(e[t.url]=t.name,e),{}),[e]);return e.length?(0,r.jsxs)(d.tu9,{sx:{padding:4},children:[(0,r.jsx)(d.o5u,{variant:"h4",fontWeight:700,children:"Safe Apps permissions"}),(0,r.jsx)("br",{}),!f.length&&(0,r.jsx)(d.o5u,{variant:"body1",sx:{color:e=>{let{palette:t}=e;return t.primary.light}},children:"There are no Safe Apps using permissions."}),f.map(e=>{var s,n;return(0,r.jsxs)(d.xA9,{item:!0,sx:e=>{let{palette:t,shape:s}=e;return{border:"1px solid ".concat(t.border.light),borderRadius:s.borderRadius,marginBottom:"16px"}},children:[(0,r.jsxs)(d.xA9,{container:!0,sx:e=>{let{palette:t}=e;return{padding:"15px 24px",borderBottom:"1px solid ".concat(t.border.light)}},children:[(0,r.jsxs)(d.xA9,{item:!0,xs:12,sm:5,sx:{padding:"9px 0"},children:[(0,r.jsx)(d.o5u,{variant:"h5",fontWeight:700,children:y[e]}),(0,r.jsx)(d.o5u,{variant:"body2",children:e})]}),(0,r.jsxs)(d.xA9,{container:!0,item:!0,xs:12,sm:7,children:[null===(s=t[e])||void 0===s?void 0:s.map(t=>{let{parentCapability:s,caveats:n}=t;return(0,r.jsx)(d.xA9,{item:!0,xs:12,sm:6,lg:4,xl:3,children:(0,r.jsx)(u.A,{name:s,label:(0,i.Nx)(s).displayName,onChange:(t,r)=>g(e,s,r),checked:!a(n)})},s)}),null===(n=p[e])||void 0===n?void 0:n.map(t=>{let{feature:s,status:n}=t;return(0,r.jsx)(d.xA9,{item:!0,xs:12,sm:6,lg:4,xl:3,children:(0,r.jsx)(u.A,{name:s.toString(),label:(0,i.sW)(s).displayName,onChange:(t,r)=>v(e,s,r),checked:n===c.W.GRANTED})},s)})]})]}),(0,r.jsxs)(d.xA9,{container:!0,item:!0,justifyContent:"flex-end",sx:{padding:"12px 24px"},children:[(0,r.jsx)(d.N_E,{href:"#",onClick:t=>j(t,e),sx:{textDecoration:"none"},children:"Allow all"}),(0,r.jsx)(d.N_E,{href:"#",color:"error",onClick:t=>A(t,e),sx:{textDecoration:"none"},ml:2,children:"Clear all"}),(0,r.jsx)(d.N_E,{href:"#",color:"error",onClick:t=>_(t,e),ml:2,children:(0,r.jsx)(d.Ahz,{component:m.A,inheritViewBox:!0,color:"error",fontSize:"small"})})]})]},e)})]}):(0,r.jsx)("div",{})};var x=s(85495),h=s(88271),f=s(85205),g=s(57187),v=s(73484),b=s(14253),j=s(94937),A=s(38858);let _=()=>{let e=(0,g.GV)(v.gB),t=(0,g.jL)();return(0,r.jsx)(b.tu9,{sx:{padding:4,mt:2},children:(0,r.jsxs)(b.xA9,{container:!0,spacing:3,children:[(0,r.jsx)(b.xA9,{item:!0,lg:4,xs:12,children:(0,r.jsx)(b.o5u,{variant:"h4",fontWeight:"bold",mb:1,children:"Signing method"})}),(0,r.jsxs)(b.xA9,{item:!0,xs:!0,children:[(0,r.jsxs)(b.o5u,{mb:2,children:["This setting determines how the ",j.Az," will sign message requests from Safe Apps. Gasless, off-chain signing is used by default. Learn more about message signing"," ",(0,r.jsx)(h.A,{href:A.tF.SIGNED_MESSAGES,children:"here"}),"."]}),(0,r.jsx)(b.gE_,{children:(0,r.jsx)(b.ip9,{sx:e=>{let{palette:t}=e;return{flex:1,".MuiIconButton-root:not(.Mui-checked)":{color:t.text.disabled}}},control:(0,r.jsx)(b.Sc0,{checked:e,onChange:()=>{(0,f.sx)(f.kd.SAFE_APPS.CHANGE_SIGNING_METHOD),t((0,v.c6)(!e))},name:"use-on-chain-signing"}),label:"Always use on-chain signatures"})})]})]})})},y=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a(),{children:(0,r.jsx)("title",{children:"".concat(j.Az," – Settings – Safe Apps")})}),(0,r.jsx)(x.A,{}),(0,r.jsxs)("main",{children:[(0,r.jsx)(p,{}),(0,r.jsx)(_,{})]})]})},85495:(e,t,s)=>{"use strict";s.d(t,{A:()=>m});var r=s(6029),n=s(37401),a=s(78437),l=s(23084),i=s(97114),o=s.n(i),c=s(57910),d=s(30697),u=s(7717);let m=(0,s(77978).A)(e=>{let{safeAddress:t,chain:s}=e,i=t?l.Zt.filter(e=>(0,u.$I)(e.href,s)):l.r$;return(0,r.jsx)(a.A,{title:t?"Settings":"Preferences",action:(0,r.jsx)("div",{className:o().navWrapper,children:(0,r.jsx)(n.A,{tabs:i})})})},{safeAddress:c.A,chain:d._J})},97114:e=>{e.exports={container:"styles_container__sGid8",title:"styles_title___s0jt",border:"styles_border__BkX1U",pageHeader:"styles_pageHeader__fRL7d",actionsWrapper:"styles_actionsWrapper__g_Tq2",navWrapper:"styles_navWrapper__XNqgs"}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,6593,8792],()=>t(16135)),_N_E=e.O()}]);
//# sourceMappingURL=safe-apps-afc3abf5bc4e794f.js.map