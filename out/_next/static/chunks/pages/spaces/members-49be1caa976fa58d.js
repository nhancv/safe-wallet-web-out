(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1801],{12806:(e,t,n)=>{"use strict";n.d(t,{A:()=>C});var s=n(6029),i=n(55729),r=n(97186),a=n(31634),l=n(85235),o=n(88082),c=n.n(o),d=n(47737),m=n(48230),h=n.n(m),u=n(72830);let x=()=>(0,s.jsx)(l.azJ,{className:c().content,children:(0,s.jsx)(l.azJ,{textAlign:"center",className:c().contentWrapper,children:(0,s.jsxs)(l.azJ,{className:c().contentInner,children:[(0,s.jsx)(l.o5u,{fontWeight:700,mb:2,children:"You don’t have permissions to this page"}),(0,s.jsx)(l.o5u,{color:"text.secondary",mb:2,children:"Sorry, you don’t have permissions to view this page, as your wallet is not a member of the space. Try to sign in with a different wallet or go back to the overview."}),(0,s.jsx)(h(),{href:u.S.welcome.spaces,passHref:!0,children:(0,s.jsx)(d.A,{variant:"outlined",children:"Back to overview"})})]})})});var p=n(62426);let j=()=>(0,s.jsx)(p.azJ,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:(0,s.jsx)(p.PaH,{"aria-label":"Loading content"})});var b=n(57187),g=n(36733),v=n(1122),A=n(90951),w=n(35908),_=n(30697),f=n(12002),y=n(73349);let C=e=>{let{spaceId:t,children:n}=e,l=(0,b.jL)(),o=(0,b.GV)(g.wR),{currentData:c}=(0,A.h4)(void 0,{skip:!o}),{currentData:d,error:m,isLoading:h}=(0,v.Wr)({id:Number(t)},{skip:!o}),u=(0,_.eZ)(f.Gv.SPACES);(0,y.A)();let p=null==d?void 0:d.members.some(e=>e.user.id===(null==c?void 0:c.id)&&e.status===w.F.DECLINED);return((0,i.useEffect)(()=>{l((0,g.Ax)(t))},[l,t]),u)?h?(0,s.jsx)(j,{}):o?(0,a.Tk)(m)||p?(0,s.jsx)(x,{}):n:(0,s.jsx)(r.A,{}):null}},22692:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var s=n(6029),i=n(55729),r=n(67578),a=n(7339),l=n(46347),o=n(60755),c=n(44348),d=n(2639),m=n(9378),h=n(18107),u=n(86502),x=n(11951),p=n(58951),j=n(32988),b=n.n(j),g=n(29976),v=n.n(g),A=n(78726);function w(e,t){return t<e?-1:+(t>e)}function _(e){let{headCells:t,order:n,orderBy:i,onRequestSort:a}=e,l=e=>()=>{a(e)};return(0,s.jsx)(d.A,{children:(0,s.jsx)(h.A,{children:t.map(e=>(0,s.jsx)(o.A,{align:"left",padding:"normal",sortDirection:i===e.id&&n,sx:{width:e.width?e.width:"",textAlign:e.align?e.align:""},className:b()({sticky:e.sticky}),children:e.label&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(u.A,{active:i===e.id,direction:i===e.id?n:"asc",onClick:l(e.id),sx:{mr:[0,"-26px"],textWrap:"nowrap"},children:[e.label,i===e.id?(0,s.jsx)(r.A,{component:"span",sx:p.A,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})})},e.id))})})}let f=[10,25,100],y=function(e){let{rows:t,headCells:n,mobileVariant:d}=e,[u,p]=(0,i.useState)("asc"),[j,g]=(0,i.useState)(""),[w,y]=(0,i.useState)(0),[C,N]=(0,i.useState)(f[1]),E=(j?t.slice().sort((e,t)=>{var n,s,i,r;let a=e.cells[j].rawValue,l=t.cells[j].rawValue;return null==a?1:null==l?-1:null==a&&null==l?0:"desc"===u?(n=a,(s=l)<n?-1:+(s>n)):-(i=a,(r=l)<i?-1:+(r>i))}):t).slice(w*C,w*C+C);return(0,s.jsxs)(r.A,{sx:{width:"100%"},children:[(0,s.jsx)(c.A,{"data-testid":"table-container",component:x.A,sx:{width:"100%",mb:2},children:(0,s.jsxs)(a.A,{"aria-labelledby":"tableTitle",className:d?v().mobileColumn:void 0,children:[(0,s.jsx)(_,{headCells:n,order:u,orderBy:j,onRequestSort:e=>{p(j===e&&"asc"===u?"desc":"asc"),g(e)}}),(0,s.jsx)(l.A,{children:E.length>0?E.map((e,t)=>{var n;return(0,s.jsx)(h.A,{"data-testid":"table-row",tabIndex:-1,selected:e.selected,className:e.collapsed?v().collapsedRow:void 0,children:Object.entries(e.cells).map(n=>{let[i,r]=n;return(0,s.jsx)(o.A,{className:b()({sticky:r.sticky,[v().collapsedCell]:e.collapsed}),children:(0,s.jsx)(A.SDm,{in:!e.collapsed,enter:!1,children:r.content},t)},i)})},null!==(n=e.key)&&void 0!==n?n:t)}):(0,s.jsx)(h.A,{children:(0,s.jsx)(o.A,{})})})]})}),(t.length>f[0]||C!==f[1])&&(0,s.jsx)(m.A,{"data-testid":"table-pagination",rowsPerPageOptions:f,component:"div",count:t.length,rowsPerPage:C,page:w,onPageChange:(e,t)=>{y(t)},onRowsPerPageChange:e=>{N(parseInt(e.target.value,10)),y(0)}})]})}},29976:e=>{e.exports={tableCell:"styles_tableCell___4sMa",collapsedCell:"styles_collapsedCell__M_3f8",collapsedRow:"styles_collapsedRow__Zwb1R",actions:"styles_actions__ZIRNt",mobileColumn:"styles_mobileColumn__ubx77"}},34121:(e,t,n)=>{"use strict";n.d(t,{BJc:()=>s.BJc,azJ:()=>s.azJ,o5u:()=>s.o5u,tu9:()=>s.tu9});var s=n(78726)},37975:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>$});var s=n(6029),i=n(89099),r=n(77328),a=n.n(r),l=n(94937),o=n(7565),c=n(43780),d=n(39006),m=n(55729),h=n(78726),u=n(61449),x=n(10240),p=n(22692),j=n(29976),b=n.n(j),g=n(89067),v=n(50614),A=n(69474),w=n(1122),_=n(60627),f=n(17358),y=n(85205),C=n(54932),N=n(42205),E=n(57187);let I=e=>{let{userId:t,memberName:n,handleClose:i,isInvite:r=!1}=e,a=(0,_.O)(),l=(0,E.jL)(),[o]=(0,w.yN)(),[c,d]=(0,m.useState)(""),h=async()=>{d(""),(0,y.sx)({...C.D.REMOVE_MEMBER,label:r?C.N.invite_list:C.N.member_list});try{let{error:e}=await o({spaceId:Number(a),userId:t});if(e)throw e;l((0,N.Ds)({message:"Removed ".concat(n," from space"),variant:"success",groupKey:"remove-member-success"})),i()}catch(e){d("An unexpected error occurred while removing the member.")}};return(0,s.jsxs)(v.A,{open:!0,onClose:i,dialogTitle:r?"Remove invitation":"Remove member",hideChainIndicator:!0,children:[(0,s.jsxs)(A.Cff,{sx:{p:"24px !important"},children:[(0,s.jsxs)(A.o5u,{children:[r?"Are you sure you want to remove the invitation for ":"Are you sure you want to remove ",(0,s.jsx)("b",{children:n}),r?"":" from this space?"]}),c&&(0,s.jsx)(f.A,{children:c})]}),(0,s.jsxs)(A.iin,{children:[(0,s.jsx)(A.$nd,{"data-testid":"cancel-btn",onClick:i,children:"Cancel"}),(0,s.jsx)(A.$nd,{"data-testid":"delete-btn",onClick:h,variant:"danger",disableElevation:!0,children:"Remove"})]})]})};var D=n(35908),k=n(88992),S=n(71666);let z=e=>{let{member:t,handleClose:n}=e,i=(0,_.O)(),r=(0,E.jL)(),[a]=(0,w.Gi)(),[l,o]=(0,m.useState)(),c=(0,k.mN)({mode:"onChange",defaultValues:{name:t.name,role:t.role}}),{handleSubmit:d,formState:h}=c,u=d(async e=>{if(o(void 0),!i){o("Something went wrong. Please try again.");return}try{let{error:s}=await a({spaceId:Number(i),userId:t.user.id,updateRoleDto:{role:e.role}});if(s)throw s;r((0,N.Ds)({message:"Updated role of ".concat(e.name," to ").concat(e.role),variant:"success",groupKey:"update-member-success"})),n()}catch(e){o("An unexpected error occurred while editing the member.")}});return(0,s.jsx)(v.A,{open:!0,onClose:n,dialogTitle:"Edit member",hideChainIndicator:!0,children:(0,s.jsx)(k.Op,{...c,children:(0,s.jsxs)("form",{onSubmit:u,children:[(0,s.jsxs)(A.Cff,{sx:{p:"24px !important"},children:[(0,s.jsxs)(A.o5u,{mb:2,children:["Edit the role of ",(0,s.jsx)("b",{children:"".concat(t.name)})," in this space."]}),(0,s.jsx)(S.A,{isEdit:!0}),l&&(0,s.jsx)(f.A,{children:l})]}),(0,s.jsxs)(A.iin,{children:[(0,s.jsx)(A.$nd,{"data-testid":"cancel-btn",onClick:n,children:"Cancel"}),(0,s.jsx)(A.$nd,{type:"submit","data-testid":"delete-btn",variant:"danger",disableElevation:!0,disabled:!h.isDirty,children:"Update"})]})]})})})};var R=n(84942);let M=[{id:"name",label:"Name",width:"70%"},{id:"role",label:"Role",width:"15%"},{id:"actions",label:"",width:"15%",sticky:!0}],J=e=>{let{member:t,disabled:n}=e,[i,r]=(0,m.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.m_M,{title:n?"Cannot edit role of last admin":"Edit member",placement:"top",children:(0,s.jsx)(h.azJ,{component:"span",children:(0,s.jsx)(h.K0,{onClick:()=>r(!0),size:"small",disabled:n,children:(0,s.jsx)(h.Ahz,{component:u.A,inheritViewBox:!0,color:"border",fontSize:"small"})})})}),i&&(0,s.jsx)(z,{member:t,handleClose:()=>r(!1)})]})},P=e=>{let{member:t,disabled:n,isInvite:i}=e,[r,a]=(0,m.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.m_M,{title:n?"Cannot remove last admin":"Remove ".concat(i?"invitation":"member"),placement:"top",children:(0,s.jsx)(h.azJ,{component:"span",children:(0,s.jsx)(R.A,{...C.D.REMOVE_MEMBER_MODAL,label:i?C.N.invite_list:C.N.member_list,children:(0,s.jsx)(h.K0,{disabled:n,onClick:()=>a(!0),size:"small",children:(0,s.jsx)(h.Ahz,{component:x.A,inheritViewBox:!0,color:n?"disabled":"error",fontSize:"small"})})})})}),r&&(0,s.jsx)(I,{userId:t.user.id,memberName:t.name,handleClose:()=>a(!1),isInvite:i})]})},B=e=>{let{members:t}=e,n=(0,D.h7)(),i=t.filter(e=>e.role===D.b_.ADMIN).length,r=t.map(e=>{let t=1===i&&e.role===D.b_.ADMIN,r=e.status===D.F.INVITED||e.status===D.F.DECLINED,a=e.status===D.F.DECLINED,l=n&&t&&!r;return{cells:{name:{rawValue:e.name,content:(0,s.jsxs)(h.BJc,{direction:"row",alignItems:"center",justifyContent:"left",gap:1,children:[(0,s.jsx)(g.A,{member:e}),a&&(0,s.jsx)(h.vu3,{label:"Declined",size:"small",sx:{backgroundColor:"error.light",color:"static.main",borderRadius:.5}})]})},role:{rawValue:e.role,content:(0,s.jsx)(h.vu3,{size:"small",label:e.role===D.b_.ADMIN?"Admin":"Member",sx:{backgroundColor:"background.lightgrey",borderRadius:.5}})},actions:{rawValue:"",sticky:!0,content:n?(0,s.jsxs)("div",{className:b().actions,children:[!r&&(0,s.jsx)(J,{member:e,disabled:l}),(0,s.jsx)(P,{member:e,disabled:l,isInvite:r})]}):null}}}});return r.length?(0,s.jsx)(p.A,{rows:r,headCells:M}):null};var V=n(38767);let W=(e,t)=>{let n=(0,m.useMemo)(()=>new V.A(e,{keys:[{name:"name"}],threshold:.2,findAllMatches:!0,ignoreLocation:!0}),[e]);return(0,m.useMemo)(()=>t?n.search(t).map(e=>e.item):e,[n,t,e])};var F=n(97511),L=n(81223);let O=()=>{let[e,t]=(0,m.useState)(!1),[n,i]=(0,m.useState)(""),{activeMembers:r,invitedMembers:a}=(0,D.ce)(),l=(0,D.h7)(),h=(0,D.xt)(),u=W(r,n),x=W(a,n);return(0,m.useEffect)(()=>{n&&(0,y.sx)({...C.D.SEARCH_MEMBERS})},[n]),(0,s.jsxs)(s.Fragment,{children:[h&&(0,s.jsx)(F.A,{}),(0,s.jsx)(c.o5u,{variant:"h1",mb:3,children:"Members"}),(0,s.jsxs)(c.BJc,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",mb:3,flexWrap:"nowrap",gap:2,flexDirection:{xs:"column-reverse",sm:"row"},children:[(0,s.jsx)(L.A,{onSearch:i}),l&&(0,s.jsx)(R.A,{...C.D.ADD_MEMBER_MODAL,label:C.N.members_page,children:(0,s.jsx)(c.$nd,{"data-testid":"add-member-button",variant:"contained",startIcon:(0,s.jsx)(o.A,{}),onClick:()=>t(!0),sx:{whiteSpace:"nowrap"},children:"Add member"})})]}),(0,s.jsxs)(s.Fragment,{children:[n&&!u.length&&!x.length&&(0,s.jsx)(c.o5u,{variant:"h5",fontWeight:"normal",mb:2,color:"primary.light",children:"Found 0 results"}),x.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c.o5u,{variant:"h5",fontWeight:700,mb:2,children:["Pending invitations (",x.length,")"]}),(0,s.jsx)(B,{members:x})]}),u.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c.o5u,{variant:"h5",fontWeight:700,mb:2,mt:1,children:["All members (",u.length,")"]}),(0,s.jsx)(B,{members:u})]})]}),e&&(0,s.jsx)(d.A,{onClose:()=>t(!1)})]})};var T=n(12806);function $(){let e=(0,i.useRouter)(),{spaceId:t}=e.query;return e.isReady&&t&&"string"==typeof t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a(),{children:(0,s.jsx)("title",{children:"".concat(l.Az," – Space members")})}),(0,s.jsx)("main",{children:(0,s.jsx)(T.A,{spaceId:t,children:(0,s.jsx)(O,{})})})]}):null}},43780:(e,t,n)=>{"use strict";n.d(t,{$nd:()=>s.$nd,BJc:()=>s.BJc,o5u:()=>s.o5u});var s=n(78726)},62426:(e,t,n)=>{"use strict";n.d(t,{PaH:()=>s.PaH,azJ:()=>s.azJ});var s=n(78726)},69474:(e,t,n)=>{"use strict";n.d(t,{$nd:()=>s.$nd,Cff:()=>s.Cff,iin:()=>s.iin,o5u:()=>s.o5u});var s=n(78726)},71530:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/spaces/members",function(){return n(37975)}])},81223:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var s=n(6029),i=n(78726),r=n(12273),a=n(55729),l=n(47339);let o=e=>{let{onSearch:t,debounceTime:n=300}=e,o=(0,a.useCallback)((0,l.debounce)(t,n),[t,n]);return(0,s.jsx)(i.A_L,{"aria-label":"Search",placeholder:"Search",variant:"filled",hiddenLabel:!0,onChange:e=>{o(e.target.value)},InputProps:{startAdornment:(0,s.jsx)(i.jC1,{position:"start",children:(0,s.jsx)(i.Ahz,{component:r.A,inheritViewBox:!0,color:"border",fontSize:"small","data-testid":"search-icon"})}),disableUnderline:!0},size:"small",sx:{transition:"width 0.15s ease-in-out",width:{xs:"100%",sm:"250px"},"&:focus-within":{width:{xs:"100%",sm:"470px"}}}})}},88082:e=>{e.exports={content:"styles_content__22emV",contentWrapper:"styles_contentWrapper__WlUhQ",contentInner:"styles_contentInner__iALXa",iconBG:"styles_iconBG__Gmca_",image:"styles_image__S4T8i",chainIndicator:"styles_chainIndicator__QOXJW",chainIndicatorColor:"styles_chainIndicatorColor__eAxPt"}},97186:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var s=n(6029),i=n(85235),r=n(88082),a=n.n(r),l=n(54464);let o=()=>(0,s.jsx)(i.azJ,{className:a().content,children:(0,s.jsx)(i.azJ,{textAlign:"center",className:a().contentWrapper,children:(0,s.jsxs)(i.azJ,{className:a().contentInner,children:[(0,s.jsx)(i.o5u,{fontWeight:700,mb:2,children:"Sign in to see content"}),(0,s.jsx)(i.o5u,{color:"text.secondary",mb:2,children:"To view and interact with spaces, you need to sign in with the wallet, that is a member of the space. Sign in to continue."}),(0,s.jsx)(l.A,{})]})})})},97511:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var s=n(6029),i=n(34121),r=n(1122),a=n(94313),l=n(94561),o=n.n(l),c=n(60627),d=n(36733),m=n(57187),h=n(11973),u=n(54932),x=n(84942),p=n(43241),j=n(4876),b=n(90951),g=n(97488);let v=()=>{var e;let t=(0,g.D)(),n=(0,m.GV)(d.wR),l=(0,c.O)(),{currentData:v}=(0,b.h4)(),{currentData:A}=(0,r.Wr)({id:Number(l)},{skip:!n||!l}),w=null==A?void 0:null===(e=A.members.find(e=>e.user.id===(null==v?void 0:v.id)))||void 0===e?void 0:e.invitedBy;return A?(0,s.jsx)(i.tu9,{sx:{p:2,mb:4,backgroundColor:t?"info.background":"info.light"},children:(0,s.jsxs)(i.azJ,{className:o().previewInviteContent,children:[(0,s.jsx)(a.A,{name:A.name,size:"medium"}),(0,s.jsxs)(i.o5u,{variant:"body1",color:"text.primary",flexGrow:1,children:["You were invited to join ",(0,s.jsx)("strong",{children:A.name}),w&&(0,s.jsxs)(s.Fragment,{children:[" ","by",(0,s.jsx)(i.o5u,{component:"span",variant:"body1",fontWeight:700,color:"primary.main",position:"relative",top:"4px",ml:"6px",display:"inline-block",sx:{"> div":{gap:"4px"}},children:(0,s.jsx)(j.A,{address:w,avatarSize:20,showName:!1,showPrefix:!1,copyPrefix:!1})})]})]}),(0,s.jsxs)(i.BJc,{direction:"row",spacing:1,children:[(0,s.jsx)(x.A,{...u.D.ACCEPT_INVITE,label:u.N.preview_banner,children:(0,s.jsx)(h.A,{space:A})}),(0,s.jsx)(x.A,{...u.D.DECLINE_INVITE,label:u.N.preview_banner,children:(0,s.jsx)(p.A,{space:A})})]})]})}):null}}},e=>{var t=t=>e(e.s=t);e.O(0,[2487,5902,5519,636,6593,8792],()=>t(71530)),_N_E=e.O()}]);
//# sourceMappingURL=members-49be1caa976fa58d.js.map