(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9085],{4784:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var r=a(84865),s=a(55729),i=a(95797),n=a(8694),d=a(28729),l=a(41086);let c=e=>{var t,a;let[c,u]=(0,s.useState)(),{safe:o}=(0,d.A)(),h=null===(a=(0,i.A)().page)||void 0===a?void 0:null===(t=a.results)||void 0===t?void 0:t.filter(r.a).find(t=>t.messageHash===e),[g,f]=(0,n.A)(async()=>{if(e)return(0,l.t)(e,o.chainId)},[e,o.chainId,o.messagesTag]);return(0,s.useEffect)(()=>{u(null!=g?g:h)},[h,g]),[c,u,f]}},41086:(e,t,a)=>{"use strict";a.d(t,{A:()=>p,t:()=>v});var r=a(88683),s=a(26247),i=a(79651),n=a(44993),d=a(54926),l=a(77986),c=a(57212),u=a(10423),o=a(76870);let h=async e=>{let{provider:t,safe:a,message:r,origin:s=""}=e,n=(0,c.iD)(a,r);try{let e=await (0,o.Z3)(t),i=await (0,c.K_)(e,a,r),n=r;(0,c.nW)(r)&&(n=(0,u.mk)(r)),await (0,d.proposeSafeMessage)(a.chainId,a.address.value,{message:n,signature:i,origin:s})}catch(e){throw(0,l.hH)(l.Nd.PROPOSE_FAILED,{messageHash:n,error:(0,i.z)(e)}),e}(0,l.hH)(l.Nd.PROPOSE,{messageHash:n})},g=async e=>{let{provider:t,safe:a,message:r}=e,s=(0,c.iD)(a,r);try{let e=await (0,o.Z3)(t),i=await (0,c.K_)(e,a,r);await (0,d.confirmSafeMessage)(a.chainId,s,{signature:i})}catch(e){throw(0,l.hH)(l.Nd.CONFIRM_PROPOSE_FAILED,{messageHash:s,error:(0,i.z)(e)}),e}(0,l.hH)(l.Nd.CONFIRM_PROPOSE,{messageHash:s})};var f=a(55729),m=a(28729);let v=async(e,t)=>{let a;try{a={...await (0,d.getSafeMessage)(t,e),type:"MESSAGE"}}catch(e){throw(0,s.vV)(s.I._613,e),e}return a},p=(e,t,a,s,d,l)=>{let[c,u]=(0,f.useState)(),o=(0,r.Ay)(),{safe:p}=(0,m.A)();(0,f.useEffect)(()=>{let t;return(null==e?void 0:e.preparedSignature)&&(t=setTimeout(()=>(0,n.Q)(e,a,l,s),3e3)),()=>clearTimeout(t)},[e,p.chainId,a,l,s]);let w=(0,f.useCallback)(async()=>{if(o){u(void 0);try{if(e){if(await g({provider:o.provider,safe:p,message:t}),!s){l();return}let e=await v(a,p.chainId);return e&&setTimeout(()=>(0,n.Q)(e,a,l,s),3e3),e}{await h({provider:o.provider,safe:p,message:t,origin:d});let e=await v(a,p.chainId);return 1===p.threshold&&e&&setTimeout(()=>(0,n.Q)(e,a,l,s),3e3),e}}catch(e){u((0,i.z)(e))}}},[o,p,e,t,d,a,l,s]);return{submitError:c,onSign:w}}},44993:(e,t,a)=>{"use strict";a.d(t,{Q:()=>i});var r=a(77986);let s=e=>e.confirmationsSubmitted>=e.confirmationsRequired&&!!e.preparedSignature,i=async(e,t,a,i)=>{s(e)&&((0,r.hH)(r.Nd.SIGNATURE_PREPARED,{messageHash:t,requestId:i,signature:e.preparedSignature}),a())}},52978:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/transactions/msg",function(){return a(69432)}])},69432:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var r=a(6029),s=a(77328),i=a.n(s),n=a(77018),d=a(89099),l=a(50390),c=a(52855),u=a(28212),o=a(4784),h=a(17358);let g=()=>{let{messageHash:e}=(0,d.useRouter)().query,t=Array.isArray(e)?e[0]:e,[a,,s]=(0,o.A)(t);return a?(0,r.jsx)(l.b,{children:(0,r.jsx)(u.A,{msg:a,expanded:!0})}):s?(0,r.jsx)(h.A,{error:s,children:"Failed to load message"}):(0,r.jsx)(c.OQ,{})};var f=a(94937);let m=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i(),{children:(0,r.jsx)("title",{children:"".concat(f.Az," â€“ Message details")})}),(0,r.jsxs)("main",{children:[(0,r.jsx)(n.A,{"data-testid":"tx-details",variant:"h3",fontWeight:700,pt:1,mb:3,children:"Message details"}),(0,r.jsx)(g,{})]})]})}},e=>{var t=t=>e(e.s=t);e.O(0,[2692,8212,636,6593,8792],()=>t(52978)),_N_E=e.O()}]);
//# sourceMappingURL=msg-4c20fdbce7714e2d.js.map